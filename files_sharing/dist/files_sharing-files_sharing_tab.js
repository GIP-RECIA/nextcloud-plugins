/*! For license information please see files_sharing-files_sharing_tab.js.LICENSE.txt */
!function(){"use strict";var e,n={55653:function(e,n,r){var i=r(20144),a=r(31352),s=r(1794),o=r(79753),c=r(75925),l=r.n(c),u=r(4820),h=r(79954);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===d(i)?i:String(i)),r)}var i}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"isPublicUploadEnabled",get:function(){return document.getElementsByClassName("files-filestable")[0]&&"yes"===document.getElementsByClassName("files-filestable")[0].dataset.allowPublicUpload}},{key:"isShareWithLinkAllowed",get:function(){return document.getElementById("allowShareWithLink")&&"yes"===document.getElementById("allowShareWithLink").value}},{key:"federatedShareDocLink",get:function(){return OC.appConfig.core.federatedCloudShareDoc}},{key:"defaultExpirationDate",get:function(){return this.isDefaultExpireDateEnabled?new Date((new Date).setDate((new Date).getDate()+this.defaultExpireDate)):null}},{key:"defaultInternalExpirationDate",get:function(){return this.isDefaultInternalExpireDateEnabled?new Date((new Date).setDate((new Date).getDate()+this.defaultInternalExpireDate)):null}},{key:"defaultRemoteExpirationDateString",get:function(){return this.isDefaultRemoteExpireDateEnabled?new Date((new Date).setDate((new Date).getDate()+this.defaultRemoteExpireDate)):null}},{key:"enforcePasswordForPublicLink",get:function(){return!0===OC.appConfig.core.enforcePasswordForPublicLink}},{key:"enableLinkPasswordByDefault",get:function(){return!0===OC.appConfig.core.enableLinkPasswordByDefault}},{key:"isDefaultExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultExpireDateEnforced}},{key:"isDefaultExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultExpireDateEnabled}},{key:"isDefaultInternalExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultInternalExpireDateEnforced}},{key:"isDefaultRemoteExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultRemoteExpireDateEnforced}},{key:"isDefaultInternalExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultInternalExpireDateEnabled}},{key:"isDefaultRemoteExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultRemoteExpireDateEnabled}},{key:"isRemoteShareAllowed",get:function(){return!0===OC.appConfig.core.remoteShareAllowed}},{key:"isMailShareAllowed",get:function(){var e,t,n,r=OC.getCapabilities();return void 0!==(null==r||null===(e=r.files_sharing)||void 0===e?void 0:e.sharebymail)&&!0===(null==r||null===(t=r.files_sharing)||void 0===t||null===(n=t.public)||void 0===n?void 0:n.enabled)}},{key:"defaultExpireDate",get:function(){return OC.appConfig.core.defaultExpireDate}},{key:"defaultInternalExpireDate",get:function(){return OC.appConfig.core.defaultInternalExpireDate}},{key:"defaultRemoteExpireDate",get:function(){return OC.appConfig.core.defaultRemoteExpireDate}},{key:"isResharingAllowed",get:function(){return!0===OC.appConfig.core.resharingAllowed}},{key:"isPasswordForMailSharesRequired",get:function(){return void 0!==OC.getCapabilities().files_sharing.sharebymail&&OC.getCapabilities().files_sharing.sharebymail.password.enforced}},{key:"shouldAlwaysShowUnique",get:function(){var e,t;return!0===(null===(e=OC.getCapabilities().files_sharing)||void 0===e||null===(t=e.sharee)||void 0===t?void 0:t.always_show_unique)}},{key:"allowGroupSharing",get:function(){return!0===OC.appConfig.core.allowGroupSharing}},{key:"maxAutocompleteResults",get:function(){return parseInt(OC.config["sharing.maxAutocompleteResults"],10)||25}},{key:"minSearchStringLength",get:function(){return parseInt(OC.config["sharing.minSearchStringLength"],10)||0}},{key:"passwordPolicy",get:function(){var e=OC.getCapabilities();return e.password_policy?e.password_policy:{}}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),g=r(41922),m=r(25108);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_(t)?t:String(t)}var y=function(){function e(t){var n,r,i,a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,a=void 0,(i=v(i="_share"))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,t.ocs&&t.ocs.data&&t.ocs.data[0]&&(t=t.ocs.data[0]),t.hide_download=!!t.hide_download,t.mail_send=!!t.mail_send,t.attributes)try{t.attributes=JSON.parse(t.attributes)}catch(e){m.warn('Could not parse share attributes returned by server: "'+t.attributes+'"')}t.attributes=null!==(n=t.attributes)&&void 0!==n?n:[],this._share=t}var t,n;return t=e,(n=[{key:"state",get:function(){return this._share}},{key:"id",get:function(){return this._share.id}},{key:"type",get:function(){return this._share.share_type}},{key:"permissions",get:function(){return this._share.permissions},set:function(e){this._share.permissions=e}},{key:"attributes",get:function(){return this._share.attributes}},{key:"owner",get:function(){return this._share.uid_owner}},{key:"ownerDisplayName",get:function(){return this._share.displayname_owner}},{key:"shareWith",get:function(){return this._share.share_with}},{key:"shareWithDisplayName",get:function(){return this._share.share_with_displayname||this._share.share_with}},{key:"shareWithDisplayNameUnique",get:function(){return this._share.share_with_displayname_unique||this._share.share_with}},{key:"shareWithLink",get:function(){return this._share.share_with_link}},{key:"shareWithAvatar",get:function(){return this._share.share_with_avatar}},{key:"uidFileOwner",get:function(){return this._share.uid_file_owner}},{key:"displaynameFileOwner",get:function(){return this._share.displayname_file_owner||this._share.uid_file_owner}},{key:"createdTime",get:function(){return this._share.stime}},{key:"expireDate",get:function(){return this._share.expiration},set:function(e){this._share.expiration=e}},{key:"token",get:function(){return this._share.token}},{key:"note",get:function(){return this._share.note},set:function(e){this._share.note=e}},{key:"label",get:function(){return this._share.label},set:function(e){this._share.label=e}},{key:"mailSend",get:function(){return!0===this._share.mail_send}},{key:"hideDownload",get:function(){return!0===this._share.hide_download},set:function(e){this._share.hide_download=!0===e}},{key:"password",get:function(){return this._share.password},set:function(e){this._share.password=e}},{key:"passwordExpirationTime",get:function(){return this._share.password_expiration_time},set:function(e){this._share.password_expiration_time=e}},{key:"sendPasswordByTalk",get:function(){return this._share.send_password_by_talk},set:function(e){this._share.send_password_by_talk=e}},{key:"path",get:function(){return this._share.path}},{key:"itemType",get:function(){return this._share.item_type}},{key:"mimetype",get:function(){return this._share.mimetype}},{key:"fileSource",get:function(){return this._share.file_source}},{key:"fileTarget",get:function(){return this._share.file_target}},{key:"fileParent",get:function(){return this._share.file_parent}},{key:"hasReadPermission",get:function(){return!!(this.permissions&OC.PERMISSION_READ)}},{key:"hasCreatePermission",get:function(){return!!(this.permissions&OC.PERMISSION_CREATE)}},{key:"hasDeletePermission",get:function(){return!!(this.permissions&OC.PERMISSION_DELETE)}},{key:"hasUpdatePermission",get:function(){return!!(this.permissions&OC.PERMISSION_UPDATE)}},{key:"hasSharePermission",get:function(){return!!(this.permissions&OC.PERMISSION_SHARE)}},{key:"hasDownloadPermission",get:function(){for(var e in this._share.attributes){var t=this._share.attributes[e];if("permissions"===t.scope&&"download"===t.key)return t.enabled}return!0},set:function(e){this.setAttribute("permissions","download",!!e)}},{key:"setAttribute",value:function(e,t,n){var r={scope:e,key:t,enabled:n};for(var i in this._share.attributes){var a=this._share.attributes[i];if(a.scope===r.scope&&a.key===r.key)return void(this._share.attributes[i]=r)}this._share.attributes.push(r)}},{key:"canEdit",get:function(){return!0===this._share.can_edit}},{key:"canDelete",get:function(){return!0===this._share.can_delete}},{key:"viaFileid",get:function(){return this._share.via_fileid}},{key:"viaPath",get:function(){return this._share.via_path}},{key:"parent",get:function(){return this._share.parent}},{key:"storageId",get:function(){return this._share.storage_id}},{key:"storage",get:function(){return this._share.storage}},{key:"itemSource",get:function(){return this._share.item_source}},{key:"status",get:function(){return this._share.status}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),b={data:function(){return{SHARE_TYPES:g.D}}},w=r(64024),S=r(76212),E=r.n(S),C=r(12945),x=r.n(C),k={name:"SharingEntrySimple",components:{NcActions:x()},props:{title:{type:String,default:"",required:!0},subtitle:{type:String,default:""},isUnique:{type:Boolean,default:!0},ariaExpanded:{type:Boolean,default:null}},computed:{ariaExpandedValue:function(){return null===this.ariaExpanded?this.ariaExpanded:this.ariaExpanded?"true":"false"}}},P=r(93379),T=r.n(P),D=r(7795),R=r.n(D),N=r(90569),O=r.n(N),I=r(3565),L=r.n(I),H=r(19216),U=r.n(H),Y=r(44589),M=r.n(Y),j=r(3335),B={};B.styleTagTransform=M(),B.setAttributes=L(),B.insert=O().bind(null,"head"),B.domAPI=R(),B.insertStyleElement=U(),T()(j.Z,B),j.Z&&j.Z.locals&&j.Z.locals;var q=r(51900),W=(0,q.Z)(k,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"sharing-entry"},[e._t("avatar"),e._v(" "),t("div",{staticClass:"sharing-entry__desc"},[t("span",{staticClass:"sharing-entry__title"},[e._v(e._s(e.title))]),e._v(" "),e.subtitle?t("p",[e._v("\n\t\t\t"+e._s(e.subtitle)+"\n\t\t")]):e._e()]),e._v(" "),e.$slots.default?t("NcActions",{ref:"actionsComponent",staticClass:"sharing-entry__actions",attrs:{"menu-align":"right","aria-expanded":e.ariaExpandedValue}},[e._t("default")],2):e._e()],2)}),[],!1,null,"9fd256bc",null).exports,F=r(25108);function Z(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}var $={name:"SharingEntryInternal",components:{NcActionLink:E(),SharingEntrySimple:W},props:{fileInfo:{type:Object,default:function(){},required:!0}},data:function(){return{copied:!1,copySuccess:!1}},computed:{internalLink:function(){return window.location.protocol+"//"+window.location.host+(0,o.generateUrl)("/f/")+this.fileInfo.id},copyLinkTooltip:function(){return this.copied?this.copySuccess?"":t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing","Copy internal link to clipboard")},internalLinkSubtitle:function(){return"dir"===this.fileInfo.type?t("files_sharing","Only works for users with access to this folder"):t("files_sharing","Only works for users with access to this file")}},methods:{copyLink:function(){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n.internalLink);case 3:(0,w.s$)(t("files_sharing","Link copied")),n.$refs.shareEntrySimple.$refs.actionsComponent.$el.focus(),n.copySuccess=!0,n.copied=!0,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),n.copySuccess=!1,n.copied=!0,F.error(e.t0);case 14:return e.prev=14,setTimeout((function(){n.copySuccess=!1,n.copied=!1}),4e3),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,9,14,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){Z(a,r,i,s,o,"next",e)}function o(e){Z(a,r,i,s,o,"throw",e)}s(void 0)}))})()}}},G=$,V=r(66828),Q={};Q.styleTagTransform=M(),Q.setAttributes=L(),Q.insert=O().bind(null,"head"),Q.domAPI=R(),Q.insertStyleElement=U(),T()(V.Z,Q),V.Z&&V.Z.locals&&V.Z.locals;var z=(0,q.Z)(G,(function(){var e=this,t=e._self._c;return t("ul",[t("SharingEntrySimple",{ref:"shareEntrySimple",staticClass:"sharing-entry__internal",attrs:{title:e.t("files_sharing","Internal link"),subtitle:e.internalLinkSubtitle},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("div",{staticClass:"avatar-external icon-external-white"})]},proxy:!0}])},[e._v(" "),t("NcActionLink",{attrs:{href:e.internalLink,"aria-label":e.copyLinkTooltip,title:e.copyLinkTooltip,target:"_blank",icon:e.copied&&e.copySuccess?"icon-checkmark-color":"icon-clippy"},on:{click:function(t){return t.preventDefault(),e.copyLink.apply(null,arguments)}}})],1)],1)}),[],!1,null,"69e43ddc",null),K=z.exports,J=r(45994),X=r(20296),ee=r.n(X),te=r(98266),ne=r.n(te),re={computed:{isOpen:function(){return this.$refs.multiselect.$refs.VueMultiselect.isOpen}},methods:{toggle:function(){this.$refs.multiselect.$refs.VueMultiselect.toggle(),this.resetScroll()},resetScroll:function(){this.$refs.multiselect.$el.querySelector(".multiselect__content-wrapper").scrollTop=0},getSearch:function(){return this.$refs.multiselect.$refs.VueMultiselect.search},resetSearch:function(){this.$refs.multiselect.$refs.VueMultiselect.search=""},select:function(e){this.$refs.multiselect.$refs.VueMultiselect.select(e)}}},ie=r(25108);function ae(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}var se=new f,oe="abcdefgijkmnopqrstwxyzABCDEFGHJKLMNPQRSTWXYZ23456789";function ce(){return le.apply(this,arguments)}function le(){var e;return e=regeneratorRuntime.mark((function e(){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se.passwordPolicy.api||!se.passwordPolicy.api.generate){e.next=14;break}return e.prev=1,e.next=4,u.default.get(se.passwordPolicy.api.generate);case 4:if(!(n=e.sent).data.ocs.data.password){e.next=8;break}return(0,w.s$)(t("files_sharing","Password created successfully")),e.abrupt("return",n.data.ocs.data.password);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),ie.info("Error generating password from password_policy",e.t0),(0,w.x2)(t("files_sharing","Error generating password from password policy"));case 14:for(r=new Uint8Array(10),i=oe.length/255,self.crypto.getRandomValues(r),a="",s=0;s<r.length;s++)a+=oe.charAt(r[s]*i);return e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,null,[[1,10]])})),le=function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){ae(a,r,i,s,o,"next",e)}function o(e){ae(a,r,i,s,o,"throw",e)}s(void 0)}))},le.apply(this,arguments)}r(35449);var ue=r(78595),he=r(25108);function de(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){de(a,r,i,s,o,"next",e)}function o(e){de(a,r,i,s,o,"throw",e)}s(void 0)}))}}var fe=(0,o.generateOcsUrl)("apps/files_sharing/api/v1/shares"),ge={methods:{createShare:function(e){return pe(regeneratorRuntime.mark((function n(){var r,i,a,s,o,c,l,h,d,p,f,g,m,_,A,v,b,w;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.path,i=e.permissions,a=e.shareType,s=e.shareWith,o=e.publicUpload,c=e.password,l=e.sendPasswordByTalk,h=e.expireDate,d=e.label,p=e.attributes,n.prev=1,n.next=4,u.default.post(fe,{path:r,permissions:i,shareType:a,shareWith:s,publicUpload:o,password:c,sendPasswordByTalk:l,expireDate:h,label:d,attributes:p});case 4:if(null!=(g=n.sent)&&null!==(f=g.data)&&void 0!==f&&f.ocs){n.next=7;break}throw g;case 7:return m=new y(g.data.ocs.data),(0,ue.j8)("files_sharing:share:created",{share:m}),n.abrupt("return",m);case 12:throw n.prev=12,n.t0=n.catch(1),he.error("Error while creating share",n.t0),w=null===n.t0||void 0===n.t0||null===(_=n.t0.response)||void 0===_||null===(A=_.data)||void 0===A||null===(v=A.ocs)||void 0===v||null===(b=v.meta)||void 0===b?void 0:b.message,OC.Notification.showTemporary(w?t("files_sharing","Error creating the share: {errorMessage}",{errorMessage:w}):t("files_sharing","Error creating the share"),{type:"error"}),n.t0;case 18:case"end":return n.stop()}}),n,null,[[1,12]])})))()},deleteShare:function(e){return pe(regeneratorRuntime.mark((function n(){var r,i,a,s,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.default.delete(fe+"/".concat(e));case 3:if(null!=(i=n.sent)&&null!==(r=i.data)&&void 0!==r&&r.ocs){n.next=6;break}throw i;case 6:return(0,ue.j8)("files_sharing:share:deleted",{id:e}),n.abrupt("return",!0);case 10:throw n.prev=10,n.t0=n.catch(0),he.error("Error while deleting share",n.t0),l=null===n.t0||void 0===n.t0||null===(a=n.t0.response)||void 0===a||null===(s=a.data)||void 0===s||null===(o=s.ocs)||void 0===o||null===(c=o.meta)||void 0===c?void 0:c.message,OC.Notification.showTemporary(l?t("files_sharing","Error deleting the share: {errorMessage}",{errorMessage:l}):t("files_sharing","Error deleting the share"),{type:"error"}),n.t0;case 16:case"end":return n.stop()}}),n,null,[[0,10]])})))()},updateShare:function(e,n){return pe(regeneratorRuntime.mark((function r(){var i,a,s,o,c,l,h,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u.default.put(fe+"/".concat(e),n);case 3:if(a=r.sent,(0,ue.j8)("files_sharing:share:updated",{id:e}),null!=a&&null!==(i=a.data)&&void 0!==i&&i.ocs){r.next=9;break}throw a;case 9:return r.abrupt("return",a.data.ocs.data);case 10:r.next=18;break;case 12:throw r.prev=12,r.t0=r.catch(0),he.error("Error while updating share",r.t0),400!==r.t0.response.status&&(h=null===r.t0||void 0===r.t0||null===(s=r.t0.response)||void 0===s||null===(o=s.data)||void 0===o||null===(c=o.ocs)||void 0===c||null===(l=c.meta)||void 0===l?void 0:l.message,OC.Notification.showTemporary(h?t("files_sharing","Error updating the share: {errorMessage}",{errorMessage:h}):t("files_sharing","Error updating the share"),{type:"error"})),d=r.t0.response.data.ocs.meta.message,new Error(d);case 18:case"end":return r.stop()}}),r,null,[[0,12]])})))()}}},me=r(25108);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_e(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){be(a,r,i,s,o,"next",e)}function o(e){be(a,r,i,s,o,"throw",e)}s(void 0)}))}}var Se=u.default.CancelToken,Ee=null,Ce={name:"SharingInputRecia",components:{NcMultiselect:ne()},mixins:[b,ge,re],props:{shares:{type:Array,default:function(){return[]},required:!0},linkShares:{type:Array,default:function(){return[]},required:!0},fileInfo:{type:Object,default:function(){},required:!0},reshare:{type:y,default:null},canReshare:{type:Boolean,required:!0},searchType:{type:String,required:!0,validator:function(e){return["all","etab"].includes(e)}},searchEtabs:{type:Array,default:function(){return[]},required:!0}},data:function(){return{config:new f,loading:!1,query:"",recommendations:[],ShareSearch:OCA.Sharing.ShareSearch.state,suggestions:[],value:null}},computed:{externalResults:function(){return this.ShareSearch.results},inputPlaceholder:function(){var e=this.config.isRemoteShareAllowed;return this.canReshare?e?t("files_sharing","Name, email, or Federated Cloud ID …"):t("files_sharing","Name or email …"):t("files_sharing","Resharing is not allowed")},isValidQuery:function(){return this.query&&""!==this.query.trim()&&this.query.length>this.config.minSearchStringLength},options:function(){return this.isValidQuery?this.suggestions:this.recommendations},noResultText:function(){return this.loading?t("files_sharing","Searching …"):t("files_sharing","No elements found.")}},watch:{searchType:function(e,t){this.reset()},searchEtabs:function(e,t){this.asyncFind(this.query)}},mounted:function(){this.getRecommendations()},methods:{asyncFind:function(e){var t=this;return we(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.query=e.trim(),!t.isValidQuery){n.next=10;break}if(t.loading=!0,!("etab"===t.searchType&&t.searchEtabs.filter((function(e){return e})).length>=1)){n.next=8;break}return n.next=6,t.debounceGetReciaSuggestions(e);case 6:n.next=10;break;case 8:return n.next=10,t.debounceGetSuggestions(e);case 10:case"end":return n.stop()}}),n)})))()},getSuggestions:function(e){var t=arguments,n=this;return we(regeneratorRuntime.mark((function r(){var i,a,s,c,l,h,d,p,f,g,m,_,A;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=t.length>1&&void 0!==t[1]&&t[1],n.loading=!0,!0===OC.getCapabilities().files_sharing.sharee.query_lookup_default&&(i=!0),a=[n.SHARE_TYPES.SHARE_TYPE_USER,n.SHARE_TYPES.SHARE_TYPE_GROUP,n.SHARE_TYPES.SHARE_TYPE_REMOTE,n.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP,n.SHARE_TYPES.SHARE_TYPE_CIRCLE,n.SHARE_TYPES.SHARE_TYPE_ROOM,n.SHARE_TYPES.SHARE_TYPE_GUEST,n.SHARE_TYPES.SHARE_TYPE_DECK,n.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH],!0===OC.getCapabilities().files_sharing.public.enabled&&a.push(n.SHARE_TYPES.SHARE_TYPE_EMAIL),Ee&&Ee.cancel("Canceled"),Ee=Se.source(),s=null,r.prev=8,r.next=11,u.default.get((0,o.generateOcsUrl)("apps/files_sharing/api/v1/sharees"),{cancelToken:Ee.token,params:{format:"json",itemType:"dir"===n.fileInfo.type?"folder":"file",search:e,lookup:i,perPage:n.config.maxAutocompleteResults,shareType:a}});case 11:s=r.sent,r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(8),"Canceled"===r.t0.message?me.debug("Cancel fetching suggestions",r.t0):me.error("Error fetching suggestions",r.t0),r.abrupt("return");case 18:c=s.data.ocs.data,l=s.data.ocs.data.exact,c.exact=[],h=Object.values(l).reduce((function(e,t){return e.concat(t)}),[]),d=Object.values(c).reduce((function(e,t){return e.concat(t)}),[]),p=n.filterOutExistingShares(h).map((function(e){return n.formatForMultiselect(e)})).sort((function(e,t){return e.shareType-t.shareType})),f=n.filterOutExistingShares(d).map((function(e){return n.formatForMultiselect(e)})).sort((function(e,t){return e.shareType-t.shareType})),g=[],m=n.externalResults.filter((function(e){return!e.condition||e.condition(n)})),_=p.concat(f).concat(m).concat(g),A=_.reduce((function(e,t){return t.displayName?(e[t.displayName]||(e[t.displayName]=0),e[t.displayName]++,e):e}),{}),n.suggestions=_.map((function(e){return A[e.displayName]>1&&!e.desc?ve(ve({},e),{},{desc:e.shareWithDisplayNameUnique}):e})),n.loading=!1,me.info("suggestions",n.suggestions);case 32:case"end":return r.stop()}}),r,null,[[8,14]])})))()},debounceGetSuggestions:ee()((function(){this.getSuggestions.apply(this,arguments)}),500),getReciaSuggestions:function(e){var t=this;return we(regeneratorRuntime.mark((function n(){var r,i,a,s,c,l,h,d,p,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,Ee&&Ee.cancel("Canceled"),Ee=Se.source(),r=null,n.prev=4,n.next=7,u.default.get((0,o.generateOcsUrl)("apps/files_sharing/api/v1/recia_search"),{cancelToken:Ee.token,params:{format:"json",itemType:"dir"===t.fileInfo.type?"folder":"file",search:e,etabs:t.searchEtabs}});case 7:r=n.sent,n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),"Canceled"===n.t0.message?me.debug("Cancel fetching suggestions",n.t0):me.error("Error fetching suggestions",n.t0),n.abrupt("return");case 14:i=r.data.ocs.data,a=r.data.ocs.data.exact,i.exact=[],s=Object.values(a).reduce((function(e,t){return e.concat(t)}),[]),c=Object.values(i).reduce((function(e,t){return e.concat(t)}),[]),l=t.filterOutExistingShares(s).map((function(e){return t.formatForMultiselect(e)})).sort((function(e,t){return e.shareType-t.shareType})),h=t.filterOutExistingShares(c).map((function(e){return t.formatForMultiselect(e)})).sort((function(e,t){return e.shareType-t.shareType})),d=t.externalResults.filter((function(e){return!e.condition||e.condition(t)})),p=l.concat(h).concat(d),f=p.reduce((function(e,t){return t.displayName?(e[t.displayName]||(e[t.displayName]=0),e[t.displayName]++,e):e}),{}),t.suggestions=p.map((function(e){return f[e.displayName]>1&&!e.desc?ve(ve({},e),{},{desc:e.shareWithDisplayNameUnique}):e})),t.loading=!1;case 26:case"end":return n.stop()}}),n,null,[[4,10]])})))()},debounceGetReciaSuggestions:ee()((function(){this.getReciaSuggestions.apply(this,arguments)}),500),getRecommendations:function(){var e=this;return we(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=null,t.prev=2,t.next=5,u.default.get((0,o.generateOcsUrl)("apps/files_sharing/api/v1/sharees_recommended"),{params:{format:"json",itemType:e.fileInfo.type}});case 5:n=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(2),me.error("Error fetching recommendations",t.t0),t.abrupt("return");case 12:r=e.externalResults.filter((function(t){return!t.condition||t.condition(e)})),i=Object.values(n.data.ocs.data.exact).reduce((function(e,t){return e.concat(t)}),[]),e.recommendations=e.filterOutExistingShares(i).map((function(t){return e.formatForMultiselect(t)})).concat(r),e.loading=!1,me.info("recommendations",e.recommendations);case 17:case"end":return t.stop()}}),t,null,[[2,8]])})))()},filterOutExistingShares:function(e){var t=this;return e.reduce((function(e,n){if("object"!==_e(n))return e;try{if(n.value.shareType===t.SHARE_TYPES.SHARE_TYPE_USER){if(n.value.shareWith===(0,J.ts)().uid)return e;if(t.reshare&&n.value.shareWith===t.reshare.owner)return e}if(n.value.shareType===t.SHARE_TYPES.SHARE_TYPE_EMAIL){if(-1!==t.linkShares.map((function(e){return e.shareWith})).indexOf(n.value.shareWith.trim()))return e}else{var r=t.shares.reduce((function(e,t){return e[t.shareWith]=t.type,e}),{}),i=n.value.shareWith.trim();if(i in r&&r[i]===n.value.shareType)return e}e.push(n)}catch(t){return e}return e}),[])},shareTypeToIcon:function(e){switch(e){case this.SHARE_TYPES.SHARE_TYPE_GUEST:return{icon:"icon-user",iconTitle:t("files_sharing","Guest")};case this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:case this.SHARE_TYPES.SHARE_TYPE_GROUP:return{icon:"icon-group",iconTitle:t("files_sharing","Group")};case this.SHARE_TYPES.SHARE_TYPE_EMAIL:return{icon:"icon-mail",iconTitle:t("files_sharing","Email")};case this.SHARE_TYPES.SHARE_TYPE_CIRCLE:return{icon:"icon-circle",iconTitle:t("files_sharing","Circle")};case this.SHARE_TYPES.SHARE_TYPE_ROOM:return{icon:"icon-room",iconTitle:t("files_sharing","Talk conversation")};case this.SHARE_TYPES.SHARE_TYPE_DECK:return{icon:"icon-deck",iconTitle:t("files_sharing","Deck board")};case this.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH:return{icon:"icon-sciencemesh",iconTitle:t("files_sharing","Science Mesh")};default:return{}}},formatForMultiselect:function(e){var n,r;if(e.value.shareType===this.SHARE_TYPES.SHARE_TYPE_USER&&this.config.shouldAlwaysShowUnique)n=null!==(r=e.shareWithDisplayNameUnique)&&void 0!==r?r:"";else if(e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_REMOTE&&e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP||!e.value.server)if(e.value.shareType===this.SHARE_TYPES.SHARE_TYPE_EMAIL)n=e.value.shareWith;else{var i;n=null!==(i=e.shareWithDescription)&&void 0!==i?i:""}else n=t("files_sharing","on {server}",{server:e.value.server});return ve({id:"".concat(e.value.shareType,"-").concat(e.value.shareWith),shareWith:e.value.shareWith,shareType:e.value.shareType,user:e.uuid||e.value.shareWith,isNoUser:e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_USER,displayName:e.name||e.label,subtitle:n,shareWithDisplayNameUnique:e.shareWithDisplayNameUnique||""},this.shareTypeToIcon(e.value.shareType))},addShare:function(e){var t=this;return we(regeneratorRuntime.mark((function n(){var r,i,a,s,o,c,l,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.value=null,!e.lookup){n.next=6;break}return n.next=4,t.getSuggestions(t.query,!0);case 4:return t.$nextTick((function(){t.$refs.multiselect.$el.querySelector(".multiselect__input").focus()})),n.abrupt("return",!0);case 6:if(!e.handler){n.next=12;break}return n.next=9,e.handler(t);case 9:return r=n.sent,t.$emit("add:share",new y(r)),n.abrupt("return",!0);case 12:if(t.loading=!0,me.debug("Adding a new share from the input for",e),n.prev=14,o=null,!t.config.enforcePasswordForPublicLink||e.shareType!==t.SHARE_TYPES.SHARE_TYPE_EMAIL){n.next=20;break}return n.next=19,ce();case 19:o=n.sent;case 20:return c=(t.fileInfo.path+"/"+t.fileInfo.name).replace("//","/"),n.next=23,t.createShare({path:c,shareType:e.shareType,shareWith:e.shareWith,password:o,permissions:t.fileInfo.sharePermissions&OC.getCapabilities().files_sharing.default_permissions,attributes:JSON.stringify(t.fileInfo.shareAttributes)});case 23:if(l=n.sent,!o){n.next=32;break}return l.newPassword=o,n.next=28,new Promise((function(e){t.$emit("add:share",l,e)}));case 28:n.sent.open=!0,n.next=33;break;case 32:t.$emit("add:share",l);case 33:return null!==(i=t.$refs.multiselect)&&void 0!==i&&null!==(a=i.$refs)&&void 0!==a&&null!==(s=a.VueMultiselect)&&void 0!==s&&s.search&&(t.$refs.multiselect.$refs.VueMultiselect.search=""),n.next=36,t.getRecommendations();case 36:n.next=44;break;case 38:n.prev=38,n.t0=n.catch(14),(u=t.$refs.multiselect.$el.querySelector("input"))&&u.focus(),t.query=e.shareWith,me.error("Error while adding new share",n.t0);case 44:return n.prev=44,t.loading=!1,n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[14,38,44,47]])})))()},reset:function(){this.query="",this.resetSearch(),this.suggestions=[]}}},xe=Ce,ke=r(14802),Pe={};Pe.styleTagTransform=M(),Pe.setAttributes=L(),Pe.insert=O().bind(null,"head"),Pe.domAPI=R(),Pe.insertStyleElement=U(),T()(ke.Z,Pe),ke.Z&&ke.Z.locals&&ke.Z.locals;var Te=(0,q.Z)(xe,(function(){var e=this,t=e._self._c;return t("NcMultiselect",{ref:"multiselect",staticClass:"sharing-input",attrs:{"clear-on-select":!0,disabled:!e.canReshare,"hide-selected":!0,"internal-search":!1,loading:e.loading,options:e.options,placeholder:e.inputPlaceholder,"preselect-first":!0,"preserve-search":!0,searchable:!0,"user-select":!0,"open-direction":"below",label:"displayName","track-by":"id"},on:{"search-change":e.asyncFind,select:e.addShare},scopedSlots:e._u([{key:"noOptions",fn:function(){return[e._v("\n\t\t"+e._s(e.t("files_sharing","No recommendations. Start typing."))+"\n\t")]},proxy:!0},{key:"noResult",fn:function(){return[e._v("\n\t\t"+e._s(e.noResultText)+"\n\t")]},proxy:!0}])},[this.isValidQuery?e._e():t("template",{slot:"beforeList"},[t("li",[t("span",[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Recommendations :"))+"\n\t\t\t")])])])],2)}),[],!1,null,null,null).exports,De=r(25108);function Re(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}var Ne={name:"SharingInputEtab",components:{NcMultiselect:ne()},mixins:[re],data:function(){return{config:new f,loading:!1,query:"",etabs:[],selected:[]}},computed:{inputPlaceholder:function(){return this.config.isRemoteShareAllowed,t("files_sharing","Establishments")},noResultText:function(){return this.loading?t("files_sharing","Searching …"):t("files_sharing","No elements found.")},closeBtnTitle:function(){return t("files_sharing","Close")},selectallBtnTitle:function(){return this.selected.length===this.etabs.length?t("files_sharing","Unselect all"):t("files_sharing","Select all")}},mounted:function(){this.getEtabs()},methods:{getEtabs:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=null,e.prev=2,e.next=5,u.default.get((0,o.generateOcsUrl)("apps/files_sharing/api/v1/recia_list_etabs"),{params:{format:"json"}});case 5:n=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),De.error("Error fetching etabs",e.t0),e.abrupt("return");case 12:t.etabs=n.data.ocs.data.data,t.selected=t.etabs.filter((function(e){return e.selected})),t.selected.length>=1&&t.change(),t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){Re(a,r,i,s,o,"next",e)}function o(e){Re(a,r,i,s,o,"throw",e)}s(void 0)}))})()},change:function(){this.isOpen&&this.toggle(),this.isChanging()},saveQuery:function(e){this.query=e.trim()},highlight:function(e){return null===e?"":this.query.length?e.replace(new RegExp(this.query,"gi"),(function(e){return"<strong>"+e+"</strong>"})):e},searchLabel:function(e){var t;return"".concat(e.name," ").concat(null!==(t=e.uai)&&void 0!==t?t:"")},showLabel:function(e){return"".concat(e.name)},selectAll:function(){this.selected=this.etabs,this.isChanging(),this.toggle()},deselectAll:function(){this.selected=[],this.isChanging(),this.toggle()},isChanging:function(){var e=this.selected.map((function(e){return e.siren}));this.$emit("change",e),this.etabs.sort((function(t,n){return t.selected=e.includes(t.siren),n.selected=e.includes(n.siren),t.selected&&n.selected?t.name.localeCompare(n.name):t.selected||n.selected?t.selected?-1:1:t.name.localeCompare(n.name)}))}}},Oe=Ne,Ie=r(33721),Le={};Le.styleTagTransform=M(),Le.setAttributes=L(),Le.insert=O().bind(null,"head"),Le.domAPI=R(),Le.insertStyleElement=U(),T()(Ie.Z,Le),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;var He=(0,q.Z)(Oe,(function(){var e=this,t=e._self._c;return t("div",[t("NcMultiselect",{ref:"multiselect",staticClass:"sharing-input-etab",attrs:{"track-by":"id",label:"name",limit:3,"custom-label":e.searchLabel,loading:e.loading,options:e.etabs,placeholder:e.inputPlaceholder,multiple:!0,"clear-on-select":!0,"open-direction":"below"},on:{input:e.change,"search-change":e.saveQuery},scopedSlots:e._u([{key:"option",fn:function(n){return[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__name",domProps:{innerHTML:e._s(e.highlight(n.option.name))}}),e._v(" "),t("span",{staticClass:"option__uai",domProps:{innerHTML:e._s(e.highlight(n.option.uai))}})])]}},{key:"noResult",fn:function(){return[e._v("\n\t\t\t"+e._s(e.noResultText)+"\n\t\t")]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(" "),t("template",{slot:"beforeList"},[t("li",[t("div",{staticClass:"option__selectall"},[t("span",{attrs:{id:"btnSelectAll",tabindex:"0",role:"button"},on:{click:e.selectAll}},[e._v(e._s(e.t("files_sharing","Select all")))]),e._v(" "),t("span",{attrs:{id:"btnSelectNone",tabindex:"0",role:"button"},on:{click:e.deselectAll}},[e._v(e._s(e.t("files_sharing","Select none")))])])])]),e._v(" "),t("template",{slot:"afterList"},[t("li",[t("div",{staticClass:"option__close"},[t("span",{attrs:{id:"btnClose",tabindex:"0",role:"button"},on:{click:e.toggle}},[e._v(e._s(e.closeBtnTitle))])])])])],2)],1)}),[],!1,null,null,null).exports,Ue={name:"SharingInputChoice",data:function(){return{config:new f,loading:!1,searchType:"etab"}},methods:{change:function(){this.$emit("change",this.searchType)}}},Ye=(0,q.Z)(Ue,(function(){var e=this,t=e._self._c;return t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchType,expression:"searchType"}],staticClass:"radio",attrs:{id:"search-type-etab",type:"radio",name:"search-type",value:"etab"},domProps:{checked:e._q(e.searchType,"etab")},on:{change:[function(t){e.searchType="etab"},e.change]}}),e._v(" "),t("label",{attrs:{for:"search-type-etab"}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Your establishments"))+"\n\t")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchType,expression:"searchType"}],staticClass:"radio",attrs:{id:"search-type-all",type:"radio",name:"search-type",value:"all"},domProps:{checked:e._q(e.searchType,"all")},on:{change:[function(t){e.searchType="all"},e.change]}}),e._v(" "),t("label",{attrs:{for:"search-type-all"}},[e._v("\n\t\t"+e._s(e.t("files_sharing","All platform"))+"\n\t")])])}),[],!1,null,null,null).exports,Me=r(45400),je=r.n(Me),Be=r(65358),qe=r(1162),We=r.n(qe),Fe=r(25746),Ze=r(25108);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ge(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){Ge(a,r,i,s,o,"next",e)}function o(e){Ge(a,r,i,s,o,"throw",e)}s(void 0)}))}}var Qe={mixins:[ge,b],props:{fileInfo:{type:Object,default:function(){},required:!0},share:{type:y,default:null},isUnique:{type:Boolean,default:!0}},data:function(){var e;return{config:new f,errors:{},loading:!1,saving:!1,open:!1,updateQueue:new Fe.Z({concurrency:1}),reactiveState:null===(e=this.share)||void 0===e?void 0:e.state}},computed:{hasNote:{get:function(){return""!==this.share.note},set:function(e){this.share.note=e?null:""}},dateTomorrow:function(){return new Date((new Date).setDate((new Date).getDate()+1))},lang:function(){var e=window.dayNamesShort?window.dayNamesShort:["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."],t=window.monthNamesShort?window.monthNamesShort:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];return{formatLocale:{firstDayOfWeek:window.firstDay?window.firstDay:0,monthsShort:t,weekdaysMin:e,weekdaysShort:e},monthFormat:"MMM"}},isShareOwner:function(){return this.share&&this.share.owner===(0,J.ts)().uid}},methods:{checkShare:function(e){return(!e.password||"string"==typeof e.password&&""!==e.password.trim())&&!(e.expirationDate&&!e.expirationDate.isValid())},parseDateString:function(e){var t;if(e)return new Date(null===(t=e.match(/([0-9]{4}-[0-9]{2}-[0-9]{2})/i))||void 0===t?void 0:t.pop())},formatDateToString:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())).toISOString().split("T")[0]},onExpirationChange:function(e){this.share.expireDate=this.formatDateToString(e),this.queueUpdate("expireDate")},onExpirationDisable:function(){this.share.expireDate="",this.queueUpdate("expireDate")},onNoteChange:function(e){this.$set(this.share,"newNote",e.trim())},onNoteSubmit:function(){this.share.newNote&&(this.share.note=this.share.newNote,this.$delete(this.share,"newNote"),this.queueUpdate("note"))},onDelete:function(){var e=this;return Ve(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,e.open=!1,n.next=5,e.deleteShare(e.share.id);case 5:Ze.debug("Share deleted",e.share.id),r="file"===e.share.itemType?t("files_sharing",'File "{path}" has been unshared',{path:e.share.path}):t("files_sharing",'Folder "{path}" has been unshared',{path:e.share.path}),(0,w.s$)(r),e.$emit("remove:share",e.share),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),e.open=!0;case 14:return n.prev=14,e.loading=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))()},queueUpdate:function(){for(var e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(0!==r.length){if(this.share.id){var a={};return r.forEach((function(t){"object"===$e(e.share[t])?a[t]=JSON.stringify(e.share[t]):a[t]=e.share[t].toString()})),void this.updateQueue.add(Ve(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.saving=!0,e.errors={},n.prev=2,n.next=5,e.updateShare(e.share.id,a);case 5:i=n.sent,r.indexOf("password")>=0&&(e.$delete(e.share,"newPassword"),e.share.passwordExpirationTime=i.password_expiration_time),e.$delete(e.errors,r[0]),(0,w.s$)(t("files_sharing","Share {propertyName} saved",{propertyName:r[0]})),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),(s=n.t0.message)&&""!==s&&(e.onSyncError(r[0],s),(0,w.x2)(t("files_sharing",s)));case 15:return n.prev=15,e.saving=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,11,15,18]])}))))}Ze.debug("Updated local share",this.share)}},onSyncError:function(e,t){switch(this.open=!0,e){case"password":case"pending":case"expireDate":case"label":case"note":this.$set(this.errors,e,t);var n=this.$refs[e];if(n){n.$el&&(n=n.$el);var r=n.querySelector(".focusable");r&&r.focus()}break;case"sendPasswordByTalk":this.$set(this.errors,e,t),this.share.sendPasswordByTalk=!this.share.sendPasswordByTalk}},debounceQueueUpdate:ee()((function(e){this.queueUpdate(e)}),500)}},ze={name:"SharingEntryInherited",components:{NcActionButton:je(),NcActionLink:E(),NcActionText:We(),NcAvatar:l(),SharingEntrySimple:W},mixins:[Qe],props:{share:{type:y,required:!0}},computed:{viaFileTargetUrl:function(){return(0,o.generateUrl)("/f/{fileid}",{fileid:this.share.viaFileid})},viaFolderName:function(){return(0,Be.EZ)(this.share.viaPath)}}},Ke=r(24147),Je={};Je.styleTagTransform=M(),Je.setAttributes=L(),Je.insert=O().bind(null,"head"),Je.domAPI=R(),Je.insertStyleElement=U(),T()(Ke.Z,Je),Ke.Z&&Ke.Z.locals&&Ke.Z.locals;var Xe=(0,q.Z)(ze,(function(){var e=this,t=e._self._c;return t("SharingEntrySimple",{key:e.share.id,staticClass:"sharing-entry__inherited",attrs:{title:e.share.shareWithDisplayName},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{user:e.share.shareWith,"display-name":e.share.shareWithDisplayName}})]},proxy:!0}])},[e._v(" "),t("NcActionText",{attrs:{icon:"icon-user"}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Added by {initiator}",{initiator:e.share.ownerDisplayName}))+"\n\t")]),e._v(" "),e.share.viaPath&&e.share.viaFileid?t("NcActionLink",{attrs:{icon:"icon-folder",href:e.viaFileTargetUrl}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Via “{folder}”",{folder:e.viaFolderName}))+"\n\t")]):e._e(),e._v(" "),e.share.canDelete?t("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}}},[e._v("\n\t\t"+e._s(e.t("files_sharing","Unshare"))+"\n\t")]):e._e()],1)}),[],!1,null,"23251e4a",null),et=Xe.exports,tt=r(25108);function nt(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}var rt={name:"SharingInherited",components:{NcActionButton:je(),SharingEntryInherited:et,SharingEntrySimple:W},props:{fileInfo:{type:Object,default:function(){},required:!0}},data:function(){return{loaded:!1,loading:!1,showInheritedShares:!1,shares:[]}},computed:{showInheritedSharesIcon:function(){return this.loading?"icon-loading-small":this.showInheritedShares?"icon-triangle-n":"icon-triangle-s"},mainTitle:function(){return t("files_sharing","Others with access")},subTitle:function(){return this.showInheritedShares&&0===this.shares.length?t("files_sharing","No other users with access found"):""},toggleTooltip:function(){return"dir"===this.fileInfo.type?t("files_sharing","Toggle list of others with access to this directory"):t("files_sharing","Toggle list of others with access to this file")},fullPath:function(){return"".concat(this.fileInfo.path,"/").concat(this.fileInfo.name).replace("//","/")}},watch:{fileInfo:function(){this.resetState()}},methods:{toggleInheritedShares:function(){this.showInheritedShares=!this.showInheritedShares,this.showInheritedShares?this.fetchInheritedShares():this.resetState()},fetchInheritedShares:function(){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,e.prev=1,r=(0,o.generateOcsUrl)("apps/files_sharing/api/v1/shares/inherited?format=json&path={path}",{path:n.fullPath}),e.next=5,u.default.get(r);case 5:i=e.sent,n.shares=i.data.ocs.data.map((function(e){return new y(e)})).sort((function(e,t){return t.createdTime-e.createdTime})),tt.info(n.shares),n.loaded=!0,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),OC.Notification.showTemporary(t("files_sharing","Unable to fetch inherited shares"),{type:"error"});case 14:return e.prev=14,n.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){nt(a,r,i,s,o,"next",e)}function o(e){nt(a,r,i,s,o,"throw",e)}s(void 0)}))})()},resetState:function(){this.loaded=!1,this.loading=!1,this.showInheritedShares=!1,this.shares=[]},removeShare:function(e){var t=this.shares.findIndex((function(t){return t===e}));this.shares.splice(t,1)}}},it=rt,at=r(16843),st={};st.styleTagTransform=M(),st.setAttributes=L(),st.insert=O().bind(null,"head"),st.domAPI=R(),st.insertStyleElement=U(),T()(at.Z,st),at.Z&&at.Z.locals&&at.Z.locals;var ot=(0,q.Z)(it,(function(){var e=this,t=e._self._c;return t("ul",{attrs:{id:"sharing-inherited-shares"}},[t("SharingEntrySimple",{staticClass:"sharing-entry__inherited",attrs:{title:e.mainTitle,subtitle:e.subTitle,"aria-expanded":e.showInheritedShares},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("div",{staticClass:"avatar-shared icon-more-white"})]},proxy:!0}])},[e._v(" "),t("NcActionButton",{attrs:{icon:e.showInheritedSharesIcon,"aria-label":e.toggleTooltip,title:e.toggleTooltip},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleInheritedShares.apply(null,arguments)}}})],1),e._v(" "),e._l(e.shares,(function(n){return t("SharingEntryInherited",{key:n.id,attrs:{"file-info":e.fileInfo,share:n},on:{"remove:share":e.removeShare}})}))],2)}),[],!1,null,"3462b966",null),ct=ot.exports,lt=r(81807),ut=r.n(lt),ht=r(79570),dt=r.n(ht),pt=r(875),ft=r.n(pt),gt=r(18074),mt=r.n(gt),_t={name:"ExternalShareAction",props:{id:{type:String,required:!0},action:{type:Object,default:function(){return{}}},fileInfo:{type:Object,default:function(){},required:!0},share:{type:y,default:null}},computed:{data:function(){return this.action.data(this)}}},At=(0,q.Z)(_t,(function(){var e=this;return(0,e._self._c)(e.data.is,e._g(e._b({tag:"Component"},"Component",e.data,!1),e.action.handlers),[e._v("\n\t"+e._s(e.data.text)+"\n")])}),[],!1,null,null,null).exports,vt=r(30158),yt=r.n(vt),bt={NONE:0,READ:1,UPDATE:2,CREATE:4,DELETE:8,SHARE:16},wt={READ_ONLY:bt.READ,UPLOAD_AND_UPDATE:bt.READ|bt.UPDATE|bt.CREATE|bt.DELETE,FILE_DROP:bt.CREATE,ALL:bt.UPDATE|bt.CREATE|bt.READ|bt.DELETE|bt.SHARE};function St(e,t){return e!==bt.NONE&&(e&t)===t}function Et(e){return!(!St(e,bt.READ)&&!St(e,bt.CREATE)||!St(e,bt.READ)&&(St(e,bt.UPDATE)||St(e,bt.DELETE)))}function Ct(e,t){return St(e,t)?function(e,t){return e&~t}(e,t):function(e,t){return e|t}(e,t)}var xt=r(55976),kt=r(32964),Pt={name:"SharePermissionsEditor",components:{NcActionButton:je(),NcActionCheckbox:ut(),NcActionRadio:yt(),Tune:xt.Z,ChevronLeft:kt.default},mixins:[Qe],data:function(){return{randomFormName:Math.random().toString(27).substring(2),showCustomPermissionsForm:!1,atomicPermissions:bt,bundledPermissions:wt}},computed:{sharePermissionsSummary:function(){var e=this;return Object.values(this.atomicPermissions).filter((function(t){return e.shareHasPermissions(t)})).map((function(t){switch(t){case e.atomicPermissions.CREATE:return e.t("files_sharing","Upload");case e.atomicPermissions.READ:return e.t("files_sharing","Read");case e.atomicPermissions.UPDATE:return e.t("files_sharing","Edit");case e.atomicPermissions.DELETE:return e.t("files_sharing","Delete");default:return null}})).filter((function(e){return null!==e})).join(", ")},sharePermissionsIsBundle:function(){var e=this;return Object.values(wt).map((function(t){return e.sharePermissionEqual(t)})).filter((function(e){return e})).length>0},sharePermissionsSetIsValid:function(){return Et(this.share.permissions)},isFolder:function(){return"dir"===this.fileInfo.type},fileHasCreatePermission:function(){return!!(this.fileInfo.permissions&bt.CREATE)}},mounted:function(){this.showCustomPermissionsForm=!this.sharePermissionsIsBundle},methods:{sharePermissionEqual:function(e){return(this.share.permissions&~bt.SHARE)===e},shareHasPermissions:function(e){return St(this.share.permissions,e)},setSharePermissions:function(e){this.share.permissions=e,this.queueUpdate("permissions")},canToggleSharePermissions:function(e){return function(e,t){return Et(Ct(e,t))}(this.share.permissions,e)},toggleSharePermissions:function(e){this.share.permissions=Ct(this.share.permissions,e),Et(this.share.permissions)&&this.queueUpdate("permissions")}}},Tt=r(73286),Dt={};Dt.styleTagTransform=M(),Dt.setAttributes=L(),Dt.insert=O().bind(null,"head"),Dt.domAPI=R(),Dt.insertStyleElement=U(),T()(Tt.Z,Dt),Tt.Z&&Tt.Z.locals&&Tt.Z.locals;var Rt=(0,q.Z)(Pt,(function(){var e=this,t=e._self._c;return t("li",[t("ul",[e.isFolder?e._e():t("NcActionCheckbox",{attrs:{checked:e.shareHasPermissions(e.atomicPermissions.UPDATE),disabled:e.saving},on:{"update:checked":function(t){return e.toggleSharePermissions(e.atomicPermissions.UPDATE)}}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Allow editing"))+"\n\t\t")]),e._v(" "),e.isFolder&&e.fileHasCreatePermission&&e.config.isPublicUploadEnabled?[e.showCustomPermissionsForm?t("span",{class:{error:!e.sharePermissionsSetIsValid}},[t("NcActionCheckbox",{attrs:{checked:e.shareHasPermissions(e.atomicPermissions.READ),disabled:e.saving||!e.canToggleSharePermissions(e.atomicPermissions.READ)},on:{"update:checked":function(t){return e.toggleSharePermissions(e.atomicPermissions.READ)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Read"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionCheckbox",{attrs:{checked:e.shareHasPermissions(e.atomicPermissions.CREATE),disabled:e.saving||!e.canToggleSharePermissions(e.atomicPermissions.CREATE)},on:{"update:checked":function(t){return e.toggleSharePermissions(e.atomicPermissions.CREATE)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Upload"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionCheckbox",{attrs:{checked:e.shareHasPermissions(e.atomicPermissions.UPDATE),disabled:e.saving||!e.canToggleSharePermissions(e.atomicPermissions.UPDATE)},on:{"update:checked":function(t){return e.toggleSharePermissions(e.atomicPermissions.UPDATE)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Edit"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionCheckbox",{attrs:{checked:e.shareHasPermissions(e.atomicPermissions.DELETE),disabled:e.saving||!e.canToggleSharePermissions(e.atomicPermissions.DELETE)},on:{"update:checked":function(t){return e.toggleSharePermissions(e.atomicPermissions.DELETE)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Delete"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionButton",{on:{click:function(t){e.showCustomPermissionsForm=!1}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("ChevronLeft")]},proxy:!0}],null,!1,1018742195)},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Bundled permissions"))+"\n\t\t\t\t")])],1):[t("NcActionRadio",{attrs:{checked:e.sharePermissionEqual(e.bundledPermissions.READ_ONLY),value:e.bundledPermissions.READ_ONLY,name:e.randomFormName,disabled:e.saving},on:{change:function(t){return e.setSharePermissions(e.bundledPermissions.READ_ONLY)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Read only"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionRadio",{attrs:{checked:e.sharePermissionEqual(e.bundledPermissions.UPLOAD_AND_UPDATE),value:e.bundledPermissions.UPLOAD_AND_UPDATE,disabled:e.saving,name:e.randomFormName},on:{change:function(t){return e.setSharePermissions(e.bundledPermissions.UPLOAD_AND_UPDATE)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Allow upload and editing"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionRadio",{staticClass:"sharing-entry__action--public-upload",attrs:{checked:e.sharePermissionEqual(e.bundledPermissions.FILE_DROP),value:e.bundledPermissions.FILE_DROP,disabled:e.saving,name:e.randomFormName},on:{change:function(t){return e.setSharePermissions(e.bundledPermissions.FILE_DROP)}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","File drop (upload only)"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionButton",{attrs:{title:e.t("files_sharing","Custom permissions")},on:{click:function(t){e.showCustomPermissionsForm=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Tune")]},proxy:!0}],null,!1,961531849)},[e._v("\n\t\t\t\t\t"+e._s(e.sharePermissionsIsBundle?"":e.sharePermissionsSummary)+"\n\t\t\t\t")])]]:e._e()],2)])}),[],!1,null,"5e957d09",null).exports,Nt=r(25108);function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function It(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function Lt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){It(a,r,i,s,o,"next",e)}function o(e){It(a,r,i,s,o,"throw",e)}s(void 0)}))}}var Ht={name:"SharingEntryLink",components:{NcActions:x(),NcActionButton:je(),NcActionCheckbox:ut(),NcActionInput:dt(),NcActionLink:E(),NcActionText:We(),NcActionTextEditable:mt(),NcActionSeparator:ft(),NcAvatar:l(),ExternalShareAction:At,SharePermissionsEditor:Rt},mixins:[Qe],props:{canReshare:{type:Boolean,default:!0},index:{type:Number,default:null}},data:function(){return{copySuccess:!0,copied:!1,pending:!1,ExternalLegacyLinkActions:OCA.Sharing.ExternalLinkActions.state,ExternalShareActions:OCA.Sharing.ExternalShareActions.state}},computed:{title:function(){if(this.share&&this.share.id){if(!this.isShareOwner&&this.share.ownerDisplayName)return this.isEmailShareType?t("files_sharing","{shareWith} by {initiator}",{shareWith:this.share.shareWith,initiator:this.share.ownerDisplayName}):t("files_sharing","Shared via link by {initiator}",{initiator:this.share.ownerDisplayName});if(this.share.label&&""!==this.share.label.trim())return this.isEmailShareType?t("files_sharing","Mail share ({label})",{label:this.share.label.trim()}):t("files_sharing","Share link ({label})",{label:this.share.label.trim()});if(this.isEmailShareType)return this.share.shareWith}return this.index>1?t("files_sharing","Share link ({index})",{index:this.index}):t("files_sharing","Share link")},subtitle:function(){return this.isEmailShareType&&this.title!==this.share.shareWith?this.share.shareWith:null},hasExpirationDate:{get:function(){return this.config.isDefaultExpireDateEnforced||!!this.share.expireDate},set:function(e){var t=this.config.defaultExpirationDate||new Date((new Date).setDate((new Date).getDate()+1));this.share.expireDate=e?this.formatDateToString(t):"",Nt.debug("Expiration date status",e,this.share.expireDate)}},dateMaxEnforced:function(){return this.config.isDefaultExpireDateEnforced?new Date((new Date).setDate((new Date).getDate()+this.config.defaultExpireDate)):null},isPasswordProtected:{get:function(){return this.config.enforcePasswordForPublicLink||!!this.share.password},set:function(e){var t=this;return Lt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=i.ZP,n.t1=t.share,!e){n.next=8;break}return n.next=5,ce();case 5:n.t2=n.sent,n.next=9;break;case 8:n.t2="";case 9:n.t3=n.t2,n.t0.set.call(n.t0,n.t1,"password",n.t3),i.ZP.set(t.share,"newPassword",t.share.password);case 12:case"end":return n.stop()}}),n)})))()}},passwordExpirationTime:function(){if(null===this.share.passwordExpirationTime)return null;var e=moment(this.share.passwordExpirationTime);return!(e.diff(moment())<0)&&e.fromNow()},isTalkEnabled:function(){return void 0!==OC.appswebroots.spreed},isPasswordProtectedByTalkAvailable:function(){return this.isPasswordProtected&&this.isTalkEnabled},isPasswordProtectedByTalk:{get:function(){return this.share.sendPasswordByTalk},set:function(e){var t=this;return Lt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.share.sendPasswordByTalk=e;case 1:case"end":return n.stop()}}),n)})))()}},isEmailShareType:function(){return!!this.share&&this.share.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL},canTogglePasswordProtectedByTalkAvailable:function(){return!(!this.isPasswordProtected||this.isEmailShareType&&!this.hasUnsavedPassword)},pendingPassword:function(){return this.config.enableLinkPasswordByDefault&&this.share&&!this.share.id},pendingEnforcedPassword:function(){return this.config.enforcePasswordForPublicLink&&this.share&&!this.share.id},pendingExpirationDate:function(){return this.config.isDefaultExpireDateEnforced&&this.share&&!this.share.id},hasUnsavedPassword:function(){return void 0!==this.share.newPassword},shareLink:function(){return window.location.protocol+"//"+window.location.host+(0,o.generateUrl)("/s/")+this.share.token},actionsTooltip:function(){return t("files_sharing",'Actions for "{title}"',{title:this.title})},copyLinkTooltip:function(){return this.copied?this.copySuccess?"":t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing",'Copy public link of "{title}" to clipboard',{title:this.title})},externalLegacyLinkActions:function(){return this.ExternalLegacyLinkActions.actions},externalLinkActions:function(){return this.ExternalShareActions.actions.filter((function(e){return e.shareType.includes(g.D.SHARE_TYPE_LINK)||e.shareType.includes(g.D.SHARE_TYPE_EMAIL)}))},isPasswordPolicyEnabled:function(){return"object"===Ot(this.config.passwordPolicy)},canChangeHideDownload:function(){return this.fileInfo.shareAttributes.some((function(e){return"download"===e.key&&"permissions"===e.scope&&!1===e.enabled}))}},methods:{onNewLinkShare:function(){var e=this;return Lt(regeneratorRuntime.mark((function n(){var r,i,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.loading){n.next=2;break}return n.abrupt("return");case 2:if(r={share_type:g.D.SHARE_TYPE_LINK},e.config.isDefaultExpireDateEnforced&&(r.expiration=e.formatDateToString(e.config.defaultExpirationDate)),!(e.config.enableLinkPasswordByDefault||e.config.enforcePasswordForPublicLink||e.config.isDefaultExpireDateEnforced)){n.next=37;break}if(e.pending=!0,!e.share||e.share.id){n.next=24;break}if(!e.checkShare(e.share)){n.next=21;break}return n.prev=8,n.next=11,e.pushNewLinkShare(e.share,!0);case 11:n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(8),e.pending=!1,Nt.error(n.t0),n.abrupt("return",!1);case 18:return n.abrupt("return",!0);case 21:return e.open=!0,OC.Notification.showTemporary(t("files_sharing","Error, please enter proper password and/or expiration date")),n.abrupt("return",!1);case 24:if(!e.config.enableLinkPasswordByDefault&&!e.config.enforcePasswordForPublicLink){n.next=28;break}return n.next=27,ce();case 27:r.password=n.sent;case 28:return i=new y(r),n.next=31,new Promise((function(t){e.$emit("add:share",i,t)}));case 31:a=n.sent,e.open=!1,e.pending=!1,a.open=!0,n.next=40;break;case 37:return s=new y(r),n.next=40,e.pushNewLinkShare(s);case 40:case"end":return n.stop()}}),n,null,[[8,13]])})))()},pushNewLinkShare:function(e,n){var r=this;return Lt(regeneratorRuntime.mark((function i(){var a,s,o,c,l,u,h,d,p;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!r.loading){i.next=3;break}return i.abrupt("return",!0);case 3:return r.loading=!0,r.errors={},a=(r.fileInfo.path+"/"+r.fileInfo.name).replace("//","/"),s={path:a,shareType:g.D.SHARE_TYPE_LINK,password:e.password,expireDate:e.expireDate,attributes:JSON.stringify(r.fileInfo.shareAttributes)},Nt.debug("Creating link share with options",s),i.next=10,r.createShare(s);case 10:if(o=i.sent,r.open=!1,Nt.debug("Link share created",o),!n){i.next=19;break}return i.next=16,new Promise((function(e){r.$emit("update:share",o,e)}));case 16:c=i.sent,i.next=22;break;case 19:return i.next=21,new Promise((function(e){r.$emit("add:share",o,e)}));case 21:c=i.sent;case 22:r.config.enforcePasswordForPublicLink||c.copyLink(),(0,w.s$)(t("files_sharing","Link share created")),i.next=35;break;case 26:if(i.prev=26,i.t0=i.catch(0),p=null===i.t0||void 0===i.t0||null===(l=i.t0.response)||void 0===l||null===(u=l.data)||void 0===u||null===(h=u.ocs)||void 0===h||null===(d=h.meta)||void 0===d?void 0:d.message){i.next=33;break}return(0,w.x2)(t("files_sharing","Error while creating the share")),Nt.error(i.t0),i.abrupt("return");case 33:throw p.match(/password/i)?r.onSyncError("password",p):p.match(/date/i)?r.onSyncError("expireDate",p):r.onSyncError("pending",p),i.t0;case 35:return i.prev=35,r.loading=!1,i.finish(35);case 38:case"end":return i.stop()}}),i,null,[[0,26,35,38]])})))()},onLabelChange:function(e){this.$set(this.share,"newLabel",e.trim())},onLabelSubmit:function(){"string"==typeof this.share.newLabel&&(this.share.label=this.share.newLabel,this.$delete(this.share,"newLabel"),this.queueUpdate("label"))},copyLink:function(){var e=this;return Lt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.clipboard.writeText(e.shareLink);case 3:(0,w.s$)(t("files_sharing","Link copied")),e.$refs.copyButton.$el.focus(),e.copySuccess=!0,e.copied=!0,n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),e.copySuccess=!1,e.copied=!0,Nt.error(n.t0);case 14:return n.prev=14,setTimeout((function(){e.copySuccess=!1,e.copied=!1}),4e3),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,9,14,17]])})))()},onPasswordChange:function(e){this.$set(this.share,"newPassword",e)},onPasswordDisable:function(){this.share.password="",this.$delete(this.share,"newPassword"),this.share.id&&this.queueUpdate("password")},onPasswordSubmit:function(){this.hasUnsavedPassword&&(this.share.password=this.share.newPassword.trim(),this.queueUpdate("password"))},onPasswordProtectedByTalkChange:function(){this.hasUnsavedPassword&&(this.share.password=this.share.newPassword.trim()),this.queueUpdate("sendPasswordByTalk","password")},onMenuClose:function(){this.onPasswordSubmit(),this.onNoteSubmit()},onCancel:function(){this.$emit("remove:share",this.share)}}},Ut=Ht,Yt=r(80055),Mt={};Mt.styleTagTransform=M(),Mt.setAttributes=L(),Mt.insert=O().bind(null,"head"),Mt.domAPI=R(),Mt.insertStyleElement=U(),T()(Yt.Z,Mt),Yt.Z&&Yt.Z.locals&&Yt.Z.locals;var jt=(0,q.Z)(Ut,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"sharing-entry sharing-entry__link",class:{"sharing-entry--share":e.share}},[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":!0,"icon-class":e.isEmailShareType?"avatar-link-share icon-mail-white":"avatar-link-share icon-public-white"}}),e._v(" "),t("div",{staticClass:"sharing-entry__desc"},[t("span",{staticClass:"sharing-entry__title",attrs:{title:e.title}},[e._v("\n\t\t\t"+e._s(e.title)+"\n\t\t")]),e._v(" "),e.subtitle?t("p",[e._v("\n\t\t\t"+e._s(e.subtitle)+"\n\t\t")]):e._e()]),e._v(" "),e.share&&!e.isEmailShareType&&e.share.token?t("NcActions",{ref:"copyButton",staticClass:"sharing-entry__copy"},[t("NcActionLink",{attrs:{href:e.shareLink,target:"_blank",title:e.copyLinkTooltip,"aria-label":e.copyLinkTooltip,icon:e.copied&&e.copySuccess?"icon-checkmark-color":"icon-clippy"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyLink.apply(null,arguments)}}})],1):e._e(),e._v(" "),!e.pending&&(e.pendingPassword||e.pendingEnforcedPassword||e.pendingExpirationDate)?t("NcActions",{staticClass:"sharing-entry__actions",attrs:{"aria-label":e.actionsTooltip,"menu-align":"right",open:e.open},on:{"update:open":function(t){e.open=t},close:e.onNewLinkShare}},[e.errors.pending?t("NcActionText",{class:{error:e.errors.pending},attrs:{icon:"icon-error"}},[e._v("\n\t\t\t"+e._s(e.errors.pending)+"\n\t\t")]):t("NcActionText",{attrs:{icon:"icon-info"}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Please enter the following required information before creating the share"))+"\n\t\t")]),e._v(" "),e.pendingEnforcedPassword?t("NcActionText",{attrs:{icon:"icon-password"}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Password protection (enforced)"))+"\n\t\t")]):e.pendingPassword?t("NcActionCheckbox",{staticClass:"share-link-password-checkbox",attrs:{checked:e.isPasswordProtected,disabled:e.config.enforcePasswordForPublicLink||e.saving},on:{"update:checked":function(t){e.isPasswordProtected=t},uncheck:e.onPasswordDisable}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Password protection"))+"\n\t\t")]):e._e(),e._v(" "),e.pendingEnforcedPassword||e.share.password?t("NcActionInput",{staticClass:"share-link-password",attrs:{value:e.share.password,disabled:e.saving,required:e.config.enableLinkPasswordByDefault||e.config.enforcePasswordForPublicLink,minlength:e.isPasswordPolicyEnabled&&e.config.passwordPolicy.minLength,icon:"",autocomplete:"new-password"},on:{"update:value":function(t){return e.$set(e.share,"password",t)},submit:e.onNewLinkShare}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Enter a password"))+"\n\t\t")]):e._e(),e._v(" "),e.pendingExpirationDate?t("NcActionText",{attrs:{icon:"icon-calendar-dark"}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Expiration date (enforced)"))+"\n\t\t")]):e._e(),e._v(" "),e.pendingExpirationDate?t("NcActionInput",{staticClass:"share-link-expire-date",attrs:{disabled:e.saving,"is-native-picker":!0,"hide-label":!0,value:new Date(e.share.expireDate),type:"date",min:e.dateTomorrow,max:e.dateMaxEnforced},on:{input:e.onExpirationChange}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Enter a date"))+"\n\t\t")]):e._e(),e._v(" "),t("NcActionButton",{attrs:{icon:"icon-checkmark"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onNewLinkShare.apply(null,arguments)}}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Create share"))+"\n\t\t")]),e._v(" "),t("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onCancel.apply(null,arguments)}}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Cancel"))+"\n\t\t")])],1):e.loading?t("div",{staticClass:"icon-loading-small sharing-entry__loading"}):t("NcActions",{staticClass:"sharing-entry__actions",attrs:{"aria-label":e.actionsTooltip,"menu-align":"right",open:e.open},on:{"update:open":function(t){e.open=t},close:e.onMenuClose}},[e.share?[e.share.canEdit&&e.canReshare?[t("NcActionInput",{ref:"label",class:{error:e.errors.label},attrs:{disabled:e.saving,label:e.t("files_sharing","Share label"),value:void 0!==e.share.newLabel?e.share.newLabel:e.share.label,icon:"icon-edit",maxlength:"255"},on:{"update:value":e.onLabelChange,submit:e.onLabelSubmit}}),e._v(" "),t("SharePermissionsEditor",{attrs:{"can-reshare":e.canReshare,share:e.share,"file-info":e.fileInfo},on:{"update:share":function(t){e.share=t}}}),e._v(" "),t("NcActionSeparator"),e._v(" "),t("NcActionCheckbox",{attrs:{checked:e.share.hideDownload,disabled:e.saving||e.canChangeHideDownload},on:{"update:checked":function(t){return e.$set(e.share,"hideDownload",t)},change:function(t){return e.queueUpdate("hideDownload")}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Hide download"))+"\n\t\t\t\t")]),e._v(" "),t("NcActionCheckbox",{staticClass:"share-link-password-checkbox",attrs:{checked:e.isPasswordProtected,disabled:e.config.enforcePasswordForPublicLink||e.saving},on:{"update:checked":function(t){e.isPasswordProtected=t},uncheck:e.onPasswordDisable}},[e._v("\n\t\t\t\t\t"+e._s(e.config.enforcePasswordForPublicLink?e.t("files_sharing","Password protection (enforced)"):e.t("files_sharing","Password protect"))+"\n\t\t\t\t")]),e._v(" "),e.isPasswordProtected?t("NcActionInput",{ref:"password",staticClass:"share-link-password",class:{error:e.errors.password},attrs:{disabled:e.saving,"show-trailing-button":e.hasUnsavedPassword,required:e.config.enforcePasswordForPublicLink,value:e.hasUnsavedPassword?e.share.newPassword:"***************",icon:"icon-password",autocomplete:"new-password",type:e.hasUnsavedPassword?"text":"password"},on:{"update:value":e.onPasswordChange,submit:e.onPasswordSubmit}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Enter a password"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e.isEmailShareType&&e.passwordExpirationTime?t("NcActionText",{attrs:{icon:"icon-info"}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Password expires {passwordExpirationTime}",{passwordExpirationTime:e.passwordExpirationTime}))+"\n\t\t\t\t")]):e.isEmailShareType&&null!==e.passwordExpirationTime?t("NcActionText",{attrs:{icon:"icon-error"}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Password expired"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e.isPasswordProtectedByTalkAvailable?t("NcActionCheckbox",{staticClass:"share-link-password-talk-checkbox",attrs:{checked:e.isPasswordProtectedByTalk,disabled:!e.canTogglePasswordProtectedByTalkAvailable||e.saving},on:{"update:checked":function(t){e.isPasswordProtectedByTalk=t},change:e.onPasswordProtectedByTalkChange}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Video verification"))+"\n\t\t\t\t")]):e._e(),e._v(" "),t("NcActionCheckbox",{staticClass:"share-link-expire-date-checkbox",attrs:{checked:e.hasExpirationDate,disabled:e.config.isDefaultExpireDateEnforced||e.saving},on:{"update:checked":function(t){e.hasExpirationDate=t},uncheck:e.onExpirationDisable}},[e._v("\n\t\t\t\t\t"+e._s(e.config.isDefaultExpireDateEnforced?e.t("files_sharing","Expiration date (enforced)"):e.t("files_sharing","Set expiration date"))+"\n\t\t\t\t")]),e._v(" "),e.hasExpirationDate?t("NcActionInput",{ref:"expireDate",staticClass:"share-link-expire-date",class:{error:e.errors.expireDate},attrs:{"is-native-picker":!0,"hide-label":!0,disabled:e.saving,value:new Date(e.share.expireDate),type:"date",min:e.dateTomorrow,max:e.dateMaxEnforced},on:{input:e.onExpirationChange}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Enter a date"))+"\n\t\t\t\t")]):e._e(),e._v(" "),t("NcActionCheckbox",{attrs:{checked:e.hasNote,disabled:e.saving},on:{"update:checked":function(t){e.hasNote=t},uncheck:function(t){return e.queueUpdate("note")}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Note to recipient"))+"\n\t\t\t\t")]),e._v(" "),e.hasNote?t("NcActionTextEditable",{ref:"note",class:{error:e.errors.note},attrs:{disabled:e.saving,placeholder:e.t("files_sharing","Enter a note for the share recipient"),value:e.share.newNote||e.share.note,icon:"icon-edit"},on:{"update:value":e.onNoteChange,submit:e.onNoteSubmit}}):e._e()]:e._e(),e._v(" "),t("NcActionSeparator"),e._v(" "),e._l(e.externalLinkActions,(function(n){return t("ExternalShareAction",{key:n.id,attrs:{id:n.id,action:n,"file-info":e.fileInfo,share:e.share}})})),e._v(" "),e._l(e.externalLegacyLinkActions,(function(n,r){var i=n.icon,a=n.url,s=n.name;return t("NcActionLink",{key:r,attrs:{href:a(e.shareLink),icon:i,target:"_blank"}},[e._v("\n\t\t\t\t"+e._s(s)+"\n\t\t\t")])})),e._v(" "),e.share.canDelete?t("NcActionButton",{attrs:{icon:"icon-close",disabled:e.saving},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Unshare"))+"\n\t\t\t")]):e._e(),e._v(" "),!e.isEmailShareType&&e.canReshare?t("NcActionButton",{staticClass:"new-share-link",attrs:{icon:"icon-add"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onNewLinkShare.apply(null,arguments)}}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Add another link"))+"\n\t\t\t")]):e._e()]:e.canReshare?t("NcActionButton",{staticClass:"new-share-link",attrs:{title:e.t("files_sharing","Create a new share link"),"aria-label":e.t("files_sharing","Create a new share link"),icon:e.loading?"icon-loading-small":"icon-add"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onNewLinkShare.apply(null,arguments)}}}):e._e()],2)],1)}),[],!1,null,"5bce4e06",null),Bt={name:"SharingLinkList",components:{SharingEntryLink:jt.exports},mixins:[b],props:{fileInfo:{type:Object,default:function(){},required:!0},shares:{type:Array,default:function(){return[]},required:!0},canReshare:{type:Boolean,required:!0}},data:function(){return{canLinkShare:OC.getCapabilities().files_sharing.public.enabled}},computed:{hasLinkShares:function(){var e=this;return this.shares.filter((function(t){return t.type===e.SHARE_TYPES.SHARE_TYPE_LINK})).length>0},hasShares:function(){return this.shares.length>0}},methods:{addShare:function(e,t){this.shares.unshift(e),this.awaitForShare(e,t)},awaitForShare:function(e,t){var n=this;this.$nextTick((function(){var r=n.$children.find((function(t){return t.share===e}));r&&t(r)}))},removeShare:function(e){var t=this.shares.findIndex((function(t){return t===e}));this.shares.splice(t,1)}}},qt=(0,q.Z)(Bt,(function(){var e=this,t=e._self._c;return e.canLinkShare?t("ul",{staticClass:"sharing-link-list"},[!e.hasLinkShares&&e.canReshare?t("SharingEntryLink",{attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo},on:{"add:share":e.addShare}}):e._e(),e._v(" "),e.hasShares?e._l(e.shares,(function(n,r){return t("SharingEntryLink",{key:n.id,attrs:{index:e.shares.length>1?r+1:null,"can-reshare":e.canReshare,share:e.shares[r],"file-info":e.fileInfo},on:{"update:share":[function(t){return e.$set(e.shares,r,t)},function(t){return e.awaitForShare.apply(e,arguments)}],"add:share":function(t){return e.addShare.apply(e,arguments)},"remove:share":e.removeShare}})})):e._e()],2):e._e()}),[],!1,null,null,null),Wt=qt.exports,Ft=r(25108);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}var $t={name:"SharingEntry",components:{NcActions:x(),NcActionButton:je(),NcActionCheckbox:ut(),NcActionInput:dt(),NcActionTextEditable:mt(),NcAvatar:l()},mixins:[Qe],data:function(){return{permissionsEdit:OC.PERMISSION_UPDATE,permissionsCreate:OC.PERMISSION_CREATE,permissionsDelete:OC.PERMISSION_DELETE,permissionsRead:OC.PERMISSION_READ,permissionsShare:OC.PERMISSION_SHARE}},computed:{title:function(){var e=this.share.shareWithDisplayName;return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?e+=" (".concat(t("files_sharing","group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?e+=" (".concat(t("files_sharing","conversation"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE?e+=" (".concat(t("files_sharing","remote"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP?e+=" (".concat(t("files_sharing","remote group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_GUEST&&(e+=" (".concat(t("files_sharing","guest"),")")),e},tooltip:function(){if(this.share.owner!==this.share.uidFileOwner){var e={user:this.share.shareWithDisplayName,owner:this.share.ownerDisplayName};return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?t("files_sharing","Shared with the group {user} by {owner}",e):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?t("files_sharing","Shared with the conversation {user} by {owner}",e):t("files_sharing","Shared with {user} by {owner}",e)}return null},canHaveNote:function(){return!this.isRemote},isRemote:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE||this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP},canSetEdit:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_UPDATE||this.canEdit},canSetCreate:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_CREATE||this.canCreate},canSetDelete:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_DELETE||this.canDelete},canSetReshare:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_SHARE||this.canReshare},canSetDownload:function(){return this.fileInfo.canDownload()||this.canDownload},canEdit:{get:function(){return this.share.hasUpdatePermission},set:function(e){this.updatePermissions({isEditChecked:e})}},canCreate:{get:function(){return this.share.hasCreatePermission},set:function(e){this.updatePermissions({isCreateChecked:e})}},canDelete:{get:function(){return this.share.hasDeletePermission},set:function(e){this.updatePermissions({isDeleteChecked:e})}},canReshare:{get:function(){return this.share.hasSharePermission},set:function(e){this.updatePermissions({isReshareChecked:e})}},canDownload:{get:function(){return this.share.hasDownloadPermission},set:function(e){this.updatePermissions({isDownloadChecked:e})}},hasRead:{get:function(){return this.share.hasReadPermission}},isFolder:function(){return"dir"===this.fileInfo.type},hasExpirationDate:{get:function(){return this.config.isDefaultInternalExpireDateEnforced||!!this.share.expireDate},set:function(e){var t=this.config.defaultInternalExpirationDate||new Date((new Date).setDate((new Date).getDate()+1));this.share.expireDate=e?this.formatDateToString(t):"",Ft.debug("Expiration date status",e,this.share.expireDate)}},dateMaxEnforced:function(){return!this.isRemote&&this.config.isDefaultInternalExpireDateEnforced?new Date((new Date).setDate((new Date).getDate()+1+this.config.defaultInternalExpireDate)):this.config.isDefaultRemoteExpireDateEnforced?new Date((new Date).setDate((new Date).getDate()+1+this.config.defaultRemoteExpireDate)):null},hasStatus:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_USER&&"object"===Zt(this.share.status)&&!Array.isArray(this.share.status)},allowDownloadText:function(){return t("files_sharing","Allow download")},isSetDownloadButtonVisible:function(){return this.isFolder||["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"].includes(this.fileInfo.mimetype)}},methods:{updatePermissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEditChecked,n=void 0===t?this.canEdit:t,r=e.isCreateChecked,i=void 0===r?this.canCreate:r,a=e.isDeleteChecked,s=void 0===a?this.canDelete:a,o=e.isReshareChecked,c=void 0===o?this.canReshare:o,l=e.isDownloadChecked,u=void 0===l?this.canDownload:l,h=0|(this.hasRead?this.permissionsRead:0)|(i?this.permissionsCreate:0)|(s?this.permissionsDelete:0)|(n?this.permissionsEdit:0)|(c?this.permissionsShare:0);this.share.permissions=h,this.share.hasDownloadPermission!==u&&(this.share.hasDownloadPermission=u),this.queueUpdate("permissions","attributes")},onMenuClose:function(){this.onNoteSubmit()}}},Gt=$t,Vt=r(24196),Qt={};Qt.styleTagTransform=M(),Qt.setAttributes=L(),Qt.insert=O().bind(null,"head"),Qt.domAPI=R(),Qt.insertStyleElement=U(),T()(Vt.Z,Qt),Vt.Z&&Vt.Z.locals&&Vt.Z.locals;var zt=(0,q.Z)(Gt,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"sharing-entry"},[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":e.share.type!==e.SHARE_TYPES.SHARE_TYPE_USER,user:e.share.shareWith,"display-name":e.share.shareWithDisplayName,"menu-position":"left",url:e.share.shareWithAvatar}}),e._v(" "),t(e.share.shareWithLink?"a":"div",{tag:"component",staticClass:"sharing-entry__desc",attrs:{title:e.tooltip,"aria-label":e.tooltip,href:e.share.shareWithLink}},[t("span",[e._v(e._s(e.title)),e.isUnique?e._e():t("span",{staticClass:"sharing-entry__desc-unique"},[e._v(" ("+e._s(e.share.shareWithDisplayNameUnique)+")")])]),e._v(" "),e.hasStatus?t("p",[t("span",[e._v(e._s(e.share.status.icon||""))]),e._v(" "),t("span",[e._v(e._s(e.share.status.message||""))])]):e._e()]),e._v(" "),t("NcActions",{staticClass:"sharing-entry__actions",attrs:{"menu-align":"right"},on:{close:e.onMenuClose}},[e.share.canEdit?[t("NcActionCheckbox",{ref:"canEdit",attrs:{checked:e.canEdit,value:e.permissionsEdit,disabled:e.saving||!e.canSetEdit},on:{"update:checked":function(t){e.canEdit=t}}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Allow editing"))+"\n\t\t\t")]),e._v(" "),e.isFolder?t("NcActionCheckbox",{ref:"canCreate",attrs:{checked:e.canCreate,value:e.permissionsCreate,disabled:e.saving||!e.canSetCreate},on:{"update:checked":function(t){e.canCreate=t}}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Allow creating"))+"\n\t\t\t")]):e._e(),e._v(" "),e.isFolder?t("NcActionCheckbox",{ref:"canDelete",attrs:{checked:e.canDelete,value:e.permissionsDelete,disabled:e.saving||!e.canSetDelete},on:{"update:checked":function(t){e.canDelete=t}}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Allow deleting"))+"\n\t\t\t")]):e._e(),e._v(" "),e.config.isResharingAllowed?t("NcActionCheckbox",{ref:"canReshare",attrs:{checked:e.canReshare,value:e.permissionsShare,disabled:e.saving||!e.canSetReshare},on:{"update:checked":function(t){e.canReshare=t}}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Allow resharing"))+"\n\t\t\t")]):e._e(),e._v(" "),e.isSetDownloadButtonVisible?t("NcActionCheckbox",{ref:"canDownload",attrs:{checked:e.canDownload,disabled:e.saving||!e.canSetDownload},on:{"update:checked":function(t){e.canDownload=t}}},[e._v("\n\t\t\t\t"+e._s(e.allowDownloadText)+"\n\t\t\t")]):e._e(),e._v(" "),t("NcActionCheckbox",{attrs:{checked:e.hasExpirationDate,disabled:e.config.isDefaultInternalExpireDateEnforced||e.saving},on:{"update:checked":function(t){e.hasExpirationDate=t},uncheck:e.onExpirationDisable}},[e._v("\n\t\t\t\t"+e._s(e.config.isDefaultInternalExpireDateEnforced?e.t("files_sharing","Expiration date enforced"):e.t("files_sharing","Set expiration date"))+"\n\t\t\t")]),e._v(" "),e.hasExpirationDate?t("NcActionInput",{ref:"expireDate",class:{error:e.errors.expireDate},attrs:{"is-native-picker":!0,"hide-label":!0,disabled:e.saving,value:new Date(e.share.expireDate),type:"date",min:e.dateTomorrow,max:e.dateMaxEnforced},on:{input:e.onExpirationChange}},[e._v("\n\t\t\t\t"+e._s(e.t("files_sharing","Enter a date"))+"\n\t\t\t")]):e._e(),e._v(" "),e.canHaveNote?[t("NcActionCheckbox",{attrs:{checked:e.hasNote,disabled:e.saving},on:{"update:checked":function(t){e.hasNote=t},uncheck:function(t){return e.queueUpdate("note")}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("files_sharing","Note to recipient"))+"\n\t\t\t\t")]),e._v(" "),e.hasNote?t("NcActionTextEditable",{ref:"note",class:{error:e.errors.note},attrs:{disabled:e.saving,value:e.share.newNote||e.share.note,icon:"icon-edit"},on:{"update:value":e.onNoteChange,submit:e.onNoteSubmit}}):e._e()]:e._e()]:e._e(),e._v(" "),e.share.canDelete?t("NcActionButton",{attrs:{icon:"icon-close",disabled:e.saving},on:{click:function(t){return t.preventDefault(),e.onDelete.apply(null,arguments)}}},[e._v("\n\t\t\t"+e._s(e.t("files_sharing","Unshare"))+"\n\t\t")]):e._e()],2)],1)}),[],!1,null,"13a6a5f0",null);function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt={name:"SharingList",components:{SharingEntry:zt.exports},mixins:[b],props:{fileInfo:{type:Object,default:function(){},required:!0},shares:{type:Array,default:function(){return[]},required:!0}},computed:{hasShares:function(){return 0===this.shares.length},isUnique:function(){var e=this;return function(t){return(n=e.shares,function(e){if(Array.isArray(e))return Kt(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(n){return t.type===e.SHARE_TYPES.SHARE_TYPE_USER&&t.shareWithDisplayName===n.shareWithDisplayName})).length<=1;var n}}},methods:{removeShare:function(e){var t=this.shares.findIndex((function(t){return t===e}));this.shares.splice(t,1)}}},Xt=(0,q.Z)(Jt,(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"sharing-sharee-list"},e._l(e.shares,(function(n){return t("SharingEntry",{key:n.id,attrs:{"file-info":e.fileInfo,share:n,"is-unique":e.isUnique(n)},on:{"remove:share":e.removeShare}})})),1)}),[],!1,null,null,null).exports,en=r(25108);function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function rn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){nn(a,r,i,s,o,"next",e)}function o(e){nn(a,r,i,s,o,"throw",e)}s(void 0)}))}}var an={name:"SharingTab",components:{NcAvatar:l(),CollectionList:s.G,SharingEntryInternal:K,SharingEntrySimple:W,SharingInherited:ct,SharingInputRecia:Te,SharingInputEtab:He,SharingInputChoice:Ye,SharingLinkList:Wt,SharingList:Xt},mixins:[b],data:function(){return{config:new f,error:"",expirationInterval:null,loading:!0,fileInfo:null,reshare:null,sharedWithMe:{},shares:[],linkShares:[],searchType:"etab",selectedEtabs:[],sections:OCA.Sharing.ShareTabSections.getSections(),projectsEnabled:(0,h.j)("core","projects_enabled",!1)}},computed:{isSharedWithMe:function(){return Object.keys(this.sharedWithMe).length>0},canReshare:function(){return!!(this.fileInfo.permissions&OC.PERMISSION_SHARE)||!!(this.reshare&&this.reshare.hasSharePermission&&this.config.isResharingAllowed)}},methods:{update:function(e){var t=this;return rn(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.fileInfo=e,t.resetState(),t.getShares();case 3:case"end":return n.stop()}}),n)})))()},getShares:function(){var e=this;return rn(regeneratorRuntime.mark((function n(){var r,i,a,s,c,l,h,d,p,f,g,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,r=(0,o.generateOcsUrl)("apps/files_sharing/api/v1/shares"),i="json",a=(e.fileInfo.path+"/"+e.fileInfo.name).replace("//","/"),s=u.default.get(r,{params:{format:i,path:a,reshares:!0}}),c=u.default.get(r,{params:{format:i,path:a,shared_with_me:!0}}),n.next=9,Promise.all([s,c]);case 9:l=n.sent,A=2,h=function(e){if(Array.isArray(e))return e}(_=l)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(_,A)||function(e,t){if(e){if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}}(_,A)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=h[0],p=h[1],e.loading=!1,e.processSharedWithMe(p),e.processShares(d),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(0),null!==(f=n.t0.response.data)&&void 0!==f&&null!==(g=f.ocs)&&void 0!==g&&null!==(m=g.meta)&&void 0!==m&&m.message?e.error=n.t0.response.data.ocs.meta.message:e.error=t("files_sharing","Unable to load the shares list"),e.loading=!1,en.error("Error loading the shares list",n.t0);case 23:case"end":return n.stop()}var _,A}),n,null,[[0,18]])})))()},resetState:function(){clearInterval(this.expirationInterval),this.loading=!0,this.error="",this.sharedWithMe={},this.shares=[],this.linkShares=[]},updateExpirationSubtitle:function(e){var n=moment(e.expireDate).unix();this.$set(this.sharedWithMe,"subtitle",t("files_sharing","Expires {relativetime}",{relativetime:OC.Util.relativeModifiedDate(1e3*n)})),moment().unix()>n&&(clearInterval(this.expirationInterval),this.$set(this.sharedWithMe,"subtitle",t("files_sharing","this share just expired.")))},processShares:function(e){var t=this,n=e.data;if(n.ocs&&n.ocs.data&&n.ocs.data.length>0){var r=n.ocs.data.map((function(e){return new y(e)})).sort((function(e,t){return t.createdTime-e.createdTime}));this.linkShares=r.filter((function(e){return e.type===t.SHARE_TYPES.SHARE_TYPE_LINK||e.type===t.SHARE_TYPES.SHARE_TYPE_EMAIL})),this.shares=r.filter((function(e){return e.type!==t.SHARE_TYPES.SHARE_TYPE_LINK&&e.type!==t.SHARE_TYPES.SHARE_TYPE_EMAIL})),en.debug("Processed",this.linkShares.length,"link share(s)"),en.debug("Processed",this.shares.length,"share(s)")}},processSharedWithMe:function(e){var n=e.data;if(n.ocs&&n.ocs.data&&n.ocs.data[0]){var r=new y(n),i=function(e){return e.type===g.D.SHARE_TYPE_GROUP?t("files_sharing","Shared with you and the group {group} by {owner}",{group:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):e.type===g.D.SHARE_TYPE_CIRCLE?t("files_sharing","Shared with you and {circle} by {owner}",{circle:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):e.type===g.D.SHARE_TYPE_ROOM?e.shareWithDisplayName?t("files_sharing","Shared with you and the conversation {conversation} by {owner}",{conversation:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you in a conversation by {owner}",{owner:e.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you by {owner}",{owner:e.ownerDisplayName},void 0,{escape:!1})}(r),a=r.ownerDisplayName,s=r.owner;this.sharedWithMe={displayName:a,title:i,user:s},this.reshare=r,r.expireDate&&moment(r.expireDate).unix()>moment().unix()&&(this.updateExpirationSubtitle(r),this.expirationInterval=setInterval(this.updateExpirationSubtitle,1e4,r))}else this.fileInfo&&void 0!==this.fileInfo.shareOwnerId&&this.fileInfo.shareOwnerId!==OC.currentUser&&(this.sharedWithMe={displayName:this.fileInfo.shareOwner,title:t("files_sharing","Shared with you by {owner}",{owner:this.fileInfo.shareOwner},void 0,{escape:!1}),user:this.fileInfo.shareOwnerId})},addShare:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL?this.linkShares.unshift(e):this.shares.unshift(e),this.awaitForShare(e,t)},awaitForShare:function(e,t){var n=this.$refs.shareList;e.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL&&(n=this.$refs.linkShareList),this.$nextTick((function(){var r=n.$children.find((function(t){return t.share===e}));r&&t(r)}))},updateSearchType:function(e){this.searchType=e},updateSelectedEtabs:function(e){this.selectedEtabs=e}}},sn=an,on=r(77530),cn={};cn.styleTagTransform=M(),cn.setAttributes=L(),cn.insert=O().bind(null,"head"),cn.domAPI=R(),cn.insertStyleElement=U(),T()(on.Z,cn),on.Z&&on.Z.locals&&on.Z.locals;var ln=(0,q.Z)(sn,(function(){var e=this,t=e._self._c;return t("div",{class:{"icon-loading":e.loading}},[e.error?t("div",{staticClass:"emptycontent",class:{emptyContentWithSections:e.sections.length>0}},[t("div",{staticClass:"icon icon-error"}),e._v(" "),t("h2",[e._v(e._s(e.error))])]):t("div",{staticClass:"sharingTab__content"},[e.isSharedWithMe?t("SharingEntrySimple",e._b({staticClass:"sharing-entry__reshare",scopedSlots:e._u([{key:"avatar",fn:function(){return[t("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{user:e.sharedWithMe.user,"display-name":e.sharedWithMe.displayName}})]},proxy:!0}],null,!1,3197855346)},"SharingEntrySimple",e.sharedWithMe,!1)):e._e(),e._v(" "),t("span",[e._v(e._s(e.t("files_sharing","Search on :")))]),e._v(" "),!e.loading&&e.canReshare?t("SharingInputChoice",{attrs:{type:e.searchType},on:{change:e.updateSearchType}}):e._e(),e._v(" "),!e.loading&&e.canReshare?t("SharingInputEtab",{directives:[{name:"show",rawName:"v-show",value:"etab"===e.searchType,expression:"searchType==='etab'"}],on:{change:e.updateSelectedEtabs}}):e._e(),e._v(" "),e.loading?e._e():t("SharingInputRecia",{attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo,"link-shares":e.linkShares,reshare:e.reshare,shares:e.shares,"search-type":e.searchType,"search-etabs":e.selectedEtabs},on:{"add:share":e.addShare}}),e._v(" "),e.loading?e._e():t("SharingLinkList",{ref:"linkShareList",attrs:{"can-reshare":e.canReshare,"file-info":e.fileInfo,shares:e.linkShares}}),e._v(" "),e.loading?e._e():t("SharingList",{ref:"shareList",attrs:{shares:e.shares,"file-info":e.fileInfo}}),e._v(" "),e.canReshare&&!e.loading?t("SharingInherited",{attrs:{"file-info":e.fileInfo}}):e._e(),e._v(" "),t("SharingEntryInternal",{attrs:{"file-info":e.fileInfo}}),e._v(" "),e.projectsEnabled&&e.fileInfo?t("CollectionList",{attrs:{id:"".concat(e.fileInfo.id),type:"file",name:e.fileInfo.name}}):e._e()],1),e._v(" "),e._l(e.sections,(function(n,r){return t("div",{key:r,ref:"section-"+r,refInFor:!0,staticClass:"sharingTab__additionalContent"},[t(n(e.$refs["section-"+r],e.fileInfo),{tag:"component",attrs:{"file-info":e.fileInfo}})],1)}))],2)}),[],!1,null,"b089dc64",null).exports,un=r(25108);function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pn(r.key),r)}}function pn(e){var t=function(e,t){if("object"!==hn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===hn(t)?t:String(t)}var fn=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=void 0,(n=pn(n="_state"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._state={},this._state.results=[],un.debug("OCA.Sharing.ShareSearch initialized")}var t,n;return t=e,(n=[{key:"state",get:function(){return this._state}},{key:"addNewResult",value:function(e){return""!==e.displayName.trim()&&"function"==typeof e.handler?(this._state.results.push(e),!0):(un.error("Invalid search result provided",e),!1)}}])&&dn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),gn=r(25108);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,An(r.key),r)}}function An(e){var t=function(e,t){if("object"!==mn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===mn(t)?t:String(t)}var vn=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=void 0,(n=An(n="_state"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._state={},this._state.actions=[],gn.debug("OCA.Sharing.ExternalLinkActions initialized")}var t,n;return t=e,(n=[{key:"state",get:function(){return this._state}},{key:"registerAction",value:function(e){return gn.warn("OCA.Sharing.ExternalLinkActions is deprecated, use OCA.Sharing.ExternalShareAction instead"),"object"===mn(e)&&e.icon&&e.name&&e.url?(this._state.actions.push(e),!0):(gn.error("Invalid action provided",e),!1)}}])&&_n(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),yn=r(25108);function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sn(r.key),r)}}function Sn(e){var t=function(e,t){if("object"!==bn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===bn(t)?t:String(t)}var En=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=void 0,(n=Sn(n="_state"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._state={},this._state.actions=[],yn.debug("OCA.Sharing.ExternalShareActions initialized")}var t,n;return t=e,(n=[{key:"state",get:function(){return this._state}},{key:"registerAction",value:function(e){return"object"===bn(e)&&"string"==typeof e.id&&"function"==typeof e.data&&Array.isArray(e.shareType)&&"object"===bn(e.handlers)&&Object.values(e.handlers).every((function(e){return"function"==typeof e}))?this._state.actions.findIndex((function(t){return t.id===e.id}))>-1?(yn.error("An action with the same id ".concat(e.id," already exists"),e),!1):(this._state.actions.push(e),!0):(yn.error("Invalid action provided",e),!1)}}])&&wn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kn(r.key),r)}}function kn(e){var t=function(e,t){if("object"!==Cn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Cn(t)?t:String(t)}var Pn=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=void 0,(n=kn(n="_sections"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._sections=[]}var t,n;return t=e,(n=[{key:"registerSection",value:function(e){this._sections.push(e)}},{key:"getSections",value:function(){return this._sections}}])&&xn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Tn=r(44582);function Dn(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}window.OCA.Sharing||(window.OCA.Sharing={}),Object.assign(window.OCA.Sharing,{ShareSearch:new fn}),Object.assign(window.OCA.Sharing,{ExternalLinkActions:new vn}),Object.assign(window.OCA.Sharing,{ExternalShareActions:new En}),Object.assign(window.OCA.Sharing,{ShareTabSections:new Pn}),i.ZP.prototype.t=a.Iu,i.ZP.prototype.n=a.uN;var Rn=i.ZP.extend(ln),Nn=null;window.addEventListener("DOMContentLoaded",(function(){OCA.Files&&OCA.Files.Sidebar&&OCA.Files.Sidebar.registerTab(new OCA.Files.Sidebar.Tab({id:"sharing",name:(0,a.Iu)("files_sharing","Sharing"),iconSvg:Tn,mount:function(e,t,n){return(r=regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Nn&&Nn.$destroy(),Nn=new Rn({parent:n}),r.next=4,Nn.update(t);case 4:Nn.$mount(e);case 5:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function s(e){Dn(a,n,i,s,o,"next",e)}function o(e){Dn(a,n,i,s,o,"throw",e)}s(void 0)}))})();var r},update:function(e){Nn.update(e)},destroy:function(){Nn.$destroy(),Nn=null}}))}))},73286:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".error[data-v-5e957d09] .action-checkbox__label:before{border:1px solid var(--color-error)}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharePermissionsEditor.vue"],names:[],mappings:"AAEC,uDACC,mCAAA",sourcesContent:["\n.error {\n\t::v-deep .action-checkbox__label:before {\n\t\tborder: 1px solid var(--color-error);\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},24196:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-entry[data-v-13a6a5f0]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-13a6a5f0]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em}.sharing-entry__desc p[data-v-13a6a5f0]{color:var(--color-text-maxcontrast)}.sharing-entry__desc-unique[data-v-13a6a5f0]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-13a6a5f0]{margin-left:auto}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntry.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAED,6CACC,mCAAA,CAGF,yCACC,gBAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t\t&-unique {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},24147:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-entry[data-v-23251e4a]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-23251e4a]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em}.sharing-entry__desc p[data-v-23251e4a]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-23251e4a]{margin-left:auto}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInherited.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAGF,yCACC,gBAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},66828:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-entry__internal .avatar-external[data-v-69e43ddc]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}.sharing-entry__internal .icon-checkmark-color[data-v-69e43ddc]{opacity:1}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInternal.vue"],names:[],mappings:"AAEC,2DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA,CAED,gEACC,SAAA",sourcesContent:["\n.sharing-entry__internal {\n\t.avatar-external {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},80055:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-entry[data-v-5bce4e06]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-5bce4e06]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;line-height:1.2em;overflow:hidden}.sharing-entry__desc p[data-v-5bce4e06]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-5bce4e06]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.sharing-entry:not(.sharing-entry--share) .sharing-entry__actions .new-share-link[data-v-5bce4e06]{border-top:1px solid var(--color-border)}.sharing-entry[data-v-5bce4e06] .avatar-link-share{background-color:var(--color-primary)}.sharing-entry .sharing-entry__action--public-upload[data-v-5bce4e06]{border-bottom:1px solid var(--color-border)}.sharing-entry__loading[data-v-5bce4e06]{width:44px;height:44px;margin:0;padding:14px;margin-left:auto}.sharing-entry .action-item[data-v-5bce4e06]{margin-left:auto}.sharing-entry .action-item~.action-item[data-v-5bce4e06],.sharing-entry .action-item~.sharing-entry__loading[data-v-5bce4e06]{margin-left:0}.sharing-entry .icon-checkmark-color[data-v-5bce4e06]{opacity:1}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryLink.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CAEA,wCACC,mCAAA,CAGF,uCACC,sBAAA,CACA,eAAA,CACA,kBAAA,CAIA,mGACC,wCAAA,CAIF,mDACC,qCAAA,CAGD,sEACC,2CAAA,CAGD,yCACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,gBAAA,CAKD,6CACC,gBAAA,CACA,+HAEC,aAAA,CAIF,sDACC,SAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\toverflow: hidden;\n\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__title {\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t}\n\n\t&:not(.sharing-entry--share) &__actions {\n\t\t.new-share-link {\n\t\t\tborder-top: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t::v-deep .avatar-link-share {\n\t\tbackground-color: var(--color-primary);\n\t}\n\n\t.sharing-entry__action--public-upload {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t}\n\n\t&__loading {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 14px;\n\t\tmargin-left: auto;\n\t}\n\n\t// put menus to the left\n\t// but only the first one\n\t.action-item {\n\t\tmargin-left: auto;\n\t\t~ .action-item,\n\t\t~ .sharing-entry__loading {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},3335:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-entry[data-v-9fd256bc]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-9fd256bc]{padding:8px;line-height:1.2em;position:relative;flex:1 1;min-width:0}.sharing-entry__desc p[data-v-9fd256bc]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-9fd256bc]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:inherit}.sharing-entry__actions[data-v-9fd256bc]{margin-left:auto !important}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntrySimple.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CACA,wCACC,mCAAA,CAGF,uCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAED,yCACC,2BAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tpadding: 8px;\n\t\tline-height: 1.2em;\n\t\tposition: relative;\n\t\tflex: 1 1;\n\t\tmin-width: 0;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__title {\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\tmax-width: inherit;\n\t}\n\t&__actions {\n\t\tmargin-left: auto !important;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},33721:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,'.sharing-input-etab{width:100%;margin:10px 0}.sharing-input-etab .multiselect__content-wrapper{min-height:150px}.sharing-input-etab .option__desc{display:flex;flex-direction:column;justify-content:center;min-width:0}.sharing-input-etab .option__desc .option__name,.sharing-input-etab .option__desc .option__uai{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sharing-input-etab .option__desc .option__name{color:var(--color-text-light)}.sharing-input-etab .option__desc .option__uai{font-size:smaller}.sharing-input-etab .multiselect__option--highlight:not(.multiselect__option--selected):before{visibility:hidden !important}.sharing-input-etab .multiselect__option--highlight:after{position:absolute;bottom:5px;right:5px;content:"Selectionner";opacity:.5}.sharing-input-etab .multiselect__option--highlight.multiselect__option--selected:after{content:"Déselectionner"}.sharing-input-etab .option__close,.sharing-input-etab .option__selectall{display:flex;flex-wrap:wrap;width:100%;font-weight:700;text-align:center;padding:8px;overflow:hidden;text-overflow:ellipsis;height:auto;min-height:1em;background-color:rgba(0,0,0,0)}.sharing-input-etab .option__close span,.sharing-input-etab .option__selectall span{flex:1;color:var(--color-text-lighter)}.sharing-input-etab .option__close span:hover,.sharing-input-etab .option__selectall span:hover{color:var(--color-text)}',"",{version:3,sources:["webpack://./SharingInputEtab.vue","webpack://./apps/files_sharing/src/components/SharingInputEtab.vue"],names:[],mappings:"AAAA,oBCCA,UACC,CAAA,aACA,CAAA,kDACA,gBACC,CAAA,kCAED,YACC,CAAA,qBACA,CAAA,sBACA,CAAA,WACA,CAAA,+FACA,eACC,CAAA,kBACA,CAAA,sBACA,CAAA,gDAED,6BACC,CAAA,+CAED,iBACC,CAAA,+FAMA,4BACC,CAAA,0DAGF,iBACC,CAAA,UACA,CAAA,SACA,CAAA,sBACA,CAAA,UACA,CAAA,wFAGA,wBACC,CAAA,0EAIH,YACC,CAAA,cACA,CAAA,UACA,CAAA,eACA,CAAA,iBACA,CAAA,WACA,CAAA,eACA,CAAA,sBACA,CAAA,WACA,CAAA,cACA,CAAA,8BACA,CAAA,oFACA,MACC,CAAA,+BACA,CAAA,gGACA,uBACC",sourcesContent:['.sharing-input-etab{width:100%;margin:10px 0}.sharing-input-etab .multiselect__content-wrapper{min-height:150px}.sharing-input-etab .option__desc{display:flex;flex-direction:column;justify-content:center;min-width:0}.sharing-input-etab .option__desc .option__name,.sharing-input-etab .option__desc .option__uai{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sharing-input-etab .option__desc .option__name{color:var(--color-text-light)}.sharing-input-etab .option__desc .option__uai{font-size:smaller}.sharing-input-etab .multiselect__option--highlight:not(.multiselect__option--selected):before{visibility:hidden !important}.sharing-input-etab .multiselect__option--highlight:after{position:absolute;bottom:5px;right:5px;content:"Selectionner";opacity:.5}.sharing-input-etab .multiselect__option--highlight.multiselect__option--selected:after{content:"Déselectionner"}.sharing-input-etab .option__close,.sharing-input-etab .option__selectall{display:flex;flex-wrap:wrap;width:100%;font-weight:700;text-align:center;padding:8px;overflow:hidden;text-overflow:ellipsis;height:auto;min-height:1em;background-color:rgba(0,0,0,0)}.sharing-input-etab .option__close span,.sharing-input-etab .option__selectall span{flex:1;color:var(--color-text-lighter)}.sharing-input-etab .option__close span:hover,.sharing-input-etab .option__selectall span:hover{color:var(--color-text)}',"\n.sharing-input-etab {\n\twidth: 100%;\n\tmargin: 10px 0;\n\t.multiselect__content-wrapper{\n\t\tmin-height:150px;\n\t}\n\t.option__desc{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tmin-width: 0;\n\t\t.option__name, .option__uai{\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t\t.option__name{\n\t\t\tcolor: var(--color-text-light);\n\t\t}\n\t\t.option__uai{\n\t\t\tfont-size:smaller;\n\t\t}\n\n\t}\n\t.multiselect__option--highlight{\n\t\t&:not(.multiselect__option--selected){\n\t\t\t&:before{\n\t\t\t\tvisibility:hidden !important;\n\t\t\t}\n\t\t}\n\t\t&:after{\n\t\t\tposition: absolute;\n\t\t\tbottom: 5px;\n\t\t\tright:5px;\n\t\t\tcontent: 'Selectionner';\n\t\t\topacity: 0.5;\n\t\t}\n\t\t&.multiselect__option--selected{\n\t\t\t&:after{\n\t\t\t\tcontent: 'Déselectionner';\n\t\t\t}\n\t\t}\n\t}\n\t.option__close, .option__selectall{\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\twidth: 100%;\n\t\tfont-weight: 700;\n\t\ttext-align: center;\n\t\tpadding: 8px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\theight: auto;\n\t\tmin-height: 1em;\n\t\tbackground-color: transparent;\n\t\tspan{\n\t\t\tflex:1;\n\t\t\tcolor: var(--color-text-lighter);\n\t\t\t&:hover{\n\t\t\t\tcolor: var(--color-text);\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},14802:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-input{width:100%;margin:10px 0}.sharing-input .multiselect__option span[lookup] .avatardiv{background-image:var(--icon-search-fff);background-repeat:no-repeat;background-position:center;background-color:var(--color-text-maxcontrast) !important}.sharing-input .multiselect__option span[lookup] .avatardiv div{display:none}.sharing-input .list_header{padding:5px;color:var(--color-text-lighter)}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingInputRecia.vue"],names:[],mappings:"AACA,eACC,UAAA,CACA,aAAA,CAKE,4DACC,uCAAA,CACA,2BAAA,CACA,0BAAA,CACA,yDAAA,CACA,gEACC,YAAA,CAMJ,4BACC,WAAA,CACA,+BAAA",sourcesContent:["\n.sharing-input {\n\twidth: 100%;\n\tmargin: 10px 0;\n\n\t// properly style the lookup entry\n\t.multiselect__option {\n\t\tspan[lookup] {\n\t\t\t.avatardiv {\n\t\t\t\tbackground-image: var(--icon-search-fff);\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-position: center;\n\t\t\t\tbackground-color: var(--color-text-maxcontrast) !important;\n\t\t\t\tdiv {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.list_header{\n\t\tpadding: 5px;\n\t\tcolor: var(--color-text-lighter);\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},16843:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".sharing-entry__inherited .avatar-shared[data-v-3462b966]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingInherited.vue"],names:[],mappings:"AAEC,0DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA",sourcesContent:["\n.sharing-entry__inherited {\n\t.avatar-shared {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s},77530:function(e,t,n){var r=n(87537),i=n.n(r),a=n(23645),s=n.n(a)()(i());s.push([e.id,".emptyContentWithSections[data-v-b089dc64]{margin:1rem auto}.sharingTab__content[data-v-b089dc64]{padding:0 6px}.sharingTab__additionalContent[data-v-b089dc64]{margin:44px 0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingTab.vue"],names:[],mappings:"AACA,2CACC,gBAAA,CAIA,sCACC,aAAA,CAED,gDACC,aAAA",sourcesContent:["\n.emptyContentWithSections {\n\tmargin: 1rem auto;\n}\n\n.sharingTab {\n\t&__content {\n\t\tpadding: 0 6px;\n\t}\n\t&__additionalContent {\n\t\tmargin: 44px 0;\n\t}\n}\n"],sourceRoot:""}]),t.Z=s}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,e=[],i.O=function(t,n,r,a){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&a||s>=a)&&Object.keys(i.O).every((function(e){return i.O[e](n[c])}))?n.splice(c--,1):(o=!1,a<s&&(s=a));if(o){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},i.j=7870,function(){i.b=document.baseURI||self.location.href;var e={7870:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,s=n[0],o=n[1],c=n[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(c)var u=c(i)}for(t&&t(n);l<s.length;l++)a=s[l],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},n=self.webpackChunknextcloud=self.webpackChunknextcloud||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),i.nc=void 0;var a=i.O(void 0,[7874],(function(){return i(55653)}));a=i.O(a)}();
//# sourceMappingURL=files_sharing-files_sharing_tab.js.map?v=b5a2c9f2e7e949697f9d