{"version":3,"file":"files_sharing-files_sharing_tab.js?v=b6695dda8f342164f47a","mappings":"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","sources":["webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/apps/files_sharing/src/services/ConfigService.js","webpack:///nextcloud/apps/files_sharing/src/models/Share.js","webpack:///nextcloud/apps/files_sharing/src/mixins/ShareTypes.js","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInternal.vue?6c02","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntrySimple.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntrySimple.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntrySimple.vue?9588","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntrySimple.vue?cb12","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntrySimple.vue?0c02","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryInternal.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryInternal.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInternal.vue?07a0","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInternal.vue?4c20","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputRecia.vue?dbcb","webpack:///nextcloud/apps/files_sharing/src/mixins/MultiselectMixin.js","webpack:///nextcloud/apps/files_sharing/src/utils/GeneratePassword.js","webpack:///nextcloud/apps/files_sharing/src/mixins/ShareRequests.js","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputRecia.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputRecia.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputRecia.vue?f8bd","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputRecia.vue?1133","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputEtab.vue?ec92","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputEtab.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputEtab.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputEtab.vue?047e","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputEtab.vue?260d","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputChoice.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputChoice.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputChoice.vue?8d97","webpack://nextcloud/./apps/files_sharing/src/components/SharingInputChoice.vue?9ca6","webpack://nextcloud/./apps/files_sharing/src/views/SharingInherited.vue?45a6","webpack:///nextcloud/apps/files_sharing/src/lib/SharePermissionsToolBox.js","webpack:///nextcloud/apps/files_sharing/src/mixins/SharesMixin.js","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryInherited.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryInherited.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInherited.vue?c7aa","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInherited.vue?0e5a","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryInherited.vue?77d5","webpack:///nextcloud/apps/files_sharing/src/views/SharingInherited.vue","webpack:///nextcloud/apps/files_sharing/src/views/SharingInherited.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/views/SharingInherited.vue?5bad","webpack://nextcloud/./apps/files_sharing/src/views/SharingInherited.vue?1677","webpack://nextcloud/./apps/files_sharing/src/views/SharingLinkList.vue?de0b","webpack:///nextcloud/apps/files_sharing/src/mixins/ShareDetails.js","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue?4d9f","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue?4441","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue?0b36","webpack:///nextcloud/apps/files_sharing/src/components/ExternalShareAction.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/files_sharing/src/components/ExternalShareAction.vue","webpack://nextcloud/./apps/files_sharing/src/components/ExternalShareAction.vue?9bf3","webpack://nextcloud/./apps/files_sharing/src/components/ExternalShareAction.vue?82b4","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryLink.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryLink.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryLink.vue?7bf8","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryLink.vue?af90","webpack:///nextcloud/apps/files_sharing/src/views/SharingLinkList.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/files_sharing/src/views/SharingLinkList.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntryLink.vue?64e9","webpack://nextcloud/./apps/files_sharing/src/views/SharingLinkList.vue?a70b","webpack://nextcloud/./apps/files_sharing/src/views/SharingList.vue?e340","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntry.vue","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntry.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntry.vue?1655","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntry.vue?10a7","webpack:///nextcloud/apps/files_sharing/src/views/SharingList.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/files_sharing/src/views/SharingList.vue","webpack://nextcloud/./apps/files_sharing/src/components/SharingEntry.vue?f8d7","webpack://nextcloud/./apps/files_sharing/src/views/SharingList.vue?9f9c","webpack://nextcloud/./apps/files_sharing/src/views/SharingDetailsTab.vue?7f2e","webpack:///nextcloud/apps/files_sharing/src/views/SharingDetailsTab.vue","webpack:///nextcloud/apps/files_sharing/src/views/SharingDetailsTab.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/views/SharingDetailsTab.vue?c508","webpack://nextcloud/./apps/files_sharing/src/views/SharingDetailsTab.vue?10fc","webpack:///nextcloud/apps/files_sharing/src/views/SharingTab.vue","webpack:///nextcloud/apps/files_sharing/src/utils/SharedWithMe.js","webpack:///nextcloud/apps/files_sharing/src/views/SharingTab.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/files_sharing/src/views/SharingTab.vue?23c7","webpack://nextcloud/./apps/files_sharing/src/views/SharingTab.vue?6997","webpack://nextcloud/./apps/files_sharing/src/views/SharingTab.vue?0ae8","webpack:///nextcloud/apps/files_sharing/src/files_sharing_tab.js","webpack:///nextcloud/apps/files_sharing/src/services/ShareSearch.js","webpack:///nextcloud/apps/files_sharing/src/services/ExternalLinkActions.js","webpack:///nextcloud/apps/files_sharing/src/services/ExternalShareActions.js","webpack:///nextcloud/apps/files_sharing/src/services/TabSections.js","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntry.vue?vue&type=style&index=0&id=7bfd2f06&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryInherited.vue?vue&type=style&index=0&id=283ca89e&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryInternal.vue?vue&type=style&index=0&id=71a426be&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryLink.vue?vue&type=style&index=0&id=cc82d906&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue?vue&type=style&index=0&id=d960cabe&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/components/SharingEntrySimple.vue?vue&type=style&index=0&id=1852ea78&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputEtab.vue?vue&type=style&index=0&id=56a16e3f&prod&lang=scss","webpack:///nextcloud/apps/files_sharing/src/components/SharingInputRecia.vue?vue&type=style&index=0&id=1b3740c9&prod&lang=scss","webpack:///nextcloud/apps/files_sharing/src/views/SharingDetailsTab.vue?vue&type=style&index=0&id=2ac5f4da&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/views/SharingInherited.vue?vue&type=style&index=0&id=05b67dc8&prod&lang=scss&scoped=true","webpack:///nextcloud/apps/files_sharing/src/views/SharingTab.vue?vue&type=style&index=0&id=e66c1fca&prod&scoped=true&lang=scss","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/global","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/runtimeId","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Arthur Schiwon <blizzz@arthur-schiwon.de>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { getCapabilities } from '@nextcloud/capabilities'\n\nexport default class Config {\n\n\tconstructor() {\n\t\tthis._capabilities = getCapabilities()\n\t}\n\n\t/**\n\t * Get default share permissions, if any\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\t get defaultPermissions() {\n\t\treturn this._capabilities.files_sharing?.default_permissions\n\t}\n\n\t/**\n\t * Is public upload allowed on link shares ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isPublicUploadEnabled() {\n\t\treturn this._capabilities.files_sharing?.public.upload\n\t}\n\n\t/**\n\t * Are link share allowed ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isShareWithLinkAllowed() {\n\t\treturn document.getElementById('allowShareWithLink')\n\t\t\t&& document.getElementById('allowShareWithLink').value === 'yes'\n\t}\n\n\t/**\n\t * Get the federated sharing documentation link\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget federatedShareDocLink() {\n\t\treturn OC.appConfig.core.federatedCloudShareDoc\n\t}\n\n\t/**\n\t * Get the default link share expiration date\n\t *\n\t * @return {Date|null}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget defaultExpirationDate() {\n\t\tif (this.isDefaultExpireDateEnabled) {\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.defaultExpireDate))\n\t\t}\n\t\treturn null\n\t}\n\n\t/**\n\t * Get the default internal expiration date\n\t *\n\t * @return {Date|null}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget defaultInternalExpirationDate() {\n\t\tif (this.isDefaultInternalExpireDateEnabled) {\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.defaultInternalExpireDate))\n\t\t}\n\t\treturn null\n\t}\n\n\t/**\n\t * Get the default remote expiration date\n\t *\n\t * @return {Date|null}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget defaultRemoteExpirationDateString() {\n\t\tif (this.isDefaultRemoteExpireDateEnabled) {\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + this.defaultRemoteExpireDate))\n\t\t}\n\t\treturn null\n\t}\n\n\t/**\n\t * Are link shares password-enforced ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget enforcePasswordForPublicLink() {\n\t\treturn OC.appConfig.core.enforcePasswordForPublicLink === true\n\t}\n\n\t/**\n\t * Is password asked by default on link shares ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget enableLinkPasswordByDefault() {\n\t\treturn OC.appConfig.core.enableLinkPasswordByDefault === true\n\t}\n\n\t/**\n\t * Is link shares expiration enforced ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isDefaultExpireDateEnforced() {\n\t\treturn OC.appConfig.core.defaultExpireDateEnforced === true\n\t}\n\n\t/**\n\t * Is there a default expiration date for new link shares ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isDefaultExpireDateEnabled() {\n\t\treturn OC.appConfig.core.defaultExpireDateEnabled === true\n\t}\n\n\t/**\n\t * Is internal shares expiration enforced ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isDefaultInternalExpireDateEnforced() {\n\t\treturn OC.appConfig.core.defaultInternalExpireDateEnforced === true\n\t}\n\n\t/**\n\t * Is remote shares expiration enforced ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isDefaultRemoteExpireDateEnforced() {\n\t\treturn OC.appConfig.core.defaultRemoteExpireDateEnforced === true\n\t}\n\n\t/**\n\t * Is there a default expiration date for new internal shares ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isDefaultInternalExpireDateEnabled() {\n\t\treturn OC.appConfig.core.defaultInternalExpireDateEnabled === true\n\t}\n\n\t/**\n\t * Is there a default expiration date for new remote shares ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isDefaultRemoteExpireDateEnabled() {\n\t\treturn OC.appConfig.core.defaultRemoteExpireDateEnabled === true\n\t}\n\n\t/**\n\t * Are users on this server allowed to send shares to other servers ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isRemoteShareAllowed() {\n\t\treturn OC.appConfig.core.remoteShareAllowed === true\n\t}\n\n\t/**\n\t * Is sharing my mail (link share) enabled ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isMailShareAllowed() {\n\t\t// eslint-disable-next-line camelcase\n\t\treturn this._capabilities?.files_sharing?.sharebymail !== undefined\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\t&& this._capabilities?.files_sharing?.public?.enabled === true\n\t}\n\n\t/**\n\t * Get the default days to link shares expiration\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget defaultExpireDate() {\n\t\treturn OC.appConfig.core.defaultExpireDate\n\t}\n\n\t/**\n\t * Get the default days to internal shares expiration\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget defaultInternalExpireDate() {\n\t\treturn OC.appConfig.core.defaultInternalExpireDate\n\t}\n\n\t/**\n\t * Get the default days to remote shares expiration\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget defaultRemoteExpireDate() {\n\t\treturn OC.appConfig.core.defaultRemoteExpireDate\n\t}\n\n\t/**\n\t * Is resharing allowed ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isResharingAllowed() {\n\t\treturn OC.appConfig.core.resharingAllowed === true\n\t}\n\n\t/**\n\t * Is password enforced for mail shares ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget isPasswordForMailSharesRequired() {\n\t\treturn (this._capabilities.files_sharing.sharebymail === undefined) ? false : this._capabilities.files_sharing.sharebymail.password.enforced\n\t}\n\n\t/**\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget shouldAlwaysShowUnique() {\n\t\treturn (this._capabilities.files_sharing?.sharee?.always_show_unique === true)\n\t}\n\n\t/**\n\t * Is sharing with groups allowed ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget allowGroupSharing() {\n\t\treturn OC.appConfig.core.allowGroupSharing === true\n\t}\n\n\t/**\n\t * Get the maximum results of a share search\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget maxAutocompleteResults() {\n\t\treturn parseInt(OC.config['sharing.maxAutocompleteResults'], 10) || 25\n\t}\n\n\t/**\n\t * Get the minimal string length\n\t * to initiate a share search\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget minSearchStringLength() {\n\t\treturn parseInt(OC.config['sharing.minSearchStringLength'], 10) || 0\n\t}\n\n\t/**\n\t * Get the password policy config\n\t *\n\t * @return {object}\n\t * @readonly\n\t * @memberof Config\n\t */\n\tget passwordPolicy() {\n\t\treturn this._capabilities.password_policy ? this._capabilities.password_policy : {}\n\t}\n\n}\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\n * @author Gary Kim <gary@garykim.dev>\n * @author Georg Ehrke <oc.list@georgehrke.com>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default class Share {\n\n\t_share\n\n\t/**\n\t * Create the share object\n\t *\n\t * @param {object} ocsData ocs request response\n\t */\n\tconstructor(ocsData) {\n\t\tif (ocsData.ocs && ocsData.ocs.data && ocsData.ocs.data[0]) {\n\t\t\tocsData = ocsData.ocs.data[0]\n\t\t}\n\n\t\t// convert int into boolean\n\t\tocsData.hide_download = !!ocsData.hide_download\n\t\tocsData.mail_send = !!ocsData.mail_send\n\n\t\tif (ocsData.attributes && typeof ocsData.attributes === 'string') {\n\t\t\ttry {\n\t\t\t\tocsData.attributes = JSON.parse(ocsData.attributes)\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn('Could not parse share attributes returned by server', ocsData.attributes)\n\t\t\t}\n\t\t}\n\t\tocsData.attributes = ocsData.attributes ?? []\n\n\t\t// store state\n\t\tthis._share = ocsData\n\t}\n\n\t/**\n\t * Get the share state\n\t * ! used for reactivity purpose\n\t * Do not remove. It allow vuejs to\n\t * inject its watchers into the #share\n\t * state and make the whole class reactive\n\t *\n\t * @return {object} the share raw state\n\t * @readonly\n\t * @memberof Sidebar\n\t */\n\tget state() {\n\t\treturn this._share\n\t}\n\n\t/**\n\t * get the share id\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget id() {\n\t\treturn this._share.id\n\t}\n\n\t/**\n\t * Get the share type\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget type() {\n\t\treturn this._share.share_type\n\t}\n\n\t/**\n\t * Get the share permissions\n\t * See OC.PERMISSION_* variables\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget permissions() {\n\t\treturn this._share.permissions\n\t}\n\n\t/**\n\t * Get the share attributes\n\t *\n\t * @return {Array}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget attributes() {\n\t\treturn this._share.attributes\n\t}\n\n\t/**\n\t * Set the share permissions\n\t * See OC.PERMISSION_* variables\n\t *\n\t * @param {number} permissions valid permission, See OC.PERMISSION_* variables\n\t * @memberof Share\n\t */\n\tset permissions(permissions) {\n\t\tthis._share.permissions = permissions\n\t}\n\n\t// SHARE OWNER --------------------------------------------------\n\t/**\n\t * Get the share owner uid\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget owner() {\n\t\treturn this._share.uid_owner\n\t}\n\n\t/**\n\t * Get the share owner's display name\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget ownerDisplayName() {\n\t\treturn this._share.displayname_owner\n\t}\n\n\t// SHARED WITH --------------------------------------------------\n\t/**\n\t * Get the share with entity uid\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget shareWith() {\n\t\treturn this._share.share_with\n\t}\n\n\t/**\n\t * Get the share with entity display name\n\t * fallback to its uid if none\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget shareWithDisplayName() {\n\t\treturn this._share.share_with_displayname\n\t\t\t|| this._share.share_with\n\t}\n\n\t/**\n\t * Unique display name in case of multiple\n\t * duplicates results with the same name.\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget shareWithDisplayNameUnique() {\n\t\treturn this._share.share_with_displayname_unique\n\t\t\t|| this._share.share_with\n\t}\n\n\t/**\n\t * Get the share with entity link\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget shareWithLink() {\n\t\treturn this._share.share_with_link\n\t}\n\n\t/**\n\t * Get the share with avatar if any\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget shareWithAvatar() {\n\t\treturn this._share.share_with_avatar\n\t}\n\n\t// SHARED FILE OR FOLDER OWNER ----------------------------------\n\t/**\n\t * Get the shared item owner uid\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget uidFileOwner() {\n\t\treturn this._share.uid_file_owner\n\t}\n\n\t/**\n\t * Get the shared item display name\n\t * fallback to its uid if none\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget displaynameFileOwner() {\n\t\treturn this._share.displayname_file_owner\n\t\t\t|| this._share.uid_file_owner\n\t}\n\n\t// TIME DATA ----------------------------------------------------\n\t/**\n\t * Get the share creation timestamp\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget createdTime() {\n\t\treturn this._share.stime\n\t}\n\n\t/**\n\t * Get the expiration date\n\t *\n\t * @return {string} date with YYYY-MM-DD format\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget expireDate() {\n\t\treturn this._share.expiration\n\t}\n\n\t/**\n\t * Set the expiration date\n\t *\n\t * @param {string} date the share expiration date with YYYY-MM-DD format\n\t * @memberof Share\n\t */\n\tset expireDate(date) {\n\t\tthis._share.expiration = date\n\t}\n\n\t// EXTRA DATA ---------------------------------------------------\n\t/**\n\t * Get the public share token\n\t *\n\t * @return {string} the token\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget token() {\n\t\treturn this._share.token\n\t}\n\n\t/**\n\t * Get the share note if any\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget note() {\n\t\treturn this._share.note\n\t}\n\n\t/**\n\t * Set the share note if any\n\t *\n\t * @param {string} note the note\n\t * @memberof Share\n\t */\n\tset note(note) {\n\t\tthis._share.note = note\n\t}\n\n\t/**\n\t * Get the share label if any\n\t * Should only exist on link shares\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget label() {\n\t\treturn this._share.label ?? ''\n\t}\n\n\t/**\n\t * Set the share label if any\n\t * Should only be set on link shares\n\t *\n\t * @param {string} label the label\n\t * @memberof Share\n\t */\n\tset label(label) {\n\t\tthis._share.label = label\n\t}\n\n\t/**\n\t * Have a mail been sent\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget mailSend() {\n\t\treturn this._share.mail_send === true\n\t}\n\n\t/**\n\t * Hide the download button on public page\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hideDownload() {\n\t\treturn this._share.hide_download === true\n\t}\n\n\t/**\n\t * Hide the download button on public page\n\t *\n\t * @param {boolean} state hide the button ?\n\t * @memberof Share\n\t */\n\tset hideDownload(state) {\n\t\tthis._share.hide_download = state === true\n\t}\n\n\t/**\n\t * Password protection of the share\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget password() {\n\t\treturn this._share.password\n\t}\n\n\t/**\n\t * Password protection of the share\n\t *\n\t * @param {string} password the share password\n\t * @memberof Share\n\t */\n\tset password(password) {\n\t\tthis._share.password = password\n\t}\n\n\t/**\n\t * Password expiration time\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget passwordExpirationTime() {\n\t\treturn this._share.password_expiration_time\n\t}\n\n\t/**\n\t * Password expiration time\n\t *\n\t * @param {string} password expiration time\n\t * @memberof Share\n\t */\n\tset passwordExpirationTime(passwordExpirationTime) {\n\t\tthis._share.password_expiration_time = passwordExpirationTime\n\t}\n\n\t/**\n\t * Password protection by Talk of the share\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget sendPasswordByTalk() {\n\t\treturn this._share.send_password_by_talk\n\t}\n\n\t/**\n\t * Password protection by Talk of the share\n\t *\n\t * @param {boolean} sendPasswordByTalk whether to send the password by Talk\n\t *        or not\n\t * @memberof Share\n\t */\n\tset sendPasswordByTalk(sendPasswordByTalk) {\n\t\tthis._share.send_password_by_talk = sendPasswordByTalk\n\t}\n\n\t// SHARED ITEM DATA ---------------------------------------------\n\t/**\n\t * Get the shared item absolute full path\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget path() {\n\t\treturn this._share.path\n\t}\n\n\t/**\n\t * Return the item type: file or folder\n\t *\n\t * @return {string} 'folder' or 'file'\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget itemType() {\n\t\treturn this._share.item_type\n\t}\n\n\t/**\n\t * Get the shared item mimetype\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget mimetype() {\n\t\treturn this._share.mimetype\n\t}\n\n\t/**\n\t * Get the shared item id\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget fileSource() {\n\t\treturn this._share.file_source\n\t}\n\n\t/**\n\t * Get the target path on the receiving end\n\t * e.g the file /xxx/aaa will be shared in\n\t * the receiving root as /aaa, the fileTarget is /aaa\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget fileTarget() {\n\t\treturn this._share.file_target\n\t}\n\n\t/**\n\t * Get the parent folder id if any\n\t *\n\t * @return {number}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget fileParent() {\n\t\treturn this._share.file_parent\n\t}\n\n\t// PERMISSIONS Shortcuts\n\n\t/**\n\t * Does this share have READ permissions\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hasReadPermission() {\n\t\treturn !!((this.permissions & OC.PERMISSION_READ))\n\t}\n\n\t/**\n\t * Does this share have CREATE permissions\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hasCreatePermission() {\n\t\treturn !!((this.permissions & OC.PERMISSION_CREATE))\n\t}\n\n\t/**\n\t * Does this share have DELETE permissions\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hasDeletePermission() {\n\t\treturn !!((this.permissions & OC.PERMISSION_DELETE))\n\t}\n\n\t/**\n\t * Does this share have UPDATE permissions\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hasUpdatePermission() {\n\t\treturn !!((this.permissions & OC.PERMISSION_UPDATE))\n\t}\n\n\t/**\n\t * Does this share have SHARE permissions\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hasSharePermission() {\n\t\treturn !!((this.permissions & OC.PERMISSION_SHARE))\n\t}\n\n\t/**\n\t * Does this share have download permissions\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget hasDownloadPermission() {\n\t\tfor (const i in this._share.attributes) {\n\t\t\tconst attr = this._share.attributes[i]\n\t\t\tif (attr.scope === 'permissions' && attr.key === 'download') {\n\t\t\t\treturn attr.enabled\n\t\t\t}\n\t\t}\n\n\t\treturn true\n\t}\n\n\tset hasDownloadPermission(enabled) {\n\t\tthis.setAttribute('permissions', 'download', !!enabled)\n\t}\n\n\tsetAttribute(scope, key, enabled) {\n\t\tconst attrUpdate = {\n\t\t\tscope,\n\t\t\tkey,\n\t\t\tenabled,\n\t\t}\n\n\t\t// try and replace existing\n\t\tfor (const i in this._share.attributes) {\n\t\t\tconst attr = this._share.attributes[i]\n\t\t\tif (attr.scope === attrUpdate.scope && attr.key === attrUpdate.key) {\n\t\t\t\tthis._share.attributes.splice(i, 1, attrUpdate)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tthis._share.attributes.push(attrUpdate)\n\t}\n\n\t// PERMISSIONS Shortcuts for the CURRENT USER\n\t// ! the permissions above are the share settings,\n\t// ! meaning the permissions for the recipient\n\t/**\n\t * Can the current user EDIT this share ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget canEdit() {\n\t\treturn this._share.can_edit === true\n\t}\n\n\t/**\n\t * Can the current user DELETE this share ?\n\t *\n\t * @return {boolean}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget canDelete() {\n\t\treturn this._share.can_delete === true\n\t}\n\n\t/**\n\t * Top level accessible shared folder fileid for the current user\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget viaFileid() {\n\t\treturn this._share.via_fileid\n\t}\n\n\t/**\n\t * Top level accessible shared folder path for the current user\n\t *\n\t * @return {string}\n\t * @readonly\n\t * @memberof Share\n\t */\n\tget viaPath() {\n\t\treturn this._share.via_path\n\t}\n\n\t// TODO: SORT THOSE PROPERTIES\n\n\tget parent() {\n\t\treturn this._share.parent\n\t}\n\n\tget storageId() {\n\t\treturn this._share.storage_id\n\t}\n\n\tget storage() {\n\t\treturn this._share.storage\n\t}\n\n\tget itemSource() {\n\t\treturn this._share.item_source\n\t}\n\n\tget status() {\n\t\treturn this._share.status\n\t}\n\n}\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Type as ShareTypes } from '@nextcloud/sharing'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tSHARE_TYPES: ShareTypes,\n\t\t}\n\t},\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('SharingEntrySimple',{ref:\"shareEntrySimple\",staticClass:\"sharing-entry__internal\",attrs:{\"title\":_vm.t('files_sharing', 'Internal link'),\"subtitle\":_vm.internalLinkSubtitle},scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('div',{staticClass:\"avatar-external icon-external-white\"})]},proxy:true}])},[_vm._v(\" \"),_c('NcActionLink',{attrs:{\"href\":_vm.internalLink,\"aria-label\":_vm.copyLinkTooltip,\"title\":_vm.copyLinkTooltip,\"target\":\"_blank\",\"icon\":_vm.copied && _vm.copySuccess ? 'icon-checkmark-color' : 'icon-clippy'},on:{\"click\":function($event){$event.preventDefault();return _vm.copyLink.apply(null, arguments)}}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<li class=\"sharing-entry\">\n\t\t<slot name=\"avatar\" />\n\t\t<div class=\"sharing-entry__desc\">\n\t\t\t<span class=\"sharing-entry__title\">{{ title }}</span>\n\t\t\t<p v-if=\"subtitle\">\n\t\t\t\t{{ subtitle }}\n\t\t\t</p>\n\t\t</div>\n\t\t<NcActions v-if=\"$slots['default']\"\n\t\t\tref=\"actionsComponent\"\n\t\t\tclass=\"sharing-entry__actions\"\n\t\t\tmenu-align=\"right\"\n\t\t\t:aria-expanded=\"ariaExpandedValue\">\n\t\t\t<slot />\n\t\t</NcActions>\n\t</li>\n</template>\n\n<script>\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions.js'\n\nexport default {\n\tname: 'SharingEntrySimple',\n\n\tcomponents: {\n\t\tNcActions,\n\t},\n\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: true,\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tisUnique: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tariaExpanded: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tariaExpandedValue() {\n\t\t\tif (this.ariaExpanded === null) {\n\t\t\t\treturn this.ariaExpanded\n\t\t\t}\n\t\t\treturn this.ariaExpanded ? 'true' : 'false'\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tline-height: 1.2em;\n\t\tposition: relative;\n\t\tflex: 1 1;\n\t\tmin-width: 0;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__title {\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\tmax-width: inherit;\n\t}\n\t&__actions {\n\t\tmargin-left: auto !important;\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=style&index=0&id=1852ea78&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntrySimple.vue?vue&type=style&index=0&id=1852ea78&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntrySimple.vue?vue&type=template&id=1852ea78&scoped=true\"\nimport script from \"./SharingEntrySimple.vue?vue&type=script&lang=js\"\nexport * from \"./SharingEntrySimple.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingEntrySimple.vue?vue&type=style&index=0&id=1852ea78&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1852ea78\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"sharing-entry\"},[_vm._t(\"avatar\"),_vm._v(\" \"),_c('div',{staticClass:\"sharing-entry__desc\"},[_c('span',{staticClass:\"sharing-entry__title\"},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),(_vm.subtitle)?_c('p',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.subtitle)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.$slots['default'])?_c('NcActions',{ref:\"actionsComponent\",staticClass:\"sharing-entry__actions\",attrs:{\"menu-align\":\"right\",\"aria-expanded\":_vm.ariaExpandedValue}},[_vm._t(\"default\")],2):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n\t<ul>\n\t\t<SharingEntrySimple ref=\"shareEntrySimple\"\n\t\t\tclass=\"sharing-entry__internal\"\n\t\t\t:title=\"t('files_sharing', 'Internal link')\"\n\t\t\t:subtitle=\"internalLinkSubtitle\">\n\t\t\t<template #avatar>\n\t\t\t\t<div class=\"avatar-external icon-external-white\" />\n\t\t\t</template>\n\n\t\t\t<NcActionLink :href=\"internalLink\"\n\t\t\t\t:aria-label=\"copyLinkTooltip\"\n\t\t\t\t:title=\"copyLinkTooltip\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\t:icon=\"copied && copySuccess ? 'icon-checkmark-color' : 'icon-clippy'\"\n\t\t\t\t@click.prevent=\"copyLink\" />\n\t\t</SharingEntrySimple>\n\t</ul>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { showSuccess } from '@nextcloud/dialogs'\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink.js'\nimport SharingEntrySimple from './SharingEntrySimple.vue'\n\nexport default {\n\tname: 'SharingEntryInternal',\n\n\tcomponents: {\n\t\tNcActionLink,\n\t\tSharingEntrySimple,\n\t},\n\n\tprops: {\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tcopied: false,\n\t\t\tcopySuccess: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Get the internal link to this file id\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tinternalLink() {\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl('/f/') + this.fileInfo.id\n\t\t},\n\n\t\t/**\n\t\t * Tooltip message\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tcopyLinkTooltip() {\n\t\t\tif (this.copied) {\n\t\t\t\tif (this.copySuccess) {\n\t\t\t\t\treturn ''\n\t\t\t\t}\n\t\t\t\treturn t('files_sharing', 'Cannot copy, please copy the link manually')\n\t\t\t}\n\t\t\treturn t('files_sharing', 'Copy internal link to clipboard')\n\t\t},\n\n\t\tinternalLinkSubtitle() {\n\t\t\tif (this.fileInfo.type === 'dir') {\n\t\t\t\treturn t('files_sharing', 'Only works for users with access to this folder')\n\t\t\t}\n\t\t\treturn t('files_sharing', 'Only works for users with access to this file')\n\t\t},\n\t},\n\n\tmethods: {\n\t\tasync copyLink() {\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText(this.internalLink)\n\t\t\t\tshowSuccess(t('files_sharing', 'Link copied'))\n\t\t\t\t// focus and show the tooltip (note: cannot set ref on NcActionLink)\n\t\t\t\tthis.$refs.shareEntrySimple.$refs.actionsComponent.$el.focus()\n\t\t\t\tthis.copySuccess = true\n\t\t\t\tthis.copied = true\n\t\t\t} catch (error) {\n\t\t\t\tthis.copySuccess = false\n\t\t\t\tthis.copied = true\n\t\t\t\tconsole.error(error)\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.copySuccess = false\n\t\t\t\t\tthis.copied = false\n\t\t\t\t}, 4000)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharing-entry__internal {\n\t.avatar-external {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=style&index=0&id=71a426be&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInternal.vue?vue&type=style&index=0&id=71a426be&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryInternal.vue?vue&type=template&id=71a426be&scoped=true\"\nimport script from \"./SharingEntryInternal.vue?vue&type=script&lang=js\"\nexport * from \"./SharingEntryInternal.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingEntryInternal.vue?vue&type=style&index=0&id=71a426be&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71a426be\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcMultiselect',{ref:\"multiselect\",staticClass:\"sharing-input\",attrs:{\"clear-on-select\":true,\"disabled\":!_vm.canReshare,\"hide-selected\":true,\"internal-search\":false,\"loading\":_vm.loading,\"options\":_vm.options,\"placeholder\":_vm.inputPlaceholder,\"preselect-first\":true,\"preserve-search\":true,\"searchable\":true,\"user-select\":true,\"open-direction\":\"below\",\"label\":\"displayName\",\"track-by\":\"id\"},on:{\"search-change\":_vm.asyncFind,\"select\":_vm.addShare},scopedSlots:_vm._u([{key:\"noOptions\",fn:function(){return [_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing', 'No recommendations. Start typing.'))+\"\\n\\t\")]},proxy:true},{key:\"noResult\",fn:function(){return [_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.noResultText)+\"\\n\\t\")]},proxy:true}])},[(!this.isValidQuery)?_c('template',{slot:\"beforeList\"},[_c('li',[_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Recommendations :'))+\"\\n\\t\\t\\t\")])])]):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2021 Recia\n *\n * @author Grégory Brousse <pro@gregory-brousse.fr>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default {\n\tcomputed: {\n\t\tisOpen() {\n\t\t\treturn this.$refs.multiselect.$refs.VueMultiselect.isOpen\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggle() {\n\t\t\tthis.$refs.multiselect.$refs.VueMultiselect.toggle()\n\t\t\tthis.resetScroll()\n\t\t},\n\n\t\tresetScroll() {\n\t\t\tthis.$refs.multiselect.$el.querySelector('.multiselect__content-wrapper').scrollTop = 0\n\t\t},\n\n\t\tgetSearch() {\n\t\t\treturn this.$refs.multiselect.$refs.VueMultiselect.search\n\t\t},\n\n\t\tresetSearch() {\n\t\t\tthis.$refs.multiselect.$refs.VueMultiselect.search = ''\n\t\t},\n\n\t\tselect(option) {\n\t\t\tthis.$refs.multiselect.$refs.VueMultiselect.select(option)\n\t\t},\n\t},\n}\n","/**\n * @copyright Copyright (c) 2020 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport axios from '@nextcloud/axios'\nimport Config from '../services/ConfigService.js'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nconst config = new Config()\n// note: some chars removed on purpose to make them human friendly when read out\nconst passwordSet = 'abcdefgijkmnopqrstwxyzABCDEFGHJKLMNPQRSTWXYZ23456789'\n\n/**\n * Generate a valid policy password or\n * request a valid password if password_policy\n * is enabled\n *\n * @return {string} a valid password\n */\nexport default async function() {\n\t// password policy is enabled, let's request a pass\n\tif (config.passwordPolicy.api && config.passwordPolicy.api.generate) {\n\t\ttry {\n\t\t\tconst request = await axios.get(config.passwordPolicy.api.generate)\n\t\t\tif (request.data.ocs.data.password) {\n\t\t\t\tshowSuccess(t('files_sharing', 'Password created successfully'))\n\t\t\t\treturn request.data.ocs.data.password\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.info('Error generating password from password_policy', error)\n\t\t\tshowError(t('files_sharing', 'Error generating password from password policy'))\n\t\t}\n\t}\n\n\tconst array = new Uint8Array(10)\n\tconst ratio = passwordSet.length / 255\n\tself.crypto.getRandomValues(array)\n\tlet password = ''\n\tfor (let i = 0; i < array.length; i++) {\n\t\tpassword += passwordSet.charAt(array[i] * ratio)\n\t}\n\treturn password\n}\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n * @author Joas Schilling <coding@schilljs.com>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n// TODO: remove when ie not supported\nimport 'url-search-params-polyfill'\n\nimport { generateOcsUrl } from '@nextcloud/router'\nimport axios from '@nextcloud/axios'\nimport Share from '../models/Share.js'\nimport { emit } from '@nextcloud/event-bus'\n\nconst shareUrl = generateOcsUrl('apps/files_sharing/api/v1/shares')\n\nexport default {\n\tmethods: {\n\t\t/**\n\t\t * Create a new share\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {string} data.path  path to the file/folder which should be shared\n\t\t * @param {number} data.shareType  0 = user; 1 = group; 3 = public link; 6 = federated cloud share\n\t\t * @param {string} data.shareWith  user/group id with which the file should be shared (optional for shareType > 1)\n\t\t * @param {boolean} [data.publicUpload]  allow public upload to a public shared folder\n\t\t * @param {string} [data.password]  password to protect public link Share with\n\t\t * @param {number} [data.permissions]  1 = read; 2 = update; 4 = create; 8 = delete; 16 = share; 31 = all (default: 31, for public shares: 1)\n\t\t * @param {boolean} [data.sendPasswordByTalk] send the password via a talk conversation\n\t\t * @param {string} [data.expireDate] expire the shareautomatically after\n\t\t * @param {string} [data.label] custom label\n\t\t * @param {string} [data.attributes] Share attributes encoded as json\n\t\t * @param data.note\n\t\t * @return {Share} the new share\n\t\t * @throws {Error}\n\t\t */\n\t\tasync createShare({ path, permissions, shareType, shareWith, publicUpload, password, sendPasswordByTalk, expireDate, label, note, attributes }) {\n\t\t\ttry {\n\t\t\t\tconst request = await axios.post(shareUrl, { path, permissions, shareType, shareWith, publicUpload, password, sendPasswordByTalk, expireDate, label, note, attributes })\n\t\t\t\tif (!request?.data?.ocs) {\n\t\t\t\t\tthrow request\n\t\t\t\t}\n\t\t\t\tconst share = new Share(request.data.ocs.data)\n\t\t\t\temit('files_sharing:share:created', { share })\n\t\t\t\treturn share\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error while creating share', error)\n\t\t\t\tconst errorMessage = error?.response?.data?.ocs?.meta?.message\n\t\t\t\tOC.Notification.showTemporary(\n\t\t\t\t\terrorMessage ? t('files_sharing', 'Error creating the share: {errorMessage}', { errorMessage }) : t('files_sharing', 'Error creating the share'),\n\t\t\t\t\t{ type: 'error' },\n\t\t\t\t)\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Delete a share\n\t\t *\n\t\t * @param {number} id share id\n\t\t * @throws {Error}\n\t\t */\n\t\tasync deleteShare(id) {\n\t\t\ttry {\n\t\t\t\tconst request = await axios.delete(shareUrl + `/${id}`)\n\t\t\t\tif (!request?.data?.ocs) {\n\t\t\t\t\tthrow request\n\t\t\t\t}\n\t\t\t\temit('files_sharing:share:deleted', { id })\n\t\t\t\treturn true\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error while deleting share', error)\n\t\t\t\tconst errorMessage = error?.response?.data?.ocs?.meta?.message\n\t\t\t\tOC.Notification.showTemporary(\n\t\t\t\t\terrorMessage ? t('files_sharing', 'Error deleting the share: {errorMessage}', { errorMessage }) : t('files_sharing', 'Error deleting the share'),\n\t\t\t\t\t{ type: 'error' },\n\t\t\t\t)\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update a share\n\t\t *\n\t\t * @param {number} id share id\n\t\t * @param {object} properties key-value object of the properties to update\n\t\t */\n\t\tasync updateShare(id, properties) {\n\t\t\ttry {\n\t\t\t\tconst request = await axios.put(shareUrl + `/${id}`, properties)\n\t\t\t\temit('files_sharing:share:updated', { id })\n\t\t\t\tif (!request?.data?.ocs) {\n\t\t\t\t\tthrow request\n\t\t\t\t} else {\n\t\t\t\t\treturn request.data.ocs.data\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error while updating share', error)\n\t\t\t\tif (error.response.status !== 400) {\n\t\t\t\t\tconst errorMessage = error?.response?.data?.ocs?.meta?.message\n\t\t\t\t\tOC.Notification.showTemporary(\n\t\t\t\t\t\terrorMessage ? t('files_sharing', 'Error updating the share: {errorMessage}', { errorMessage }) : t('files_sharing', 'Error updating the share'),\n\t\t\t\t\t\t{ type: 'error' },\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tconst message = error.response.data.ocs.meta.message\n\t\t\t\tthrow new Error(message)\n\t\t\t}\n\t\t},\n\t},\n}\n","<!--\n  - @copyright Copyright (c) 2021 Recia\n  -\n  - @author Grégory Brousse <pro@gregory-brousse.fr>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NcMultiselect ref=\"multiselect\"\n\t\tclass=\"sharing-input\"\n\t\t:clear-on-select=\"true\"\n\t\t:disabled=\"!canReshare\"\n\t\t:hide-selected=\"true\"\n\t\t:internal-search=\"false\"\n\t\t:loading=\"loading\"\n\t\t:options=\"options\"\n\t\t:placeholder=\"inputPlaceholder\"\n\t\t:preselect-first=\"true\"\n\t\t:preserve-search=\"true\"\n\t\t:searchable=\"true\"\n\t\t:user-select=\"true\"\n\t\topen-direction=\"below\"\n\t\tlabel=\"displayName\"\n\t\ttrack-by=\"id\"\n\t\t@search-change=\"asyncFind\"\n\t\t@select=\"addShare\">\n\t\t<template slot=\"beforeList\" v-if=\"!this.isValidQuery\">\n\t\t\t<li>\n\t\t\t\t<span>\n\t\t\t\t\t{{ t('files_sharing', 'Recommendations :') }}\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</template>\n\t\t<template #noOptions>\n\t\t\t{{ t('files_sharing', 'No recommendations. Start typing.') }}\n\t\t</template>\n\t\t<template #noResult>\n\t\t\t{{ noResultText }}\n\t\t</template>\n\t</NcMultiselect>\n</template>\n\n<script>\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport axios from '@nextcloud/axios'\nimport debounce from 'debounce'\nimport NcMultiselect from '@nextcloud/vue/dist/Components/NcMultiselect'\nimport MultiselectMixin from '../mixins/MultiselectMixin'\n\nimport Config from '../services/ConfigService'\nimport GeneratePassword from '../utils/GeneratePassword'\nimport Share from '../models/Share'\nimport ShareRequests from '../mixins/ShareRequests'\nimport ShareTypes from '../mixins/ShareTypes'\n\nconst CancelToken = axios.CancelToken\nlet searchCancelSource = null\n\nexport default {\n\tname: 'SharingInputRecia',\n\n\tcomponents: {\n\t\tNcMultiselect,\n\t},\n\n\tmixins: [ShareTypes, ShareRequests, MultiselectMixin],\n\n\tprops: {\n\t\tshares: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t\trequired: true,\n\t\t},\n\t\tlinkShares: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t\trequired: true,\n\t\t},\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t\trequired: true,\n\t\t},\n\t\treshare: {\n\t\t\ttype: Share,\n\t\t\tdefault: null,\n\t\t},\n\t\tcanReshare: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t\tvalidator: searchType => ['all', 'etab'].includes(searchType),\n\t\t},\n\t\tsearchEtabs: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tconfig: new Config(),\n\t\t\tloading: false,\n\t\t\tquery: '',\n\t\t\trecommendations: [],\n\t\t\tShareSearch: OCA.Sharing.ShareSearch.state,\n\t\t\tsuggestions: [],\n\t\t\tvalue: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Implement ShareSearch\n\t\t * allows external appas to inject new\n\t\t * results into the autocomplete dropdown\n\t\t * Used for the guests app\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\texternalResults() {\n\t\t\treturn this.ShareSearch.results\n\t\t},\n\t\tinputPlaceholder() {\n\t\t\tconst allowRemoteSharing = this.config.isRemoteShareAllowed\n\n\t\t\tif (!this.canReshare) {\n\t\t\t\treturn t('files_sharing', 'Resharing is not allowed')\n\t\t\t}\n\t\t\t// We can always search with email addresses for users too\n\t\t\tif (!allowRemoteSharing) {\n\t\t\t\treturn t('files_sharing', 'Name or email …')\n\t\t\t}\n\n\t\t\treturn t('files_sharing', 'Name, email, or Federated Cloud ID …')\n\t\t},\n\n\t\tisValidQuery() {\n\t\t\treturn this.query && this.query.trim() !== '' && this.query.length > this.config.minSearchStringLength\n\t\t},\n\n\t\toptions() {\n\t\t\tif (this.isValidQuery) {\n\t\t\t\treturn this.suggestions\n\t\t\t}\n\t\t\treturn this.recommendations\n\t\t},\n\n\t\tnoResultText() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn t('files_sharing', 'Searching …')\n\t\t\t}\n\t\t\treturn t('files_sharing', 'No elements found.')\n\t\t},\n\t},\n\n\twatch: {\n\t\tsearchType(val, oldval) {\n\t\t\tthis.reset()\n\t\t},\n\t\tsearchEtabs(val, oldval) {\n\t\t\tthis.asyncFind(this.query)\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.getRecommendations()\n\t},\n\n\tmethods: {\n\t\tasync asyncFind(query) {\n\t\t\t// save current query to check if we display\n\t\t\t// recommendations or search results\n\t\t\tthis.query = query.trim()\n\t\t\tif (this.isValidQuery) {\n\t\t\t\t// start loading now to have proper ux feedback\n\t\t\t\t// during the debounce\n\t\t\t\tthis.loading = true\n\t\t\t\tif (this.searchType === 'etab' && this.searchEtabs.filter(i => i).length >= 1) {\n\t\t\t\t\tawait this.debounceGetReciaSuggestions(query)\n\t\t\t\t} else {\n\t\t\t\t\tawait this.debounceGetSuggestions(query)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get suggestions\n\t\t *\n\t\t * @param {string} search the search query\n\t\t * @param {boolean} [lookup=false] search on lookup server\n\t\t */\n\t\tasync getSuggestions(search, lookup = false) {\n\t\t\tthis.loading = true\n\n\t\t\tif (OC.getCapabilities().files_sharing.sharee.query_lookup_default === true) {\n\t\t\t\tlookup = true\n\t\t\t}\n\n\t\t\tconst shareType = [\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_USER,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_GROUP,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_REMOTE,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_CIRCLE,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_ROOM,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_GUEST,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_DECK,\n\t\t\t\tthis.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH,\n\t\t\t]\n\n\t\t\tif (OC.getCapabilities().files_sharing.public.enabled === true) {\n\t\t\t\tshareType.push(this.SHARE_TYPES.SHARE_TYPE_EMAIL)\n\t\t\t}\n\n\t\t\tif (searchCancelSource) {\n\t\t\t\tsearchCancelSource.cancel('Canceled')\n\t\t\t}\n\t\t\tsearchCancelSource = CancelToken.source()\n\n\t\t\tlet request = null\n\t\t\ttry {\n\t\t\t\trequest = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/sharees'), {\n\t\t\t\t\tcancelToken: searchCancelSource.token,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tformat: 'json',\n\t\t\t\t\t\titemType: this.fileInfo.type === 'dir' ? 'folder' : 'file',\n\t\t\t\t\t\tsearch,\n\t\t\t\t\t\tlookup,\n\t\t\t\t\t\tperPage: this.config.maxAutocompleteResults,\n\t\t\t\t\t\tshareType,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tif (error.message === 'Canceled') {\n\t\t\t\t\tconsole.debug('Cancel fetching suggestions', error)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('Error fetching suggestions', error)\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst data = request.data.ocs.data\n\t\t\tconst exact = request.data.ocs.data.exact\n\t\t\tdata.exact = [] // removing exact from general results\n\n\t\t\t// flatten array of arrays\n\t\t\tconst rawExactSuggestions = Object.values(exact).reduce((arr, elem) => arr.concat(elem), [])\n\t\t\tconst rawSuggestions = Object.values(data).reduce((arr, elem) => arr.concat(elem), [])\n\n\t\t\t// remove invalid data and format to user-select layout\n\t\t\tconst exactSuggestions = this.filterOutExistingShares(rawExactSuggestions)\n\t\t\t\t.map(share => this.formatForMultiselect(share))\n\t\t\t\t// sort by type so we can get user&groups first...\n\t\t\t\t.sort((a, b) => a.shareType - b.shareType)\n\t\t\tconst suggestions = this.filterOutExistingShares(rawSuggestions)\n\t\t\t\t.map(share => this.formatForMultiselect(share))\n\t\t\t\t// sort by type so we can get user&groups first...\n\t\t\t\t.sort((a, b) => a.shareType - b.shareType)\n\n\t\t\t// lookup clickable entry\n\t\t\t// show if enabled and not already requested\n\t\t\tconst lookupEntry = []\n\t\t\t/*\n\t\t\tif (data.lookupEnabled && !lookup) {\n\t\t\t\tlookupEntry.push({\n\t\t\t\t\tid: 'global-lookup',\n\t\t\t\t\tisNoUser: true,\n\t\t\t\t\tdisplayName: t('files_sharing', 'Search globally'),\n\t\t\t\t\tlookup: true,\n\t\t\t\t})\n\t\t\t}\n\t\t\t*/\n\n\t\t\t// if there is a condition specified, filter it\n\t\t\tconst externalResults = this.externalResults.filter(result => !result.condition || result.condition(this))\n\n\t\t\tconst allSuggestions = exactSuggestions.concat(suggestions).concat(externalResults).concat(lookupEntry)\n\n\t\t\t// Count occurences of display names in order to provide a distinguishable description if needed\n\t\t\tconst nameCounts = allSuggestions.reduce((nameCounts, result) => {\n\t\t\t\tif (!result.displayName) {\n\t\t\t\t\treturn nameCounts\n\t\t\t\t}\n\t\t\t\tif (!nameCounts[result.displayName]) {\n\t\t\t\t\tnameCounts[result.displayName] = 0\n\t\t\t\t}\n\t\t\t\tnameCounts[result.displayName]++\n\t\t\t\treturn nameCounts\n\t\t\t}, {})\n\n\t\t\tthis.suggestions = allSuggestions.map(item => {\n\t\t\t\t// Make sure that items with duplicate displayName get the shareWith applied as a description\n\t\t\t\tif (nameCounts[item.displayName] > 1 && !item.desc) {\n\t\t\t\t\treturn { ...item, desc: item.shareWithDisplayNameUnique }\n\t\t\t\t}\n\t\t\t\treturn item\n\t\t\t})\n\n\t\t\tthis.loading = false\n\t\t\tconsole.info('suggestions', this.suggestions)\n\t\t},\n\n\t\t/**\n\t\t * Debounce getSuggestions\n\t\t *\n\t\t * @param {...*} args the arguments\n\t\t */\n\t\tdebounceGetSuggestions: debounce(function(...args) {\n\t\t\tthis.getSuggestions(...args)\n\t\t}, 500),\n\n\t\t/**\n\t\t * Get suggestions\n\t\t *\n\t\t * @param {string} search the search query\n\t\t */\n\t\tasync getReciaSuggestions(search) {\n\t\t\tthis.loading = true\n\n\t\t\tif (searchCancelSource) {\n\t\t\t\tsearchCancelSource.cancel('Canceled')\n\t\t\t}\n\n\t\t\tsearchCancelSource = CancelToken.source()\n\n\t\t\tlet request = null\n\t\t\ttry {\n\t\t\t\trequest = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/recia_search'), {\n\t\t\t\t\tcancelToken: searchCancelSource.token,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tformat: 'json',\n\t\t\t\t\t\titemType: this.fileInfo.type === 'dir' ? 'folder' : 'file',\n\t\t\t\t\t\tsearch,\n\t\t\t\t\t\tetabs: this.searchEtabs,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tif (error.message === 'Canceled') {\n\t\t\t\t\tconsole.debug('Cancel fetching suggestions', error)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('Error fetching suggestions', error)\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst data = request.data.ocs.data\n\t\t\tconst exact = request.data.ocs.data.exact\n\t\t\tdata.exact = [] // removing exact from general results\n\n\t\t\t// flatten array of arrays\n\t\t\tconst rawExactSuggestions = Object.values(exact).reduce((arr, elem) => arr.concat(elem), [])\n\t\t\tconst rawSuggestions = Object.values(data).reduce((arr, elem) => arr.concat(elem), [])\n\n\t\t\t// remove invalid data and format to user-select layout\n\t\t\tconst exactSuggestions = this.filterOutExistingShares(rawExactSuggestions)\n\t\t\t\t.map(share => this.formatForMultiselect(share))\n\t\t\t\t// sort by type so we can get user&groups first...\n\t\t\t\t.sort((a, b) => a.shareType - b.shareType)\n\t\t\tconst suggestions = this.filterOutExistingShares(rawSuggestions)\n\t\t\t\t.map(share => this.formatForMultiselect(share))\n\t\t\t\t// sort by type so we can get user&groups first...\n\t\t\t\t.sort((a, b) => a.shareType - b.shareType)\n\n\t\t\t// if there is a condition specified, filter it\n\t\t\tconst externalResults = this.externalResults.filter(result => !result.condition || result.condition(this))\n\n\t\t\tconst allSuggestions = exactSuggestions.concat(suggestions).concat(externalResults)\n\n\t\t\t// Count occurances of display names in order to provide a distinguishable description if needed\n\t\t\tconst nameCounts = allSuggestions.reduce((nameCounts, result) => {\n\t\t\t\tif (!result.displayName) {\n\t\t\t\t\treturn nameCounts\n\t\t\t\t}\n\t\t\t\tif (!nameCounts[result.displayName]) {\n\t\t\t\t\tnameCounts[result.displayName] = 0\n\t\t\t\t}\n\t\t\t\tnameCounts[result.displayName]++\n\t\t\t\treturn nameCounts\n\t\t\t}, {})\n\n\t\t\tthis.suggestions = allSuggestions.map(item => {\n\t\t\t\t// Make sure that items with duplicate displayName get the shareWith applied as a description\n\t\t\t\tif (nameCounts[item.displayName] > 1 && !item.desc) {\n\t\t\t\t\treturn { ...item, desc: item.shareWithDisplayNameUnique }\n\t\t\t\t}\n\t\t\t\treturn item\n\t\t\t})\n\n\t\t\tthis.loading = false\n\t\t},\n\n\t\t/**\n\t\t * Debounce getSuggestions\n\t\t *\n\t\t * @param {...*} args the arguments\n\t\t */\n\t\tdebounceGetReciaSuggestions: debounce(function(...args) {\n\t\t\tthis.getReciaSuggestions(...args)\n\t\t}, 500),\n\n\t\t/**\n\t\t * Get the sharing recommendations\n\t\t */\n\t\tasync getRecommendations() {\n\t\t\tthis.loading = true\n\n\t\t\tlet request = null\n\t\t\ttry {\n\t\t\t\trequest = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/sharees_recommended'), {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tformat: 'json',\n\t\t\t\t\t\titemType: this.fileInfo.type,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching recommendations', error)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Add external results from the OCA.Sharing.ShareSearch api\n\t\t\tconst externalResults = this.externalResults.filter(result => !result.condition || result.condition(this))\n\n\t\t\t// flatten array of arrays\n\t\t\tconst rawRecommendations = Object.values(request.data.ocs.data.exact)\n\t\t\t\t.reduce((arr, elem) => arr.concat(elem), [])\n\n\t\t\t// remove invalid data and format to user-select layout\n\t\t\tthis.recommendations = this.filterOutExistingShares(rawRecommendations)\n\t\t\t\t.map(share => this.formatForMultiselect(share))\n\t\t\t\t.concat(externalResults)\n\n\t\t\tthis.loading = false\n\t\t\tconsole.info('recommendations', this.recommendations)\n\t\t},\n\n\t\t/**\n\t\t * Filter out existing shares from\n\t\t * the provided shares search results\n\t\t *\n\t\t * @param {object[]} shares the array of shares object\n\t\t * @return {object[]}\n\t\t */\n\t\tfilterOutExistingShares(shares) {\n\t\t\treturn shares.reduce((arr, share) => {\n\t\t\t\t// only check proper objects\n\t\t\t\tif (typeof share !== 'object') {\n\t\t\t\t\treturn arr\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tif (share.value.shareType === this.SHARE_TYPES.SHARE_TYPE_USER) {\n\t\t\t\t\t\t// filter out current user\n\t\t\t\t\t\tif (share.value.shareWith === getCurrentUser().uid) {\n\t\t\t\t\t\t\treturn arr\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// filter out the owner of the share\n\t\t\t\t\t\tif (this.reshare && share.value.shareWith === this.reshare.owner) {\n\t\t\t\t\t\t\treturn arr\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// filter out existing mail shares\n\t\t\t\t\tif (share.value.shareType === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\n\t\t\t\t\t\tconst emails = this.linkShares.map(elem => elem.shareWith)\n\t\t\t\t\t\tif (emails.indexOf(share.value.shareWith.trim()) !== -1) {\n\t\t\t\t\t\t\treturn arr\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { // filter out existing shares\n\t\t\t\t\t\t// creating an object of uid => type\n\t\t\t\t\t\tconst sharesObj = this.shares.reduce((obj, elem) => {\n\t\t\t\t\t\t\tobj[elem.shareWith] = elem.type\n\t\t\t\t\t\t\treturn obj\n\t\t\t\t\t\t}, {})\n\n\t\t\t\t\t\t// if shareWith is the same and the share type too, ignore it\n\t\t\t\t\t\tconst key = share.value.shareWith.trim()\n\t\t\t\t\t\tif (key in sharesObj\n\t\t\t\t\t\t\t&& sharesObj[key] === share.value.shareType) {\n\t\t\t\t\t\t\treturn arr\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// ALL GOOD\n\t\t\t\t\t// let's add the suggestion\n\t\t\t\t\tarr.push(share)\n\t\t\t\t} catch {\n\t\t\t\t\treturn arr\n\t\t\t\t}\n\t\t\t\treturn arr\n\t\t\t}, [])\n\t\t},\n\n\t\t/**\n\t\t * Get the icon based on the share type\n\t\t *\n\t\t * @param {number} type the share type\n\t\t * @return {string} the icon class\n\t\t */\n\t\tshareTypeToIcon(type) {\n\t\t\tswitch (type) {\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_GUEST:\n\t\t\t\t// default is a user, other icons are here to differentiate\n\t\t\t\t// themselves from it, so let's not display the user icon\n\t\t\t\t// case this.SHARE_TYPES.SHARE_TYPE_REMOTE:\n\t\t\t\t// case this.SHARE_TYPES.SHARE_TYPE_USER:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-user',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Guest'),\n\t\t\t\t}\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_GROUP:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-group',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Group'),\n\t\t\t\t}\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_EMAIL:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-mail',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Email'),\n\t\t\t\t}\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_CIRCLE:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-circle',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Circle'),\n\t\t\t\t}\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_ROOM:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-room',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Talk conversation'),\n\t\t\t\t}\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_DECK:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-deck',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Deck board'),\n\t\t\t\t}\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH:\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-sciencemesh',\n\t\t\t\t\ticonTitle: t('files_sharing', 'Science Mesh'),\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn {}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Format shares for the multiselect options\n\t\t *\n\t\t * @param {object} result select entry item\n\t\t * @return {object}\n\t\t */\n\t\tformatForMultiselect(result) {\n\t\t\tlet subtitle\n\t\t\tif (result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_USER && this.config.shouldAlwaysShowUnique) {\n\t\t\t\tsubtitle = result.shareWithDisplayNameUnique ?? ''\n\t\t\t} else if ((result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_REMOTE\n\t\t\t\t\t|| result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP\n\t\t\t) && result.value.server) {\n\t\t\t\tsubtitle = t('files_sharing', 'on {server}', { server: result.value.server })\n\t\t\t} else if (result.value.shareType === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\n\t\t\t\tsubtitle = result.value.shareWith\n\t\t\t} else {\n\t\t\t\tsubtitle = result.shareWithDescription ?? ''\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tid: `${result.value.shareType}-${result.value.shareWith}`,\n\t\t\t\tshareWith: result.value.shareWith,\n\t\t\t\tshareType: result.value.shareType,\n\t\t\t\tuser: result.uuid || result.value.shareWith,\n\t\t\t\tisNoUser: result.value.shareType !== this.SHARE_TYPES.SHARE_TYPE_USER,\n\t\t\t\tdisplayName: result.name || result.label,\n\t\t\t\tsubtitle,\n\t\t\t\tshareWithDisplayNameUnique: result.shareWithDisplayNameUnique || '',\n\t\t\t\t...this.shareTypeToIcon(result.value.shareType),\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Process the new share request\n\t\t *\n\t\t * @param {object} value the multiselect option\n\t\t */\n\t\tasync addShare(value) {\n\t\t\tthis.value = null\n\t\t\tif (value.lookup) {\n\t\t\t\tawait this.getSuggestions(this.query, true)\n\n\t\t\t\t// focus the input again\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.multiselect.$el.querySelector('.multiselect__input').focus()\n\t\t\t\t})\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\t// TODO: reset the search string when done\n\t\t\t// https://github.com/shentao/vue-multiselect/issues/633\n\n\t\t\t// handle externalResults from OCA.Sharing.ShareSearch\n\t\t\tif (value.handler) {\n\t\t\t\tconst share = await value.handler(this)\n\t\t\t\tthis.$emit('add:share', new Share(share))\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tthis.loading = true\n\t\t\tconsole.debug('Adding a new share from the input for', value)\n\t\t\ttry {\n\t\t\t\tlet password = null\n\n\t\t\t\tif (this.config.enforcePasswordForPublicLink\n\t\t\t\t\t&& value.shareType === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\n\t\t\t\t\tpassword = await GeneratePassword()\n\t\t\t\t}\n\n\t\t\t\tconst path = (this.fileInfo.path + '/' + this.fileInfo.name).replace('//', '/')\n\t\t\t\tconst share = await this.createShare({\n\t\t\t\t\tpath,\n\t\t\t\t\tshareType: value.shareType,\n\t\t\t\t\tshareWith: value.shareWith,\n\t\t\t\t\tpassword,\n\t\t\t\t\tpermissions: this.fileInfo.sharePermissions & OC.getCapabilities().files_sharing.default_permissions,\n\t\t\t\t\tattributes: JSON.stringify(this.fileInfo.shareAttributes),\n\t\t\t\t})\n\n\t\t\t\t// If we had a password, we need to show it to the user as it was generated\n\t\t\t\tif (password) {\n\t\t\t\t\tshare.newPassword = password\n\t\t\t\t\t// Wait for the newly added share\n\t\t\t\t\tconst component = await new Promise(resolve => {\n\t\t\t\t\t\tthis.$emit('add:share', share, resolve)\n\t\t\t\t\t})\n\n\t\t\t\t\t// open the menu on the\n\t\t\t\t\t// freshly created share component\n\t\t\t\t\tcomponent.open = true\n\t\t\t\t} else {\n\t\t\t\t\t// Else we just add it normally\n\t\t\t\t\tthis.$emit('add:share', share)\n\t\t\t\t}\n\n\t\t\t\t// reset the search string when done\n\t\t\t\t// FIXME: https://github.com/shentao/vue-multiselect/issues/633\n\t\t\t\tif (this.$refs.multiselect?.$refs?.VueMultiselect?.search) {\n\t\t\t\t\tthis.$refs.multiselect.$refs.VueMultiselect.search = ''\n\t\t\t\t}\n\n\t\t\t\tawait this.getRecommendations()\n\t\t\t} catch (error) {\n\t\t\t\t// focus back if any error\n\t\t\t\tconst input = this.$refs.multiselect.$el.querySelector('input')\n\t\t\t\tif (input) {\n\t\t\t\t\tinput.focus()\n\t\t\t\t}\n\t\t\t\tthis.query = value.shareWith\n\t\t\t\tconsole.error('Error while adding new share', error)\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\treset() {\n\t\t\tthis.query = ''\n\t\t\tthis.resetSearch()\n\t\t\tthis.suggestions = []\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.sharing-input {\n\twidth: 100%;\n\tmargin: 10px 0;\n\n\t// properly style the lookup entry\n\t.multiselect__option {\n\t\tspan[lookup] {\n\t\t\t.avatardiv {\n\t\t\t\tbackground-image: var(--icon-search-fff);\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-position: center;\n\t\t\t\tbackground-color: var(--color-text-maxcontrast) !important;\n\t\t\t\tdiv {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.list_header{\n\t\tpadding: 5px;\n\t\tcolor: var(--color-text-lighter);\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputRecia.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputRecia.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputRecia.vue?vue&type=style&index=0&id=1b3740c9&prod&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputRecia.vue?vue&type=style&index=0&id=1b3740c9&prod&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingInputRecia.vue?vue&type=template&id=1b3740c9\"\nimport script from \"./SharingInputRecia.vue?vue&type=script&lang=js\"\nexport * from \"./SharingInputRecia.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingInputRecia.vue?vue&type=style&index=0&id=1b3740c9&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('NcMultiselect',{ref:\"multiselect\",staticClass:\"sharing-input-etab\",attrs:{\"track-by\":\"id\",\"label\":\"name\",\"limit\":3,\"custom-label\":_vm.searchLabel,\"loading\":_vm.loading,\"options\":_vm.etabs,\"placeholder\":_vm.inputPlaceholder,\"multiple\":true,\"clear-on-select\":true,\"open-direction\":\"below\"},on:{\"input\":_vm.change,\"search-change\":_vm.saveQuery},scopedSlots:_vm._u([{key:\"option\",fn:function(etab){return [_c('div',{staticClass:\"option__desc\"},[_c('span',{staticClass:\"option__name\",domProps:{\"innerHTML\":_vm._s(_vm.highlight(etab.option.name))}}),_vm._v(\" \"),_c('span',{staticClass:\"option__uai\",domProps:{\"innerHTML\":_vm._s(_vm.highlight(etab.option.uai))}})])]}},{key:\"noResult\",fn:function(){return [_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.noResultText)+\"\\n\\t\\t\")]},proxy:true}]),model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[_vm._v(\" \"),_c('template',{slot:\"beforeList\"},[_c('li',[_c('div',{staticClass:\"option__selectall\"},[_c('span',{attrs:{\"id\":\"btnSelectAll\",\"tabindex\":\"0\",\"role\":\"button\"},on:{\"click\":_vm.selectAll}},[_vm._v(_vm._s(_vm.t('files_sharing', 'Select all')))]),_vm._v(\" \"),_c('span',{attrs:{\"id\":\"btnSelectNone\",\"tabindex\":\"0\",\"role\":\"button\"},on:{\"click\":_vm.deselectAll}},[_vm._v(_vm._s(_vm.t('files_sharing', 'Select none')))])])])]),_vm._v(\" \"),_c('template',{slot:\"afterList\"},[_c('li',[_c('div',{staticClass:\"option__close\"},[_c('span',{attrs:{\"id\":\"btnClose\",\"tabindex\":\"0\",\"role\":\"button\"},on:{\"click\":_vm.toggle}},[_vm._v(_vm._s(_vm.closeBtnTitle))])])])])],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable vue/no-v-html */\n<!--\n  - @copyright Copyright (c) 2021 Recia\n  -\n  - @author Grégory Brousse <pro@gregory-brousse.fr>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div>\n\t\t<NcMultiselect ref=\"multiselect\"\n\t\t\tv-model=\"selected\"\n\t\t\tclass=\"sharing-input-etab\"\n\t\t\ttrack-by=\"id\"\n\t\t\tlabel=\"name\"\n\t\t\t:limit=\"3\"\n\t\t\t:custom-label=\"searchLabel\"\n\t\t\t:loading=\"loading\"\n\t\t\t:options=\"etabs\"\n\t\t\t:placeholder=\"inputPlaceholder\"\n\t\t\t:multiple=\"true\"\n\t\t\t:clear-on-select=\"true\"\n\t\t\topen-direction=\"below\"\n\t\t\t@input=\"change\"\n\t\t\t@search-change=\"saveQuery\">\n\t\t\t<template slot=\"option\" slot-scope=\"etab\">\n\t\t\t\t<div class=\"option__desc\">\n\t\t\t\t\t<span class=\"option__name\" v-html=\"highlight(etab.option.name)\" />\n\t\t\t\t\t<span class=\"option__uai\" v-html=\"highlight(etab.option.uai)\" />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template slot=\"beforeList\">\n\t\t\t\t<li>\n\t\t\t\t\t<div class=\"option__selectall\">\n\t\t\t\t\t\t<span id=\"btnSelectAll\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t@click=\"selectAll\">{{ t('files_sharing', 'Select all') }}</span>\n\t\t\t\t\t\t<span id=\"btnSelectNone\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t@click=\"deselectAll\">{{ t('files_sharing', 'Select none') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</template>\n\t\t\t<template slot=\"afterList\">\n\t\t\t\t<li>\n\t\t\t\t\t<div class=\"option__close\">\n\t\t\t\t\t\t<span id=\"btnClose\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t@click=\"toggle\">{{ closeBtnTitle }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</template>\n\t\t\t<template #noResult>\n\t\t\t\t{{ noResultText }}\n\t\t\t</template>\n\t\t</NcMultiselect>\n\t</div>\n</template>\n\n<script>\nimport { generateOcsUrl } from '@nextcloud/router'\nimport axios from '@nextcloud/axios'\nimport NcMultiselect from '@nextcloud/vue/dist/Components/NcMultiselect.js'\n\nimport MultiselectMixin from '../mixins/MultiselectMixin.js'\n\nimport Config from '../services/ConfigService.js'\n\nexport default {\n\tname: 'SharingInputEtab',\n\n\tcomponents: {\n\t\tNcMultiselect,\n\t},\n\n\tmixins: [MultiselectMixin],\n\n\tdata() {\n\t\treturn {\n\t\t\tconfig: new Config(),\n\t\t\tloading: false,\n\t\t\tquery: '',\n\t\t\tetabs: [],\n\t\t\tselected: [],\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tinputPlaceholder() {\n\t\t\tconst allowRemoteSharing = this.config.isRemoteShareAllowed\n\n\t\t\t// We can always search with email addresses for users too\n\t\t\tif (!allowRemoteSharing) {\n\t\t\t\treturn t('files_sharing', 'Establishments')\n\t\t\t}\n\n\t\t\treturn t('files_sharing', 'Establishments')\n\t\t},\n\n\t\tnoResultText() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn t('files_sharing', 'Searching …')\n\t\t\t}\n\t\t\treturn t('files_sharing', 'No elements found.')\n\t\t},\n\n\t\tcloseBtnTitle() {\n\t\t\treturn t('files_sharing', 'Close')\n\t\t},\n\n\t\tselectallBtnTitle() {\n\t\t\tif (this.selected.length === this.etabs.length) {\n\t\t\t\treturn t('files_sharing', 'Unselect all')\n\t\t\t} else {\n\t\t\t\treturn t('files_sharing', 'Select all')\n\t\t\t}\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.getEtabs()\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Récupère les établissements\n\t\t */\n\t\tasync getEtabs() {\n\t\t\tthis.loading = true\n\n\t\t\tlet request = null\n\t\t\ttry {\n\t\t\t\trequest = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/recia_list_etabs'), {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tformat: 'json',\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching etabs', error)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.etabs = request.data.ocs.data.data\n\n\t\t\tthis.selected = this.etabs.filter(etab => etab.selected)\n\t\t\tthis.selected.length >= 1 && this.change()\n\n\t\t\tthis.loading = false\n\t\t},\n\n\t\tchange() {\n\t\t\tthis.isOpen && this.toggle()\n\t\t\tthis.isChanging()\n\t\t},\n\n\t\tsaveQuery(searchQuery) {\n\t\t\tthis.query = searchQuery.trim()\n\t\t},\n\n\t\thighlight(text) {\n\t\t\tif (text === null) return ''\n\t\t\tif (!this.query.length) return text\n\t\t\treturn text.replace(new RegExp(this.query, 'gi'), function(match) {\n\t\t\t\treturn '<strong>' + match + '</strong>'\n\t\t\t})\n\t\t},\n\n\t\tsearchLabel(etab) {\n\t\t\treturn `${etab.name} ${etab.uai ?? ''}`\n\t\t},\n\n\t\tshowLabel(etab) {\n\t\t\treturn `${etab.name}`\n\t\t},\n\n\t\tselectAll() {\n\t\t\tthis.selected = this.etabs\n\t\t\tthis.isChanging()\n\t\t\tthis.toggle()\n\t\t},\n\n\t\tdeselectAll() {\n\t\t\tthis.selected = []\n\t\t\tthis.isChanging()\n\t\t\tthis.toggle()\n\t\t},\n\n\t\tisChanging() {\n\t\t\tconst sirenList = this.selected.map(etab => etab.siren)\n\t\t\tthis.$emit('change', sirenList)\n\t\t\tthis.etabs.sort((etab1, etab2) => {\n\t\t\t\tetab1.selected = sirenList.includes(etab1.siren)\n\t\t\t\tetab2.selected = sirenList.includes(etab2.siren)\n\t\t\t\tif (etab1.selected && etab2.selected) {\n\t\t\t\t\treturn etab1.name.localeCompare(etab2.name)\n\t\t\t\t} else {\n\t\t\t\t\tif (etab1.selected || etab2.selected) {\n\t\t\t\t\t\treturn etab1.selected ? -1 : +1\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn etab1.name.localeCompare(etab2.name)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.sharing-input-etab {\n\twidth: 100%;\n\tmargin: 10px 0;\n\t.multiselect__content-wrapper{\n\t\tmin-height:150px;\n\t}\n\t.option__desc{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tmin-width: 0;\n\t\t.option__name, .option__uai{\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t\t.option__name{\n\t\t\tcolor: var(--color-text-light);\n\t\t}\n\t\t.option__uai{\n\t\t\tfont-size:smaller;\n\t\t}\n\n\t}\n\t.multiselect__option--highlight{\n\t\t&:not(.multiselect__option--selected){\n\t\t\t&:before{\n\t\t\t\tvisibility:hidden !important;\n\t\t\t}\n\t\t}\n\t\t&:after{\n\t\t\tposition: absolute;\n\t\t\tbottom: 5px;\n\t\t\tright:5px;\n\t\t\tcontent: 'Selectionner';\n\t\t\topacity: 0.5;\n\t\t}\n\t\t&.multiselect__option--selected{\n\t\t\t&:after{\n\t\t\t\tcontent: 'Déselectionner';\n\t\t\t}\n\t\t}\n\t}\n\t.option__close, .option__selectall{\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\twidth: 100%;\n\t\tfont-weight: 700;\n\t\ttext-align: center;\n\t\tpadding: 8px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\theight: auto;\n\t\tmin-height: 1em;\n\t\tbackground-color: transparent;\n\t\tspan{\n\t\t\tflex:1;\n\t\t\tcolor: var(--color-text-lighter);\n\t\t\t&:hover{\n\t\t\t\tcolor: var(--color-text);\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputEtab.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputEtab.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputEtab.vue?vue&type=style&index=0&id=56a16e3f&prod&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputEtab.vue?vue&type=style&index=0&id=56a16e3f&prod&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingInputEtab.vue?vue&type=template&id=56a16e3f\"\nimport script from \"./SharingInputEtab.vue?vue&type=script&lang=js\"\nexport * from \"./SharingInputEtab.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingInputEtab.vue?vue&type=style&index=0&id=56a16e3f&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputChoice.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInputChoice.vue?vue&type=script&lang=js\"","<!--\n  - @copyright Copyright (c) 2021 Recia\n  -\n  - @author Grégory Brousse <pro@gregory-brousse.fr>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div>\n\t\t<input id=\"search-type-etab\"\n\t\t\tv-model=\"searchType\"\n\t\t\tclass=\"radio\"\n\t\t\ttype=\"radio\"\n\t\t\tname=\"search-type\"\n\t\t\tvalue=\"etab\"\n\t\t\t@change=\"change\">\n\t\t<label for=\"search-type-etab\">\n\t\t\t{{ t('files_sharing','Your establishments') }}\n\t\t</label>\n\t\t<input id=\"search-type-all\"\n\t\t\tv-model=\"searchType\"\n\t\t\tclass=\"radio\"\n\t\t\ttype=\"radio\"\n\t\t\tname=\"search-type\"\n\t\t\tvalue=\"all\"\n\t\t\t@change=\"change\">\n\t\t<label for=\"search-type-all\">\n\t\t\t{{ t('files_sharing','All platform') }}\n\t\t</label>\n\t</div>\n</template>\n\n<script>\n\nimport Config from '../services/ConfigService.js'\n\nexport default {\n\tname: 'SharingInputChoice',\n\n\tdata() {\n\t\treturn {\n\t\t\tconfig: new Config(),\n\t\t\tloading: false,\n\t\t\tsearchType: 'etab',\n\t\t}\n\t},\n\n\tmethods: {\n\t\tchange() {\n\t\t\tthis.$emit('change', this.searchType)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./SharingInputChoice.vue?vue&type=template&id=2fc370d2\"\nimport script from \"./SharingInputChoice.vue?vue&type=script&lang=js\"\nexport * from \"./SharingInputChoice.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchType),expression:\"searchType\"}],staticClass:\"radio\",attrs:{\"id\":\"search-type-etab\",\"type\":\"radio\",\"name\":\"search-type\",\"value\":\"etab\"},domProps:{\"checked\":_vm._q(_vm.searchType,\"etab\")},on:{\"change\":[function($event){_vm.searchType=\"etab\"},_vm.change]}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"search-type-etab\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing','Your establishments'))+\"\\n\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchType),expression:\"searchType\"}],staticClass:\"radio\",attrs:{\"id\":\"search-type-all\",\"type\":\"radio\",\"name\":\"search-type\",\"value\":\"all\"},domProps:{\"checked\":_vm._q(_vm.searchType,\"all\")},on:{\"change\":[function($event){_vm.searchType=\"all\"},_vm.change]}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"search-type-all\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing','All platform'))+\"\\n\\t\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{attrs:{\"id\":\"sharing-inherited-shares\"}},[_c('SharingEntrySimple',{staticClass:\"sharing-entry__inherited\",attrs:{\"title\":_vm.mainTitle,\"subtitle\":_vm.subTitle,\"aria-expanded\":_vm.showInheritedShares},scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('div',{staticClass:\"avatar-shared icon-more-white\"})]},proxy:true}])},[_vm._v(\" \"),_c('NcActionButton',{attrs:{\"icon\":_vm.showInheritedSharesIcon,\"aria-label\":_vm.toggleTooltip,\"title\":_vm.toggleTooltip},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.toggleInheritedShares.apply(null, arguments)}}})],1),_vm._v(\" \"),_vm._l((_vm.shares),function(share){return _c('SharingEntryInherited',{key:share.id,attrs:{\"file-info\":_vm.fileInfo,\"share\":share},on:{\"remove:share\":_vm.removeShare}})})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2022 Louis Chmn <louis@chmn.me>\n *\n * @author Louis Chmn <louis@chmn.me>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport const ATOMIC_PERMISSIONS = {\n\tNONE: 0,\n\tREAD: 1,\n\tUPDATE: 2,\n\tCREATE: 4,\n\tDELETE: 8,\n\tSHARE: 16,\n}\n\nexport const BUNDLED_PERMISSIONS = {\n\tREAD_ONLY: ATOMIC_PERMISSIONS.READ,\n\tUPLOAD_AND_UPDATE: ATOMIC_PERMISSIONS.READ | ATOMIC_PERMISSIONS.UPDATE | ATOMIC_PERMISSIONS.CREATE | ATOMIC_PERMISSIONS.DELETE,\n\tFILE_DROP: ATOMIC_PERMISSIONS.CREATE,\n\tALL: ATOMIC_PERMISSIONS.UPDATE | ATOMIC_PERMISSIONS.CREATE | ATOMIC_PERMISSIONS.READ | ATOMIC_PERMISSIONS.DELETE | ATOMIC_PERMISSIONS.SHARE,\n\tALL_FILE: ATOMIC_PERMISSIONS.UPDATE | ATOMIC_PERMISSIONS.READ | ATOMIC_PERMISSIONS.SHARE,\n}\n\n/**\n * Return whether a given permissions set contains some permissions.\n *\n * @param {number} initialPermissionSet - the permissions set.\n * @param {number} permissionsToCheck - the permissions to check.\n * @return {boolean}\n */\nexport function hasPermissions(initialPermissionSet, permissionsToCheck) {\n\treturn initialPermissionSet !== ATOMIC_PERMISSIONS.NONE && (initialPermissionSet & permissionsToCheck) === permissionsToCheck\n}\n\n/**\n * Return whether a given permissions set is valid.\n *\n * @param {number} permissionsSet - the permissions set.\n *\n * @return {boolean}\n */\nexport function permissionsSetIsValid(permissionsSet) {\n\t// Must have at least READ or CREATE permission.\n\tif (!hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.READ) && !hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.CREATE)) {\n\t\treturn false\n\t}\n\n\t// Must have READ permission if have UPDATE or DELETE.\n\tif (!hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.READ) && (\n\t\thasPermissions(permissionsSet, ATOMIC_PERMISSIONS.UPDATE) || hasPermissions(permissionsSet, ATOMIC_PERMISSIONS.DELETE)\n\t)) {\n\t\treturn false\n\t}\n\n\treturn true\n}\n\n/**\n * Add some permissions to an initial set of permissions.\n *\n * @param {number} initialPermissionSet - the initial permissions.\n * @param {number} permissionsToAdd - the permissions to add.\n *\n * @return {number}\n */\nexport function addPermissions(initialPermissionSet, permissionsToAdd) {\n\treturn initialPermissionSet | permissionsToAdd\n}\n\n/**\n * Remove some permissions from an initial set of permissions.\n *\n * @param {number} initialPermissionSet - the initial permissions.\n * @param {number} permissionsToSubtract - the permissions to remove.\n *\n * @return {number}\n */\nexport function subtractPermissions(initialPermissionSet, permissionsToSubtract) {\n\treturn initialPermissionSet & ~permissionsToSubtract\n}\n\n/**\n * Toggle some permissions from  an initial set of permissions.\n *\n * @param {number} initialPermissionSet - the permissions set.\n * @param {number} permissionsToToggle - the permissions to toggle.\n *\n * @return {number}\n */\nexport function togglePermissions(initialPermissionSet, permissionsToToggle) {\n\tif (hasPermissions(initialPermissionSet, permissionsToToggle)) {\n\t\treturn subtractPermissions(initialPermissionSet, permissionsToToggle)\n\t} else {\n\t\treturn addPermissions(initialPermissionSet, permissionsToToggle)\n\t}\n}\n\n/**\n * Return whether some given permissions can be toggled from a permission set.\n *\n * @param {number} permissionSet - the initial permissions set.\n * @param {number} permissionsToToggle - the permissions to toggle.\n *\n * @return {boolean}\n */\nexport function canTogglePermissions(permissionSet, permissionsToToggle) {\n\treturn permissionsSetIsValid(togglePermissions(permissionSet, permissionsToToggle))\n}\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\n * @author Gary Kim <gary@garykim.dev>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n * @author Vincent Petry <vincent@nextcloud.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { getCurrentUser } from '@nextcloud/auth'\n// eslint-disable-next-line import/no-unresolved, n/no-missing-import\nimport PQueue from 'p-queue'\nimport debounce from 'debounce'\n\nimport Share from '../models/Share.js'\nimport SharesRequests from './ShareRequests.js'\nimport ShareTypes from './ShareTypes.js'\nimport Config from '../services/ConfigService.js'\n\nimport {\n\tBUNDLED_PERMISSIONS,\n} from '../lib/SharePermissionsToolBox.js'\n\nexport default {\n\tmixins: [SharesRequests, ShareTypes],\n\n\tprops: {\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => { },\n\t\t\trequired: true,\n\t\t},\n\t\tshare: {\n\t\t\ttype: Share,\n\t\t\tdefault: null,\n\t\t},\n\t\tisUnique: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tconfig: new Config(),\n\n\t\t\t// errors helpers\n\t\t\terrors: {},\n\n\t\t\t// component status toggles\n\t\t\tloading: false,\n\t\t\tsaving: false,\n\t\t\topen: false,\n\n\t\t\t// concurrency management queue\n\t\t\t// we want one queue per share\n\t\t\tupdateQueue: new PQueue({ concurrency: 1 }),\n\n\t\t\t/**\n\t\t\t * ! This allow vue to make the Share class state reactive\n\t\t\t * ! do not remove it ot you'll lose all reactivity here\n\t\t\t */\n\t\t\treactiveState: this.share?.state,\n\t\t}\n\t},\n\n\tcomputed: {\n\n\t\t/**\n\t\t * Does the current share have a note\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\thasNote: {\n\t\t\tget() {\n\t\t\t\treturn this.share.note !== ''\n\t\t\t},\n\t\t\tset(enabled) {\n\t\t\t\tthis.share.note = enabled\n\t\t\t\t\t? null // enabled but user did not changed the content yet\n\t\t\t\t\t: '' // empty = no note = disabled\n\t\t\t},\n\t\t},\n\n\t\tdateTomorrow() {\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + 1))\n\t\t},\n\n\t\t// Datepicker language\n\t\tlang() {\n\t\t\tconst weekdaysShort = window.dayNamesShort\n\t\t\t\t? window.dayNamesShort // provided by nextcloud\n\t\t\t\t: ['Sun.', 'Mon.', 'Tue.', 'Wed.', 'Thu.', 'Fri.', 'Sat.']\n\t\t\tconst monthsShort = window.monthNamesShort\n\t\t\t\t? window.monthNamesShort // provided by nextcloud\n\t\t\t\t: ['Jan.', 'Feb.', 'Mar.', 'Apr.', 'May.', 'Jun.', 'Jul.', 'Aug.', 'Sep.', 'Oct.', 'Nov.', 'Dec.']\n\t\t\tconst firstDayOfWeek = window.firstDay ? window.firstDay : 0\n\n\t\t\treturn {\n\t\t\t\tformatLocale: {\n\t\t\t\t\tfirstDayOfWeek,\n\t\t\t\t\tmonthsShort,\n\t\t\t\t\tweekdaysMin: weekdaysShort,\n\t\t\t\t\tweekdaysShort,\n\t\t\t\t},\n\t\t\t\tmonthFormat: 'MMM',\n\t\t\t}\n\t\t},\n\t\tisFolder() {\n\t\t\treturn this.fileInfo.type === 'dir'\n\t\t},\n\t\tisPublicShare() {\n\t\t\tconst shareType = this.share.shareType ?? this.share.type\n\t\t\treturn [this.SHARE_TYPES.SHARE_TYPE_LINK, this.SHARE_TYPES.SHARE_TYPE_EMAIL].includes(shareType)\n\t\t},\n\t\tisRemoteShare() {\n\t\t\treturn this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP || this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE\n\t\t},\n\t\tisShareOwner() {\n\t\t\treturn this.share && this.share.owner === getCurrentUser().uid\n\t\t},\n\t\tisExpiryDateEnforced() {\n\t\t\tif (this.isPublicShare) {\n\t\t\t\treturn this.config.isDefaultExpireDateEnforced\n\t\t\t}\n\t\t\tif (this.isRemoteShare) {\n\t\t\t    return this.config.isDefaultRemoteExpireDateEnforced\n\t\t\t}\n\t\t\treturn this.config.isDefaultInternalExpireDateEnforced\n\t\t},\n\t\thasCustomPermissions() {\n\t\t\tconst bundledPermissions = [\n\t\t\t\tBUNDLED_PERMISSIONS.ALL,\n\t\t\t\tBUNDLED_PERMISSIONS.READ_ONLY,\n\t\t\t\tBUNDLED_PERMISSIONS.FILE_DROP,\n\t\t\t]\n\t\t\treturn !bundledPermissions.includes(this.share.permissions)\n\t\t},\n\t\tmaxExpirationDateEnforced() {\n\t\t\tif (this.isExpiryDateEnforced) {\n\t\t\t\tif (this.isPublicShare) {\n\t\t\t\t\treturn this.config.defaultExpirationDate\n\t\t\t\t}\n\t\t\t\tif (this.isRemoteShare) {\n\t\t\t\t\treturn this.config.defaultRemoteExpirationDateString\n\t\t\t\t}\n\t\t\t\t// If it get's here then it must be an internal share\n\t\t\t\treturn this.config.defaultInternalExpirationDate\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Check if a share is valid before\n\t\t * firing the request\n\t\t *\n\t\t * @param {Share} share the share to check\n\t\t * @return {boolean}\n\t\t */\n\t\tcheckShare(share) {\n\t\t\tif (share.password) {\n\t\t\t\tif (typeof share.password !== 'string' || share.password.trim() === '') {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (share.expirationDate) {\n\t\t\t\tconst date = share.expirationDate\n\t\t\t\tif (!date.isValid()) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\n\t\t/**\n\t\t * @param {string} date a date with YYYY-MM-DD format\n\t\t * @return {Date} date\n\t\t */\n\t\tparseDateString(date) {\n\t\t\tif (!date) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst regex = /([0-9]{4}-[0-9]{2}-[0-9]{2})/i\n\t\t\treturn new Date(date.match(regex)?.pop())\n\t\t},\n\n\t\t/**\n\t\t * @param {Date} date\n\t\t * @return {string} date a date with YYYY-MM-DD format\n\t\t */\n\t\tformatDateToString(date) {\n\t\t\t// Force utc time. Drop time information to be timezone-less\n\t\t\tconst utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))\n\t\t\t// Format to YYYY-MM-DD\n\t\t\treturn utcDate.toISOString().split('T')[0]\n\t\t},\n\n\t\t/**\n\t\t * Save given value to expireDate and trigger queueUpdate\n\t\t *\n\t\t * @param {Date} date\n\t\t */\n\t\tonExpirationChange: debounce(function(date) {\n\t\t\tthis.share.expireDate = this.formatDateToString(new Date(date))\n\t\t}, 500),\n\t\t/**\n\t\t * Uncheck expire date\n\t\t * We need this method because @update:checked\n\t\t * is ran simultaneously as @uncheck, so\n\t\t * so we cannot ensure data is up-to-date\n\t\t */\n\t\tonExpirationDisable() {\n\t\t\tthis.share.expireDate = ''\n\t\t},\n\n\t\t/**\n\t\t * Note changed, let's save it to a different key\n\t\t *\n\t\t * @param {string} note the share note\n\t\t */\n\t\tonNoteChange(note) {\n\t\t\tthis.$set(this.share, 'newNote', note.trim())\n\t\t},\n\n\t\t/**\n\t\t * When the note change, we trim, save and dispatch\n\t\t *\n\t\t */\n\t\tonNoteSubmit() {\n\t\t\tif (this.share.newNote) {\n\t\t\t\tthis.share.note = this.share.newNote\n\t\t\t\tthis.$delete(this.share, 'newNote')\n\t\t\t\tthis.queueUpdate('note')\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Delete share button handler\n\t\t */\n\t\tasync onDelete() {\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.open = false\n\t\t\t\tawait this.deleteShare(this.share.id)\n\t\t\t\tconsole.debug('Share deleted', this.share.id)\n\t\t\t\tconst message = this.share.itemType === 'file'\n\t\t\t\t\t? t('files_sharing', 'File \"{path}\" has been unshared', { path: this.share.path })\n\t\t\t\t\t: t('files_sharing', 'Folder \"{path}\" has been unshared', { path: this.share.path })\n\t\t\t\tshowSuccess(message)\n\t\t\t\tthis.$emit('remove:share', this.share)\n\t\t\t} catch (error) {\n\t\t\t\t// re-open menu if error\n\t\t\t\tthis.open = true\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Send an update of the share to the queue\n\t\t *\n\t\t * @param {Array<string>} propertyNames the properties to sync\n\t\t */\n\t\tqueueUpdate(...propertyNames) {\n\t\t\tif (propertyNames.length === 0) {\n\t\t\t\t// Nothing to update\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.share.id) {\n\t\t\t\tconst properties = {}\n\t\t\t\t// force value to string because that is what our\n\t\t\t\t// share api controller accepts\n\t\t\t\tpropertyNames.forEach(name => {\n\t\t\t\t\tif ((typeof this.share[name]) === 'object') {\n\t\t\t\t\t\tproperties[name] = JSON.stringify(this.share[name])\n\t\t\t\t\t} else {\n\t\t\t\t\t\tproperties[name] = this.share[name].toString()\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tthis.updateQueue.add(async () => {\n\t\t\t\t\tthis.saving = true\n\t\t\t\t\tthis.errors = {}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst updatedShare = await this.updateShare(this.share.id, properties)\n\n\t\t\t\t\t\tif (propertyNames.indexOf('password') >= 0) {\n\t\t\t\t\t\t\t// reset password state after sync\n\t\t\t\t\t\t\tthis.$delete(this.share, 'newPassword')\n\n\t\t\t\t\t\t\t// updates password expiration time after sync\n\t\t\t\t\t\t\tthis.share.passwordExpirationTime = updatedShare.password_expiration_time\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// clear any previous errors\n\t\t\t\t\t\tthis.$delete(this.errors, propertyNames[0])\n\t\t\t\t\t\tshowSuccess(t('files_sharing', 'Share {propertyName} saved', { propertyName: propertyNames[0] }))\n\t\t\t\t\t} catch ({ message }) {\n\t\t\t\t\t\tif (message && message !== '') {\n\t\t\t\t\t\t\tthis.onSyncError(propertyNames[0], message)\n\t\t\t\t\t\t\tshowError(t('files_sharing', message))\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// This share does not exists on the server yet\n\t\t\tconsole.debug('Updated local share', this.share)\n\t\t},\n\n\t\t/**\n\t\t * Manage sync errors\n\t\t *\n\t\t * @param {string} property the errored property, e.g. 'password'\n\t\t * @param {string} message the error message\n\t\t */\n\t\tonSyncError(property, message) {\n\t\t\t// re-open menu if closed\n\t\t\tthis.open = true\n\t\t\tswitch (property) {\n\t\t\tcase 'password':\n\t\t\tcase 'pending':\n\t\t\tcase 'expireDate':\n\t\t\tcase 'label':\n\t\t\tcase 'note': {\n\t\t\t\t// show error\n\t\t\t\tthis.$set(this.errors, property, message)\n\n\t\t\t\tlet propertyEl = this.$refs[property]\n\t\t\t\tif (propertyEl) {\n\t\t\t\t\tif (propertyEl.$el) {\n\t\t\t\t\t\tpropertyEl = propertyEl.$el\n\t\t\t\t\t}\n\t\t\t\t\t// focus if there is a focusable action element\n\t\t\t\t\tconst focusable = propertyEl.querySelector('.focusable')\n\t\t\t\t\tif (focusable) {\n\t\t\t\t\t\tfocusable.focus()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'sendPasswordByTalk': {\n\t\t\t\t// show error\n\t\t\t\tthis.$set(this.errors, property, message)\n\n\t\t\t\t// Restore previous state\n\t\t\t\tthis.share.sendPasswordByTalk = !this.share.sendPasswordByTalk\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Debounce queueUpdate to avoid requests spamming\n\t\t * more importantly for text data\n\t\t *\n\t\t * @param {string} property the property to sync\n\t\t */\n\t\tdebounceQueueUpdate: debounce(function(property) {\n\t\t\tthis.queueUpdate(property)\n\t\t}, 500),\n\t},\n}\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=script&lang=js\"","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<SharingEntrySimple :key=\"share.id\"\n\t\tclass=\"sharing-entry__inherited\"\n\t\t:title=\"share.shareWithDisplayName\">\n\t\t<template #avatar>\n\t\t\t<NcAvatar :user=\"share.shareWith\"\n\t\t\t\t:display-name=\"share.shareWithDisplayName\"\n\t\t\t\tclass=\"sharing-entry__avatar\" />\n\t\t</template>\n\t\t<NcActionText icon=\"icon-user\">\n\t\t\t{{ t('files_sharing', 'Added by {initiator}', { initiator: share.ownerDisplayName }) }}\n\t\t</NcActionText>\n\t\t<NcActionLink v-if=\"share.viaPath && share.viaFileid\"\n\t\t\ticon=\"icon-folder\"\n\t\t\t:href=\"viaFileTargetUrl\">\n\t\t\t{{ t('files_sharing', 'Via “{folder}”', {folder: viaFolderName} ) }}\n\t\t</NcActionLink>\n\t\t<NcActionButton v-if=\"share.canDelete\"\n\t\t\ticon=\"icon-close\"\n\t\t\t@click.prevent=\"onDelete\">\n\t\t\t{{ t('files_sharing', 'Unshare') }}\n\t\t</NcActionButton>\n\t</SharingEntrySimple>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { basename } from '@nextcloud/paths'\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton.js'\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink.js'\nimport NcActionText from '@nextcloud/vue/dist/Components/NcActionText.js'\n\n// eslint-disable-next-line no-unused-vars\nimport Share from '../models/Share.js'\nimport SharesMixin from '../mixins/SharesMixin.js'\nimport SharingEntrySimple from '../components/SharingEntrySimple.vue'\n\nexport default {\n\tname: 'SharingEntryInherited',\n\n\tcomponents: {\n\t\tNcActionButton,\n\t\tNcActionLink,\n\t\tNcActionText,\n\t\tNcAvatar,\n\t\tSharingEntrySimple,\n\t},\n\n\tmixins: [SharesMixin],\n\n\tprops: {\n\t\tshare: {\n\t\t\ttype: Share,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tviaFileTargetUrl() {\n\t\t\treturn generateUrl('/f/{fileid}', {\n\t\t\t\tfileid: this.share.viaFileid,\n\t\t\t})\n\t\t},\n\n\t\tviaFolderName() {\n\t\t\treturn basename(this.share.viaPath)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto;\n\t}\n}\n</style>\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=style&index=0&id=283ca89e&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryInherited.vue?vue&type=style&index=0&id=283ca89e&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryInherited.vue?vue&type=template&id=283ca89e&scoped=true\"\nimport script from \"./SharingEntryInherited.vue?vue&type=script&lang=js\"\nexport * from \"./SharingEntryInherited.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingEntryInherited.vue?vue&type=style&index=0&id=283ca89e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"283ca89e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('SharingEntrySimple',{key:_vm.share.id,staticClass:\"sharing-entry__inherited\",attrs:{\"title\":_vm.share.shareWithDisplayName},scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('NcAvatar',{staticClass:\"sharing-entry__avatar\",attrs:{\"user\":_vm.share.shareWith,\"display-name\":_vm.share.shareWithDisplayName}})]},proxy:true}])},[_vm._v(\" \"),_c('NcActionText',{attrs:{\"icon\":\"icon-user\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Added by {initiator}', { initiator: _vm.share.ownerDisplayName }))+\"\\n\\t\")]),_vm._v(\" \"),(_vm.share.viaPath && _vm.share.viaFileid)?_c('NcActionLink',{attrs:{\"icon\":\"icon-folder\",\"href\":_vm.viaFileTargetUrl}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Via “{folder}”', {folder: _vm.viaFolderName} ))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.share.canDelete)?_c('NcActionButton',{attrs:{\"icon\":\"icon-close\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Unshare'))+\"\\n\\t\")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<ul id=\"sharing-inherited-shares\">\n\t\t<!-- Main collapsible entry -->\n\t\t<SharingEntrySimple class=\"sharing-entry__inherited\"\n\t\t\t:title=\"mainTitle\"\n\t\t\t:subtitle=\"subTitle\"\n\t\t\t:aria-expanded=\"showInheritedShares\">\n\t\t\t<template #avatar>\n\t\t\t\t<div class=\"avatar-shared icon-more-white\" />\n\t\t\t</template>\n\t\t\t<NcActionButton :icon=\"showInheritedSharesIcon\"\n\t\t\t\t:aria-label=\"toggleTooltip\"\n\t\t\t\t:title=\"toggleTooltip\"\n\t\t\t\t@click.prevent.stop=\"toggleInheritedShares\" />\n\t\t</SharingEntrySimple>\n\n\t\t<!-- Inherited shares list -->\n\t\t<SharingEntryInherited v-for=\"share in shares\"\n\t\t\t:key=\"share.id\"\n\t\t\t:file-info=\"fileInfo\"\n\t\t\t:share=\"share\"\n\t\t\t@remove:share=\"removeShare\" />\n\t</ul>\n</template>\n\n<script>\nimport { generateOcsUrl } from '@nextcloud/router'\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton.js'\nimport axios from '@nextcloud/axios'\n\nimport Share from '../models/Share.js'\nimport SharingEntryInherited from '../components/SharingEntryInherited.vue'\nimport SharingEntrySimple from '../components/SharingEntrySimple.vue'\n\nexport default {\n\tname: 'SharingInherited',\n\n\tcomponents: {\n\t\tNcActionButton,\n\t\tSharingEntryInherited,\n\t\tSharingEntrySimple,\n\t},\n\n\tprops: {\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloaded: false,\n\t\t\tloading: false,\n\t\t\tshowInheritedShares: false,\n\t\t\tshares: [],\n\t\t}\n\t},\n\tcomputed: {\n\t\tshowInheritedSharesIcon() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn 'icon-loading-small'\n\t\t\t}\n\t\t\tif (this.showInheritedShares) {\n\t\t\t\treturn 'icon-triangle-n'\n\t\t\t}\n\t\t\treturn 'icon-triangle-s'\n\t\t},\n\t\tmainTitle() {\n\t\t\treturn t('files_sharing', 'Others with access')\n\t\t},\n\t\tsubTitle() {\n\t\t\treturn (this.showInheritedShares && this.shares.length === 0)\n\t\t\t\t? t('files_sharing', 'No other users with access found')\n\t\t\t\t: ''\n\t\t},\n\t\ttoggleTooltip() {\n\t\t\treturn this.fileInfo.type === 'dir'\n\t\t\t\t? t('files_sharing', 'Toggle list of others with access to this directory')\n\t\t\t\t: t('files_sharing', 'Toggle list of others with access to this file')\n\t\t},\n\t\tfullPath() {\n\t\t\tconst path = `${this.fileInfo.path}/${this.fileInfo.name}`\n\t\t\treturn path.replace('//', '/')\n\t\t},\n\t},\n\twatch: {\n\t\tfileInfo() {\n\t\t\tthis.resetState()\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Toggle the list view and fetch/reset the state\n\t\t */\n\t\ttoggleInheritedShares() {\n\t\t\tthis.showInheritedShares = !this.showInheritedShares\n\t\t\tif (this.showInheritedShares) {\n\t\t\t\tthis.fetchInheritedShares()\n\t\t\t} else {\n\t\t\t\tthis.resetState()\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Fetch the Inherited Shares array\n\t\t */\n\t\tasync fetchInheritedShares() {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tconst url = generateOcsUrl('apps/files_sharing/api/v1/shares/inherited?format=json&path={path}', { path: this.fullPath })\n\t\t\t\tconst shares = await axios.get(url)\n\t\t\t\tthis.shares = shares.data.ocs.data\n\t\t\t\t\t.map(share => new Share(share))\n\t\t\t\t\t.sort((a, b) => b.createdTime - a.createdTime)\n\t\t\t\tconsole.info(this.shares)\n\t\t\t\tthis.loaded = true\n\t\t\t} catch (error) {\n\t\t\t\tOC.Notification.showTemporary(t('files_sharing', 'Unable to fetch inherited shares'), { type: 'error' })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Reset current component state\n\t\t */\n\t\tresetState() {\n\t\t\tthis.loaded = false\n\t\t\tthis.loading = false\n\t\t\tthis.showInheritedShares = false\n\t\t\tthis.shares = []\n\t\t},\n\t\t/**\n\t\t * Remove a share from the shares list\n\t\t *\n\t\t * @param {Share} share the share to remove\n\t\t */\n\t\tremoveShare(share) {\n\t\t\tconst index = this.shares.findIndex(item => item === share)\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\tthis.shares.splice(index, 1)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharing-entry__inherited {\n\t.avatar-shared {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=style&index=0&id=05b67dc8&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingInherited.vue?vue&type=style&index=0&id=05b67dc8&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingInherited.vue?vue&type=template&id=05b67dc8&scoped=true\"\nimport script from \"./SharingInherited.vue?vue&type=script&lang=js\"\nexport * from \"./SharingInherited.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingInherited.vue?vue&type=style&index=0&id=05b67dc8&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05b67dc8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.canLinkShare)?_c('ul',{staticClass:\"sharing-link-list\"},[(!_vm.hasLinkShares && _vm.canReshare)?_c('SharingEntryLink',{attrs:{\"can-reshare\":_vm.canReshare,\"file-info\":_vm.fileInfo},on:{\"add:share\":_vm.addShare}}):_vm._e(),_vm._v(\" \"),(_vm.hasShares)?_vm._l((_vm.shares),function(share,index){return _c('SharingEntryLink',{key:share.id,attrs:{\"index\":_vm.shares.length > 1 ? index + 1 : null,\"can-reshare\":_vm.canReshare,\"share\":_vm.shares[index],\"file-info\":_vm.fileInfo},on:{\"update:share\":[function($event){return _vm.$set(_vm.shares, index, $event)},function($event){return _vm.awaitForShare(...arguments)}],\"add:share\":function($event){return _vm.addShare(...arguments)},\"remove:share\":_vm.removeShare,\"open-sharing-details\":function($event){return _vm.openSharingDetails(share)}}})}):_vm._e()],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Share from '../models/Share.js'\nimport Config from '../services/ConfigService.js'\n\nexport default {\n\tmethods: {\n\t\tasync openSharingDetails(shareRequestObject) {\n\t\t\tlet share = {}\n\t\t\t// handle externalResults from OCA.Sharing.ShareSearch\n\t\t\t// TODO : Better name/interface for handler required\n\t\t\t// For example `externalAppCreateShareHook` with proper documentation\n\t\t\tif (shareRequestObject.handler) {\n\t\t\t\tif (this.suggestions) {\n\t\t\t\t\tshareRequestObject.suggestions = this.suggestions\n\t\t\t\t\tshareRequestObject.fileInfo = this.fileInfo\n\t\t\t\t\tshareRequestObject.query = this.query\n\t\t\t\t}\n\t\t\t\tshare = await shareRequestObject.handler(shareRequestObject)\n\t\t\t\tshare = new Share(share)\n\t\t\t} else {\n\t\t\t\tshare = this.mapShareRequestToShareObject(shareRequestObject)\n\t\t\t}\n\n\t\t\tconst shareDetails = {\n\t\t\t\tfileInfo: this.fileInfo,\n\t\t\t\tshare,\n\t\t\t}\n\n\t\t\tthis.$emit('open-sharing-details', shareDetails)\n\t\t},\n\t\topenShareDetailsForCustomSettings(share) {\n\t\t\tshare.setCustomPermissions = true\n\t\t\tthis.openSharingDetails(share)\n\t\t},\n\t\tmapShareRequestToShareObject(shareRequestObject) {\n\n\t\t\tif (shareRequestObject.id) {\n\t\t\t\treturn shareRequestObject\n\t\t\t}\n\n\t\t\tconst share = {\n\t\t\t\tattributes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\tkey: 'download',\n\t\t\t\t\t\tscope: 'permissions',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tshare_type: shareRequestObject.shareType,\n\t\t\t\tshare_with: shareRequestObject.shareWith,\n\t\t\t\tis_no_user: shareRequestObject.isNoUser,\n\t\t\t\tuser: shareRequestObject.shareWith,\n\t\t\t\tshare_with_displayname: shareRequestObject.displayName,\n\t\t\t\tsubtitle: shareRequestObject.subtitle,\n\t\t\t\tpermissions: shareRequestObject.permissions ?? new Config().defaultPermissions,\n\t\t\t\texpiration: '',\n\t\t\t}\n\n\t\t\treturn new Share(share)\n\t\t},\n\t},\n}\n","<template>\n\t<div ref=\"quickShareDropdownContainer\"\n\t\t:class=\"{ 'active': showDropdown, 'share-select': true }\">\n\t\t<span :id=\"dropdownId\"\n\t\t\tclass=\"trigger-text\"\n\t\t\t:aria-expanded=\"showDropdown\"\n\t\t\t:aria-haspopup=\"true\"\n\t\t\taria-label=\"Quick share options dropdown\"\n\t\t\t@click=\"toggleDropdown\">\n\t\t\t{{ selectedOption }}\n\t\t\t<DropdownIcon :size=\"15\" />\n\t\t</span>\n\t\t<div v-if=\"showDropdown\"\n\t\t\tref=\"quickShareDropdown\"\n\t\t\tclass=\"share-select-dropdown\"\n\t\t\t:aria-labelledby=\"dropdownId\"\n\t\t\ttabindex=\"0\"\n\t\t\t@keydown.down=\"handleArrowDown\"\n\t\t\t@keydown.up=\"handleArrowUp\"\n\t\t\t@keydown.esc=\"closeDropdown\">\n\t\t\t<button v-for=\"option in options\"\n\t\t\t\t:key=\"option\"\n\t\t\t\t:class=\"{ 'dropdown-item': true, 'selected': option === selectedOption }\"\n\t\t\t\t:aria-selected=\"option === selectedOption\"\n\t\t\t\t@click=\"selectOption(option)\">\n\t\t\t\t{{ option }}\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport DropdownIcon from 'vue-material-design-icons/TriangleSmallDown.vue'\nimport SharesMixin from '../mixins/SharesMixin.js'\nimport ShareDetails from '../mixins/ShareDetails.js'\nimport ShareTypes from '../mixins/ShareTypes.js'\n\nimport {\n\tBUNDLED_PERMISSIONS,\n\tATOMIC_PERMISSIONS,\n} from '../lib/SharePermissionsToolBox.js'\n\nimport { createFocusTrap } from 'focus-trap'\n\nexport default {\n\tcomponents: {\n\t\tDropdownIcon,\n\t},\n\tmixins: [SharesMixin, ShareDetails, ShareTypes],\n\tprops: {\n\t\tshare: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\ttoggle: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselectedOption: '',\n\t\t\tshowDropdown: this.toggle,\n\t\t\tfocusTrap: null,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcanViewText() {\n\t\t\treturn t('files_sharing', 'View only')\n\t\t},\n\t\tcanEditText() {\n\t\t\treturn t('files_sharing', 'Can edit')\n\t\t},\n\t\tfileDropText() {\n\t\t\treturn t('files_sharing', 'File drop')\n\t\t},\n\t\tcustomPermissionsText() {\n\t\t\treturn t('files_sharing', 'Custom permissions')\n\t\t},\n\t\tpreSelectedOption() {\n\t\t\t// We remove the share permission for the comparison as it is not relevant for bundled permissions.\n\t\t\tif ((this.share.permissions & ~ATOMIC_PERMISSIONS.SHARE) === BUNDLED_PERMISSIONS.READ_ONLY) {\n\t\t\t\treturn this.canViewText\n\t\t\t} else if (this.share.permissions === BUNDLED_PERMISSIONS.ALL || this.share.permissions === BUNDLED_PERMISSIONS.ALL_FILE) {\n\t\t\t\treturn this.canEditText\n\t\t\t} else if ((this.share.permissions & ~ATOMIC_PERMISSIONS.SHARE) === BUNDLED_PERMISSIONS.FILE_DROP) {\n\t\t\t\treturn this.fileDropText\n\t\t\t}\n\n\t\t\treturn this.customPermissionsText\n\n\t\t},\n\t\toptions() {\n\t\t\tconst options = [this.canViewText, this.canEditText]\n\t\t\tif (this.supportsFileDrop) {\n\t\t\t\toptions.push(this.fileDropText)\n\t\t\t}\n\t\t\toptions.push(this.customPermissionsText)\n\n\t\t\treturn options\n\t\t},\n\t\tsupportsFileDrop() {\n\t\t\tif (this.isFolder && this.config.isPublicUploadEnabled) {\n\t\t\t\tconst shareType = this.share.type ?? this.share.shareType\n\t\t\t\treturn [this.SHARE_TYPES.SHARE_TYPE_LINK, this.SHARE_TYPES.SHARE_TYPE_EMAIL].includes(shareType)\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\tdropDownPermissionValue() {\n\t\t\tswitch (this.selectedOption) {\n\t\t\tcase this.canEditText:\n\t\t\t\treturn this.isFolder ? BUNDLED_PERMISSIONS.ALL : BUNDLED_PERMISSIONS.ALL_FILE\n\t\t\tcase this.fileDropText:\n\t\t\t\treturn BUNDLED_PERMISSIONS.FILE_DROP\n\t\t\tcase this.customPermissionsText:\n\t\t\t\treturn 'custom'\n\t\t\tcase this.canViewText:\n\t\t\tdefault:\n\t\t\t\treturn BUNDLED_PERMISSIONS.READ_ONLY\n\t\t\t}\n\t\t},\n\t\tdropdownId() {\n\t\t\t// Generate a unique ID for ARIA attributes\n\t\t\treturn `dropdown-${Math.random().toString(36).substr(2, 9)}`\n\t\t},\n\t},\n\twatch: {\n\t\ttoggle(toggleValue) {\n\t\t\tthis.showDropdown = toggleValue\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.initializeComponent()\n\t\twindow.addEventListener('click', this.handleClickOutside)\n\t},\n\tbeforeDestroy() {\n\t\t// Remove the global click event listener to prevent memory leaks\n\t\twindow.removeEventListener('click', this.handleClickOutside)\n\t},\n\tmethods: {\n\t\ttoggleDropdown() {\n\t\t\tthis.showDropdown = !this.showDropdown\n\t\t\tif (this.showDropdown) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.useFocusTrap()\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.clearFocusTrap()\n\t\t\t}\n\t\t},\n\t\tcloseDropdown() {\n\t\t\tthis.clearFocusTrap()\n\t\t\tthis.showDropdown = false\n\t\t},\n\t\tselectOption(option) {\n\t\t\tthis.selectedOption = option\n\t\t\tif (option === this.customPermissionsText) {\n\t\t\t\tthis.$emit('open-sharing-details')\n\t\t\t} else {\n\t\t\t\tthis.share.permissions = this.dropDownPermissionValue\n\t\t\t\tthis.queueUpdate('permissions')\n\t\t\t}\n\t\t\tthis.showDropdown = false\n\t\t},\n\t\tinitializeComponent() {\n\t\t\tthis.selectedOption = this.preSelectedOption\n\t\t},\n\t\thandleClickOutside(event) {\n\t\t\tconst dropdownContainer = this.$refs.quickShareDropdownContainer\n\n\t\t\tif (dropdownContainer && !dropdownContainer.contains(event.target)) {\n\t\t\t\tthis.showDropdown = false\n\t\t\t}\n\t\t},\n\t\tuseFocusTrap() {\n\t\t\t// Create global stack if undefined\n\t\t\t// Use in with trapStack to avoid conflicting traps\n\t\t\tObject.assign(window, { _nc_focus_trap: window._nc_focus_trap || [] })\n\t\t\tconst dropdownElement = this.$refs.quickShareDropdown\n\t\t\tthis.focusTrap = createFocusTrap(dropdownElement, {\n\t\t\t\tallowOutsideClick: true,\n\t\t\t\ttrapStack: window._nc_focus_trap,\n\t\t\t})\n\n\t\t\tthis.focusTrap.activate()\n\t\t},\n\t\tclearFocusTrap() {\n\t\t\tthis.focusTrap?.deactivate()\n\t\t\tthis.focusTrap = null\n\t\t},\n\t\tshiftFocusForward() {\n\t\t\tconst currentElement = document.activeElement\n\t\t\tlet nextElement = currentElement.nextElementSibling\n\t\t\tif (!nextElement) {\n\t\t\t\tnextElement = this.$refs.quickShareDropdown.firstElementChild\n\t\t\t}\n\t\t\tnextElement.focus()\n\t\t},\n\t\tshiftFocusBackward() {\n\t\t\tconst currentElement = document.activeElement\n\t\t\tlet previousElement = currentElement.previousElementSibling\n\t\t\tif (!previousElement) {\n\t\t\t\tpreviousElement = this.$refs.quickShareDropdown.lastElementChild\n\t\t\t}\n\t\t\tpreviousElement.focus()\n\t\t},\n\t\thandleArrowUp() {\n\t\t\tthis.shiftFocusBackward()\n\t\t},\n\t\thandleArrowDown() {\n\t\t\tthis.shiftFocusForward()\n\t\t},\n\t},\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.share-select {\n\tposition: relative;\n\tcursor: pointer;\n\n\t.trigger-text {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tfont-size: 12.5px;\n\t\tgap: 2px;\n\t\tcolor: var(--color-primary-element);\n\t}\n\n\t.share-select-dropdown {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttop: 100%;\n\t\tleft: 0;\n\t\tbackground-color: var(--color-main-background);\n\t\tborder-radius: 8px;\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\t\tborder: 1px solid var(--color-border);\n\t\tpadding: 4px 0;\n\t\tz-index: 1;\n\n\t\t.dropdown-item {\n\t\t\tpadding: 8px;\n\t\t\tfont-size: 12px;\n\t\t\tbackground: none;\n\t\t\tborder: none;\n\t\t\tborder-radius: 0;\n\t\t\tfont: inherit;\n\t\t\tcursor: pointer;\n\t\t\tcolor: inherit;\n\t\t\toutline: none;\n\t\t\twidth: 100%;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-align: left;\n\n\t\t\t&:hover {\n\t\t\t\tbackground-color: var(--color-background-dark);\n\t\t\t}\n\n\t\t\t&.selected {\n\t\t\t\tbackground-color: var(--color-background-dark);\n\t\t\t}\n\t\t}\n\t}\n\n\t/* Optional: Add a transition effect for smoother dropdown animation */\n\t.share-select-dropdown {\n\t\tmax-height: 0;\n\t\toverflow: hidden;\n\t\ttransition: max-height 0.3s ease;\n\t}\n\n\t&.active .share-select-dropdown {\n\t\tmax-height: 200px;\n\t\t/* Adjust the value to your desired height */\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryQuickShareSelect.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryQuickShareSelect.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryQuickShareSelect.vue?vue&type=style&index=0&id=d960cabe&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryQuickShareSelect.vue?vue&type=style&index=0&id=d960cabe&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryQuickShareSelect.vue?vue&type=template&id=d960cabe&scoped=true\"\nimport script from \"./SharingEntryQuickShareSelect.vue?vue&type=script&lang=js\"\nexport * from \"./SharingEntryQuickShareSelect.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingEntryQuickShareSelect.vue?vue&type=style&index=0&id=d960cabe&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d960cabe\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"quickShareDropdownContainer\",class:{ 'active': _vm.showDropdown, 'share-select': true }},[_c('span',{staticClass:\"trigger-text\",attrs:{\"id\":_vm.dropdownId,\"aria-expanded\":_vm.showDropdown,\"aria-haspopup\":true,\"aria-label\":\"Quick share options dropdown\"},on:{\"click\":_vm.toggleDropdown}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.selectedOption)+\"\\n\\t\\t\"),_c('DropdownIcon',{attrs:{\"size\":15}})],1),_vm._v(\" \"),(_vm.showDropdown)?_c('div',{ref:\"quickShareDropdown\",staticClass:\"share-select-dropdown\",attrs:{\"aria-labelledby\":_vm.dropdownId,\"tabindex\":\"0\"},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"]))return null;return _vm.handleArrowDown.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"]))return null;return _vm.handleArrowUp.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return _vm.closeDropdown.apply(null, arguments)}]}},_vm._l((_vm.options),function(option){return _c('button',{key:option,class:{ 'dropdown-item': true, 'selected': option === _vm.selectedOption },attrs:{\"aria-selected\":option === _vm.selectedOption},on:{\"click\":function($event){return _vm.selectOption(option)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(option)+\"\\n\\t\\t\")])}),0):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalShareAction.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalShareAction.vue?vue&type=script&lang=js\"","<!--\n  - @copyright Copyright (c) 2021 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<Component :is=\"data.is\"\n\t\tv-bind=\"data\"\n\t\tv-on=\"action.handlers\">\n\t\t{{ data.text }}\n\t</Component>\n</template>\n\n<script>\nimport Share from '../models/Share.js'\n\nexport default {\n\tname: 'ExternalShareAction',\n\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\taction: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t\trequired: true,\n\t\t},\n\t\tshare: {\n\t\t\ttype: Share,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tdata() {\n\t\t\treturn this.action.data(this)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./ExternalShareAction.vue?vue&type=template&id=0f0e27d0\"\nimport script from \"./ExternalShareAction.vue?vue&type=script&lang=js\"\nexport * from \"./ExternalShareAction.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c(_vm.data.is,_vm._g(_vm._b({tag:\"Component\"},'Component',_vm.data,false),_vm.action.handlers),[_vm._v(\"\\n\\t\"+_vm._s(_vm.data.text)+\"\\n\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<li :class=\"{ 'sharing-entry--share': share }\" class=\"sharing-entry sharing-entry__link\">\n\t\t<NcAvatar :is-no-user=\"true\"\n\t\t\t:icon-class=\"isEmailShareType ? 'avatar-link-share icon-mail-white' : 'avatar-link-share icon-public-white'\"\n\t\t\tclass=\"sharing-entry__avatar\" />\n\n\t\t<div class=\"sharing-entry__summary\">\n\t\t\t<div class=\"sharing-entry__desc\" @click.prevent=\"toggleQuickShareSelect\">\n\t\t\t\t<span class=\"sharing-entry__title\" :title=\"title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</span>\n\t\t\t\t<p v-if=\"subtitle\">\n\t\t\t\t\t{{ subtitle }}\n\t\t\t\t</p>\n\t\t\t\t<QuickShareSelect v-if=\"share && share.permissions !== undefined\"\n\t\t\t\t\t:share=\"share\"\n\t\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t\t:toggle=\"showDropdown\"\n\t\t\t\t\t@open-sharing-details=\"openShareDetailsForCustomSettings(share)\" />\n\t\t\t</div>\n\n\t\t\t<!-- clipboard -->\n\t\t\t<NcActions v-if=\"share && !isEmailShareType && share.token\" ref=\"copyButton\" class=\"sharing-entry__copy\">\n\t\t\t\t<NcActionLink :href=\"shareLink\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t:title=\"copyLinkTooltip\"\n\t\t\t\t\t:aria-label=\"copyLinkTooltip\"\n\t\t\t\t\t:icon=\"copied && copySuccess ? 'icon-checkmark-color' : 'icon-clippy'\"\n\t\t\t\t\t@click.stop.prevent=\"copyLink\" />\n\t\t\t</NcActions>\n\t\t</div>\n\n\t\t<!-- pending actions -->\n\t\t<NcActions v-if=\"!pending && (pendingPassword || pendingEnforcedPassword || pendingExpirationDate)\"\n\t\t\tclass=\"sharing-entry__actions\"\n\t\t\t:aria-label=\"actionsTooltip\"\n\t\t\tmenu-align=\"right\"\n\t\t\t:open.sync=\"open\"\n\t\t\t@close=\"onCancel\">\n\t\t\t<!-- pending data menu -->\n\t\t\t<NcActionText v-if=\"errors.pending\" icon=\"icon-error\" :class=\"{ error: errors.pending }\">\n\t\t\t\t{{ errors.pending }}\n\t\t\t</NcActionText>\n\t\t\t<NcActionText v-else icon=\"icon-info\">\n\t\t\t\t{{ t('files_sharing', 'Please enter the following required information before creating the share') }}\n\t\t\t</NcActionText>\n\n\t\t\t<!-- password -->\n\t\t\t<NcActionText v-if=\"pendingEnforcedPassword\" icon=\"icon-password\">\n\t\t\t\t{{ t('files_sharing', 'Password protection (enforced)') }}\n\t\t\t</NcActionText>\n\t\t\t<NcActionCheckbox v-else-if=\"pendingPassword\"\n\t\t\t\t:checked.sync=\"isPasswordProtected\"\n\t\t\t\t:disabled=\"config.enforcePasswordForPublicLink || saving\"\n\t\t\t\tclass=\"share-link-password-checkbox\"\n\t\t\t\t@uncheck=\"onPasswordDisable\">\n\t\t\t\t{{ t('files_sharing', 'Password protection') }}\n\t\t\t</NcActionCheckbox>\n\n\t\t\t<NcActionInput v-if=\"pendingEnforcedPassword || share.password\"\n\t\t\t\tclass=\"share-link-password\"\n\t\t\t\t:value.sync=\"share.password\"\n\t\t\t\t:disabled=\"saving\"\n\t\t\t\t:required=\"config.enableLinkPasswordByDefault || config.enforcePasswordForPublicLink\"\n\t\t\t\t:minlength=\"isPasswordPolicyEnabled && config.passwordPolicy.minLength\"\n\t\t\t\ticon=\"\"\n\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t@submit=\"onNewLinkShare\">\n\t\t\t\t{{ t('files_sharing', 'Enter a password') }}\n\t\t\t</NcActionInput>\n\n\t\t\t<!-- expiration date -->\n\t\t\t<NcActionText v-if=\"pendingExpirationDate\" icon=\"icon-calendar-dark\">\n\t\t\t\t{{ t('files_sharing', 'Expiration date (enforced)') }}\n\t\t\t</NcActionText>\n\t\t\t<NcActionInput v-if=\"pendingExpirationDate\"\n\t\t\t\tclass=\"share-link-expire-date\"\n\t\t\t\t:disabled=\"saving\"\n\t\t\t\t:is-native-picker=\"true\"\n\t\t\t\t:hide-label=\"true\"\n\t\t\t\t:value=\"new Date(share.expireDate)\"\n\t\t\t\ttype=\"date\"\n\t\t\t\t:min=\"dateTomorrow\"\n\t\t\t\t:max=\"maxExpirationDateEnforced\"\n\t\t\t\t@input=\"onExpirationChange\">\n\t\t\t\t<!-- let's not submit when picked, the user\n\t\t\t\t\tmight want to still edit or copy the password -->\n\t\t\t\t{{ t('files_sharing', 'Enter a date') }}\n\t\t\t</NcActionInput>\n\n\t\t\t<NcActionButton icon=\"icon-checkmark\" @click.prevent.stop=\"onNewLinkShare\">\n\t\t\t\t{{ t('files_sharing', 'Create share') }}\n\t\t\t</NcActionButton>\n\t\t\t<NcActionButton icon=\"icon-close\" @click.prevent.stop=\"onCancel\">\n\t\t\t\t{{ t('files_sharing', 'Cancel') }}\n\t\t\t</NcActionButton>\n\t\t</NcActions>\n\n\t\t<!-- actions -->\n\t\t<NcActions v-else-if=\"!loading\"\n\t\t\tclass=\"sharing-entry__actions\"\n\t\t\t:aria-label=\"actionsTooltip\"\n\t\t\tmenu-align=\"right\"\n\t\t\t:open.sync=\"open\"\n\t\t\t@close=\"onMenuClose\">\n\t\t\t<template v-if=\"share\">\n\t\t\t\t<template v-if=\"share.canEdit && canReshare\">\n\t\t\t\t\t<NcActionButton :disabled=\"saving\" @click.prevent=\"openSharingDetails\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Tune />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('files_sharing', 'Customize link') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</template>\n\n\t\t\t\t<NcActionSeparator />\n\n\t\t\t\t<!-- external actions -->\n\t\t\t\t<ExternalShareAction v-for=\"action in externalLinkActions\"\n\t\t\t\t\t:id=\"action.id\"\n\t\t\t\t\t:key=\"action.id\"\n\t\t\t\t\t:action=\"action\"\n\t\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t\t:share=\"share\" />\n\n\t\t\t\t<!-- external legacy sharing via url (social...) -->\n\t\t\t\t<NcActionLink v-for=\"({ icon, url, name }, index) in externalLegacyLinkActions\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:href=\"url(shareLink)\"\n\t\t\t\t\t:icon=\"icon\"\n\t\t\t\t\ttarget=\"_blank\">\n\t\t\t\t\t{{ name }}\n\t\t\t\t</NcActionLink>\n\n\t\t\t\t<NcActionButton v-if=\"!isEmailShareType && canReshare\"\n\t\t\t\t\tclass=\"new-share-link\"\n\t\t\t\t\ticon=\"icon-add\"\n\t\t\t\t\t@click.prevent.stop=\"onNewLinkShare\">\n\t\t\t\t\t{{ t('files_sharing', 'Add another link') }}\n\t\t\t\t</NcActionButton>\n\n\t\t\t\t<NcActionButton v-if=\"share.canDelete\"\n\t\t\t\t\ticon=\"icon-close\"\n\t\t\t\t\t:disabled=\"saving\"\n\t\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t\t{{ t('files_sharing', 'Unshare') }}\n\t\t\t\t</NcActionButton>\n\t\t\t</template>\n\n\t\t\t<!-- Create new share -->\n\t\t\t<NcActionButton v-else-if=\"canReshare\"\n\t\t\t\tclass=\"new-share-link\"\n\t\t\t\t:title=\"t('files_sharing', 'Create a new share link')\"\n\t\t\t\t:aria-label=\"t('files_sharing', 'Create a new share link')\"\n\t\t\t\t:icon=\"loading ? 'icon-loading-small' : 'icon-add'\"\n\t\t\t\t@click.prevent.stop=\"onNewLinkShare\" />\n\t\t</NcActions>\n\n\t\t<!-- loading indicator to replace the menu -->\n\t\t<div v-else class=\"icon-loading-small sharing-entry__loading\" />\n\t</li>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { Type as ShareTypes } from '@nextcloud/sharing'\nimport Vue from 'vue'\n\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton.js'\nimport NcActionInput from '@nextcloud/vue/dist/Components/NcActionInput.js'\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink.js'\nimport NcActionText from '@nextcloud/vue/dist/Components/NcActionText.js'\nimport NcActionSeparator from '@nextcloud/vue/dist/Components/NcActionSeparator.js'\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions.js'\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\n\nimport Tune from 'vue-material-design-icons/Tune.vue'\n\nimport QuickShareSelect from './SharingEntryQuickShareSelect.vue'\n\nimport ExternalShareAction from './ExternalShareAction.vue'\nimport GeneratePassword from '../utils/GeneratePassword.js'\nimport Share from '../models/Share.js'\nimport SharesMixin from '../mixins/SharesMixin.js'\nimport ShareDetails from '../mixins/ShareDetails.js'\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nexport default {\n\tname: 'SharingEntryLink',\n\n\tcomponents: {\n\t\tExternalShareAction,\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcActionInput,\n\t\tNcActionLink,\n\t\tNcActionText,\n\t\tNcActionSeparator,\n\t\tNcAvatar,\n\t\tTune,\n\t\tQuickShareSelect,\n\t},\n\n\tmixins: [SharesMixin, ShareDetails],\n\n\tprops: {\n\t\tcanReshare: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tindex: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tshareCreationComplete: false,\n\t\t\tshowDropdown: false,\n\t\t\tcopySuccess: true,\n\t\t\tcopied: false,\n\n\t\t\t// Are we waiting for password/expiration date\n\t\t\tpending: false,\n\n\t\t\tExternalLegacyLinkActions: OCA.Sharing.ExternalLinkActions.state,\n\t\t\tExternalShareActions: OCA.Sharing.ExternalShareActions.state,\n\t\t\tlogger: getLoggerBuilder()\n\t\t\t\t.setApp('files_sharing')\n\t\t\t\t.detectUser()\n\t\t\t\t.build(),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Link share label\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\ttitle() {\n\t\t\t// if we have a valid existing share (not pending)\n\t\t\tif (this.share && this.share.id) {\n\t\t\t\tif (!this.isShareOwner && this.share.ownerDisplayName) {\n\t\t\t\t\tif (this.isEmailShareType) {\n\t\t\t\t\t\treturn t('files_sharing', '{shareWith} by {initiator}', {\n\t\t\t\t\t\t\tshareWith: this.share.shareWith,\n\t\t\t\t\t\t\tinitiator: this.share.ownerDisplayName,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\treturn t('files_sharing', 'Shared via link by {initiator}', {\n\t\t\t\t\t\tinitiator: this.share.ownerDisplayName,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (this.share.label && this.share.label.trim() !== '') {\n\t\t\t\t\tif (this.isEmailShareType) {\n\t\t\t\t\t\treturn t('files_sharing', 'Mail share ({label})', {\n\t\t\t\t\t\t\tlabel: this.share.label.trim(),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\treturn t('files_sharing', 'Share link ({label})', {\n\t\t\t\t\t\tlabel: this.share.label.trim(),\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (this.isEmailShareType) {\n\t\t\t\t\treturn this.share.shareWith\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.index > 1) {\n\t\t\t\treturn t('files_sharing', 'Share link ({index})', { index: this.index })\n\t\t\t}\n\t\t\treturn t('files_sharing', 'Share link')\n\t\t},\n\n\t\t/**\n\t\t * Show the email on a second line if a label is set for mail shares\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tsubtitle() {\n\t\t\tif (this.isEmailShareType\n\t\t\t\t&& this.title !== this.share.shareWith) {\n\t\t\t\treturn this.share.shareWith\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t\t/**\n\t\t * Is the current share password protected ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPasswordProtected: {\n\t\t\tget() {\n\t\t\t\treturn this.config.enforcePasswordForPublicLink\n\t\t\t\t\t|| !!this.share.password\n\t\t\t},\n\t\t\tasync set(enabled) {\n\t\t\t\t// TODO: directly save after generation to make sure the share is always protected\n\t\t\t\tVue.set(this.share, 'password', enabled ? await GeneratePassword() : '')\n\t\t\t\tVue.set(this.share, 'newPassword', this.share.password)\n\t\t\t},\n\t\t},\n\n\t\tpasswordExpirationTime() {\n\t\t\tif (this.share.passwordExpirationTime === null) {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t\tconst expirationTime = moment(this.share.passwordExpirationTime)\n\n\t\t\tif (expirationTime.diff(moment()) < 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn expirationTime.fromNow()\n\t\t},\n\n\t\t/**\n\t\t * Is Talk enabled?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisTalkEnabled() {\n\t\t\treturn OC.appswebroots.spreed !== undefined\n\t\t},\n\n\t\t/**\n\t\t * Is it possible to protect the password by Talk?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPasswordProtectedByTalkAvailable() {\n\t\t\treturn this.isPasswordProtected && this.isTalkEnabled\n\t\t},\n\n\t\t/**\n\t\t * Is the current share password protected by Talk?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPasswordProtectedByTalk: {\n\t\t\tget() {\n\t\t\t\treturn this.share.sendPasswordByTalk\n\t\t\t},\n\t\t\tasync set(enabled) {\n\t\t\t\tthis.share.sendPasswordByTalk = enabled\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * Is the current share an email share ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisEmailShareType() {\n\t\t\treturn this.share\n\t\t\t\t? this.share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL\n\t\t\t\t: false\n\t\t},\n\n\t\tcanTogglePasswordProtectedByTalkAvailable() {\n\t\t\tif (!this.isPasswordProtected) {\n\t\t\t\t// Makes no sense\n\t\t\t\treturn false\n\t\t\t} else if (this.isEmailShareType && !this.hasUnsavedPassword) {\n\t\t\t\t// For email shares we need a new password in order to enable or\n\t\t\t\t// disable\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\t// Anything else should be fine\n\t\t\treturn true\n\t\t},\n\n\t\t/**\n\t\t * Pending data.\n\t\t * If the share still doesn't have an id, it is not synced\n\t\t * Therefore this is still not valid and requires user input\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tpendingPassword() {\n\t\t\treturn this.config.enableLinkPasswordByDefault && this.share && !this.share.id\n\t\t},\n\t\tpendingEnforcedPassword() {\n\t\t\treturn this.config.enforcePasswordForPublicLink && this.share && !this.share.id\n\t\t},\n\t\tpendingExpirationDate() {\n\t\t\treturn this.config.isDefaultExpireDateEnforced && this.share && !this.share.id\n\t\t},\n\n\t\tsharePolicyHasRequiredProperties() {\n\t\t\treturn this.config.enforcePasswordForPublicLink || this.config.isDefaultExpireDateEnforced\n\t\t},\n\n\t\trequiredPropertiesMissing() {\n\t\t\t// Ensure share exist and the share policy has required properties\n\t\t\tif (!this.sharePolicyHasRequiredProperties) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!this.share) {\n\t\t\t\t// if no share, we can't tell if properties are missing or not so we assume properties are missing\n\t\t\t    return true\n\t\t\t}\n\n\t\t\t// If share has ID, then this is an incoming link share created from the existing link share\n\t\t\t// Hence assume required properties\n\t\t\tif (this.share.id) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\t// Check if either password or expiration date is missing and enforced\n\t\t\tconst isPasswordMissing = this.config.enforcePasswordForPublicLink && !this.share.password\n\t\t\tconst isExpireDateMissing = this.config.isDefaultExpireDateEnforced && !this.share.expireDate\n\n\t\t\treturn isPasswordMissing || isExpireDateMissing\n\t\t},\n\t\t// if newPassword exists, but is empty, it means\n\t\t// the user deleted the original password\n\t\thasUnsavedPassword() {\n\t\t\treturn this.share.newPassword !== undefined\n\t\t},\n\n\t\t/**\n\t\t * Return the public share link\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tshareLink() {\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl('/s/') + this.share.token\n\t\t},\n\n\t\t/**\n\t\t * Tooltip message for actions button\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tactionsTooltip() {\n\t\t\treturn t('files_sharing', 'Actions for \"{title}\"', { title: this.title })\n\t\t},\n\n\t\t/**\n\t\t * Tooltip message for copy button\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tcopyLinkTooltip() {\n\t\t\tif (this.copied) {\n\t\t\t\tif (this.copySuccess) {\n\t\t\t\t\treturn ''\n\t\t\t\t}\n\t\t\t\treturn t('files_sharing', 'Cannot copy, please copy the link manually')\n\t\t\t}\n\t\t\treturn t('files_sharing', 'Copy public link of \"{title}\" to clipboard', { title: this.title })\n\t\t},\n\n\t\t/**\n\t\t * External additionnai actions for the menu\n\t\t *\n\t\t * @deprecated use OCA.Sharing.ExternalShareActions\n\t\t * @return {Array}\n\t\t */\n\t\texternalLegacyLinkActions() {\n\t\t\treturn this.ExternalLegacyLinkActions.actions\n\t\t},\n\n\t\t/**\n\t\t * Additional actions for the menu\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\texternalLinkActions() {\n\t\t\t// filter only the registered actions for said link\n\t\t\treturn this.ExternalShareActions.actions\n\t\t\t\t.filter(action => action.shareType.includes(ShareTypes.SHARE_TYPE_LINK)\n\t\t\t\t\t|| action.shareType.includes(ShareTypes.SHARE_TYPE_EMAIL))\n\t\t},\n\n\t\tisPasswordPolicyEnabled() {\n\t\t\treturn typeof this.config.passwordPolicy === 'object'\n\t\t},\n\n\t\tcanChangeHideDownload() {\n\t\t\tconst hasDisabledDownload = (shareAttribute) => shareAttribute.key === 'download' && shareAttribute.scope === 'permissions' && shareAttribute.enabled === false\n\t\t\treturn this.fileInfo.shareAttributes.some(hasDisabledDownload)\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Create a new share link and append it to the list\n\t\t */\n\t\tasync onNewLinkShare() {\n\t\t\tthis.logger.debug('onNewLinkShare called (with this.share)', this.share)\n\t\t\t// do not run again if already loading\n\t\t\tif (this.loading) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst shareDefaults = {\n\t\t\t\tshare_type: ShareTypes.SHARE_TYPE_LINK,\n\t\t\t}\n\t\t\tif (this.config.isDefaultExpireDateEnforced) {\n\t\t\t\t// default is empty string if not set\n\t\t\t\t// expiration is the share object key, not expireDate\n\t\t\t\tshareDefaults.expiration = this.formatDateToString(this.config.defaultExpirationDate)\n\t\t\t}\n\n\t\t\tthis.logger.debug('Missing required properties?', this.requiredPropertiesMissing)\n\t\t\t// do not push yet if we need a password or an expiration date: show pending menu\n\t\t\tif (this.sharePolicyHasRequiredProperties && this.requiredPropertiesMissing) {\n\t\t\t\tthis.pending = true\n\t\t\t\tthis.shareCreationComplete = false\n\n\t\t\t\tthis.logger.info('Share policy requires mandated properties (password)...')\n\n\t\t\t\t// ELSE, show the pending popovermenu\n\t\t\t\t// if password default or enforced, pre-fill with random one\n\t\t\t\tif (this.config.enableLinkPasswordByDefault || this.config.enforcePasswordForPublicLink) {\n\t\t\t\t\tshareDefaults.password = await GeneratePassword()\n\t\t\t\t}\n\n\t\t\t\t// create share & close menu\n\t\t\t\tconst share = new Share(shareDefaults)\n\t\t\t\tconst component = await new Promise(resolve => {\n\t\t\t\t\tthis.$emit('add:share', share, resolve)\n\t\t\t\t})\n\n\t\t\t\t// open the menu on the\n\t\t\t\t// freshly created share component\n\t\t\t\tthis.open = false\n\t\t\t\tthis.pending = false\n\t\t\t\tcomponent.open = true\n\n\t\t\t\t// Nothing is enforced, creating share directly\n\t\t\t} else {\n\n\t\t\t\t// if a share already exists, pushing it\n\t\t\t\tif (this.share && !this.share.id) {\n\t\t\t\t\t// if the share is valid, create it on the server\n\t\t\t\t\tif (this.checkShare(this.share)) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthis.logger.info('Sending existing share to server', this.share)\n\t\t\t\t\t\t\tawait this.pushNewLinkShare(this.share, true)\n\t\t\t\t\t\t\tthis.shareCreationComplete = true\n\t\t\t\t\t\t\tthis.logger.info('Share created on server', this.share)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthis.pending = false\n\t\t\t\t\t\t\tthis.logger.error('Error creating share', e)\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.open = true\n\t\t\t\t\t\tshowError(t('files_sharing', 'Error, please enter proper password and/or expiration date'))\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst share = new Share(shareDefaults)\n\t\t\t\tawait this.pushNewLinkShare(share)\n\t\t\t\tthis.shareCreationComplete = true\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Push a new link share to the server\n\t\t * And update or append to the list\n\t\t * accordingly\n\t\t *\n\t\t * @param {Share} share the new share\n\t\t * @param {boolean} [update] do we update the current share ?\n\t\t */\n\t\tasync pushNewLinkShare(share, update) {\n\t\t\ttry {\n\t\t\t\t// do nothing if we're already pending creation\n\t\t\t\tif (this.loading) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.errors = {}\n\n\t\t\t\tconst path = (this.fileInfo.path + '/' + this.fileInfo.name).replace('//', '/')\n\t\t\t\tconst options = {\n\t\t\t\t\tpath,\n\t\t\t\t\tshareType: ShareTypes.SHARE_TYPE_LINK,\n\t\t\t\t\tpassword: share.password,\n\t\t\t\t\texpireDate: share.expireDate,\n\t\t\t\t\tattributes: JSON.stringify(this.fileInfo.shareAttributes),\n\t\t\t\t\t// we do not allow setting the publicUpload\n\t\t\t\t\t// before the share creation.\n\t\t\t\t\t// Todo: We also need to fix the createShare method in\n\t\t\t\t\t// lib/Controller/ShareAPIController.php to allow file drop\n\t\t\t\t\t// (currently not supported on create, only update)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug('Creating link share with options', options)\n\t\t\t\tconst newShare = await this.createShare(options)\n\n\t\t\t\tthis.open = false\n\t\t\t\tthis.shareCreationComplete = true\n\t\t\t\tconsole.debug('Link share created', newShare)\n\t\t\t\t// if share already exists, copy link directly on next tick\n\t\t\t\tlet component\n\t\t\t\tif (update) {\n\t\t\t\t\tcomponent = await new Promise(resolve => {\n\t\t\t\t\t\tthis.$emit('update:share', newShare, resolve)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// adding new share to the array and copying link to clipboard\n\t\t\t\t\t// using promise so that we can copy link in the same click function\n\t\t\t\t\t// and avoid firefox copy permissions issue\n\t\t\t\t\tcomponent = await new Promise(resolve => {\n\t\t\t\t\t\tthis.$emit('add:share', newShare, resolve)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// Execute the copy link method\n\t\t\t\t// freshly created share component\n\t\t\t\t// ! somehow does not works on firefox !\n\t\t\t\tif (!this.config.enforcePasswordForPublicLink) {\n\t\t\t\t\t// Only copy the link when the password was not forced,\n\t\t\t\t\t// otherwise the user needs to copy/paste the password before finishing the share.\n\t\t\t\t\tcomponent.copyLink()\n\t\t\t\t}\n\t\t\t\tshowSuccess(t('files_sharing', 'Link share created'))\n\n\t\t\t} catch (data) {\n\t\t\t\tconst message = data?.response?.data?.ocs?.meta?.message\n\t\t\t\tif (!message) {\n\t\t\t\t\tshowError(t('files_sharing', 'Error while creating the share'))\n\t\t\t\t\tconsole.error(data)\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (message.match(/password/i)) {\n\t\t\t\t\tthis.onSyncError('password', message)\n\t\t\t\t} else if (message.match(/date/i)) {\n\t\t\t\t\tthis.onSyncError('expireDate', message)\n\t\t\t\t} else {\n\t\t\t\t\tthis.onSyncError('pending', message)\n\t\t\t\t}\n\t\t\t\tthrow data\n\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t\tthis.shareCreationComplete = true\n\t\t\t}\n\t\t},\n\t\tasync copyLink() {\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText(this.shareLink)\n\t\t\t\tshowSuccess(t('files_sharing', 'Link copied'))\n\t\t\t\t// focus and show the tooltip\n\t\t\t\tthis.$refs.copyButton.$el.focus()\n\t\t\t\tthis.copySuccess = true\n\t\t\t\tthis.copied = true\n\t\t\t} catch (error) {\n\t\t\t\tthis.copySuccess = false\n\t\t\t\tthis.copied = true\n\t\t\t\tconsole.error(error)\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.copySuccess = false\n\t\t\t\t\tthis.copied = false\n\t\t\t\t}, 4000)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update newPassword values\n\t\t * of share. If password is set but not newPassword\n\t\t * then the user did not changed the password\n\t\t * If both co-exists, the password have changed and\n\t\t * we show it in plain text.\n\t\t * Then on submit (or menu close), we sync it.\n\t\t *\n\t\t * @param {string} password the changed password\n\t\t */\n\t\tonPasswordChange(password) {\n\t\t\tthis.$set(this.share, 'newPassword', password)\n\t\t},\n\n\t\t/**\n\t\t * Uncheck password protection\n\t\t * We need this method because @update:checked\n\t\t * is ran simultaneously as @uncheck, so we\n\t\t * cannot ensure data is up-to-date\n\t\t */\n\t\tonPasswordDisable() {\n\t\t\tthis.share.password = ''\n\n\t\t\t// reset password state after sync\n\t\t\tthis.$delete(this.share, 'newPassword')\n\n\t\t\t// only update if valid share.\n\t\t\tif (this.share.id) {\n\t\t\t\tthis.queueUpdate('password')\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Menu have been closed or password has been submitted.\n\t\t * The only property that does not get\n\t\t * synced automatically is the password\n\t\t * So let's check if we have an unsaved\n\t\t * password.\n\t\t * expireDate is saved on datepicker pick\n\t\t * or close.\n\t\t */\n\t\tonPasswordSubmit() {\n\t\t\tif (this.hasUnsavedPassword) {\n\t\t\t\tthis.share.password = this.share.newPassword.trim()\n\t\t\t\tthis.queueUpdate('password')\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update the password along with \"sendPasswordByTalk\".\n\t\t *\n\t\t * If the password was modified the new password is sent; otherwise\n\t\t * updating a mail share would fail, as in that case it is required that\n\t\t * a new password is set when enabling or disabling\n\t\t * \"sendPasswordByTalk\".\n\t\t */\n\t\tonPasswordProtectedByTalkChange() {\n\t\t\tif (this.hasUnsavedPassword) {\n\t\t\t\tthis.share.password = this.share.newPassword.trim()\n\t\t\t}\n\n\t\t\tthis.queueUpdate('sendPasswordByTalk', 'password')\n\t\t},\n\n\t\t/**\n\t\t * Save potential changed data on menu close\n\t\t */\n\t\tonMenuClose() {\n\t\t\tthis.onPasswordSubmit()\n\t\t\tthis.onNoteSubmit()\n\t\t},\n\n\t\t/**\n\t\t * Cancel the share creation\n\t\t * Used in the pending popover\n\t\t */\n\t\tonCancel() {\n\t\t\t// this.share already exists at this point,\n\t\t\t// but is incomplete as not pushed to server\n\t\t\t// YET. We can safely delete the share :)\n\t\t\tif (!this.shareCreationComplete) {\n\t\t\t\tthis.$emit('remove:share', this.share)\n\t\t\t}\n\t\t},\n\n\t\ttoggleQuickShareSelect() {\n\t\t\tthis.showDropdown = !this.showDropdown\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\n\t&__summary {\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\twidth: 80%;\n\t\tmin-width: 80%;\n\n\t\t&__desc {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tline-height: 1.2em;\n\n\t\t\tp {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\t&__title {\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\toverflow: hidden;\n\t\t\t\twhite-space: nowrap;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t&:not(.sharing-entry--share) &__actions {\n\t\t.new-share-link {\n\t\t\tborder-top: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t::v-deep .avatar-link-share {\n\t\tbackground-color: var(--color-primary-element);\n\t}\n\n\t.sharing-entry__action--public-upload {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t}\n\n\t&__loading {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 14px;\n\t\tmargin-left: auto;\n\t}\n\n\t// put menus to the left\n\t// but only the first one\n\t.action-item {\n\n\t\t~.action-item,\n\t\t~.sharing-entry__loading {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=style&index=0&id=cc82d906&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntryLink.vue?vue&type=style&index=0&id=cc82d906&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntryLink.vue?vue&type=template&id=cc82d906&scoped=true\"\nimport script from \"./SharingEntryLink.vue?vue&type=script&lang=js\"\nexport * from \"./SharingEntryLink.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingEntryLink.vue?vue&type=style&index=0&id=cc82d906&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc82d906\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingLinkList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingLinkList.vue?vue&type=script&lang=js\"","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<ul v-if=\"canLinkShare\" class=\"sharing-link-list\">\n\t\t<!-- If no link shares, show the add link default entry -->\n\t\t<SharingEntryLink v-if=\"!hasLinkShares && canReshare\"\n\t\t\t:can-reshare=\"canReshare\"\n\t\t\t:file-info=\"fileInfo\"\n\t\t\t@add:share=\"addShare\" />\n\n\t\t<!-- Else we display the list -->\n\t\t<template v-if=\"hasShares\">\n\t\t\t<!-- using shares[index] to work with .sync -->\n\t\t\t<SharingEntryLink v-for=\"(share, index) in shares\"\n\t\t\t\t:key=\"share.id\"\n\t\t\t\t:index=\"shares.length > 1 ? index + 1 : null\"\n\t\t\t\t:can-reshare=\"canReshare\"\n\t\t\t\t:share.sync=\"shares[index]\"\n\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t@add:share=\"addShare(...arguments)\"\n\t\t\t\t@update:share=\"awaitForShare(...arguments)\"\n\t\t\t\t@remove:share=\"removeShare\"\n\t\t\t\t@open-sharing-details=\"openSharingDetails(share)\" />\n\t\t</template>\n\t</ul>\n</template>\n\n<script>\n// eslint-disable-next-line no-unused-vars\nimport Share from '../models/Share.js'\nimport ShareTypes from '../mixins/ShareTypes.js'\nimport SharingEntryLink from '../components/SharingEntryLink.vue'\nimport ShareDetails from '../mixins/ShareDetails.js'\n\nexport default {\n\tname: 'SharingLinkList',\n\n\tcomponents: {\n\t\tSharingEntryLink,\n\t},\n\n\tmixins: [ShareTypes, ShareDetails],\n\n\tprops: {\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t\trequired: true,\n\t\t},\n\t\tshares: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t\trequired: true,\n\t\t},\n\t\tcanReshare: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tcanLinkShare: OC.getCapabilities().files_sharing.public.enabled,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Do we have link shares?\n\t\t * Using this to still show the `new link share`\n\t\t * button regardless of mail shares\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\thasLinkShares() {\n\t\t\treturn this.shares.filter(share => share.type === this.SHARE_TYPES.SHARE_TYPE_LINK).length > 0\n\t\t},\n\n\t\t/**\n\t\t * Do we have any link or email shares?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\thasShares() {\n\t\t\treturn this.shares.length > 0\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Add a new share into the link shares list\n\t\t * and return the newly created share component\n\t\t *\n\t\t * @param {Share} share the share to add to the array\n\t\t * @param {Function} resolve a function to run after the share is added and its component initialized\n\t\t */\n\t\taddShare(share, resolve) {\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\tthis.shares.unshift(share)\n\t\t\tthis.awaitForShare(share, resolve)\n\t\t},\n\n\t\t/**\n\t\t * Await for next tick and render after the list updated\n\t\t * Then resolve with the matched vue component of the\n\t\t * provided share object\n\t\t *\n\t\t * @param {Share} share newly created share\n\t\t * @param {Function} resolve a function to execute after\n\t\t */\n\t\tawaitForShare(share, resolve) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst newShare = this.$children.find(component => component.share === share)\n\t\t\t\tif (newShare) {\n\t\t\t\t\tresolve(newShare)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Remove a share from the shares list\n\t\t *\n\t\t * @param {Share} share the share to remove\n\t\t */\n\t\tremoveShare(share) {\n\t\t\tconst index = this.shares.findIndex(item => item === share)\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\tthis.shares.splice(index, 1)\n\t\t},\n\t},\n}\n</script>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"sharing-entry sharing-entry__link\",class:{ 'sharing-entry--share': _vm.share }},[_c('NcAvatar',{staticClass:\"sharing-entry__avatar\",attrs:{\"is-no-user\":true,\"icon-class\":_vm.isEmailShareType ? 'avatar-link-share icon-mail-white' : 'avatar-link-share icon-public-white'}}),_vm._v(\" \"),_c('div',{staticClass:\"sharing-entry__summary\"},[_c('div',{staticClass:\"sharing-entry__desc\",on:{\"click\":function($event){$event.preventDefault();return _vm.toggleQuickShareSelect.apply(null, arguments)}}},[_c('span',{staticClass:\"sharing-entry__title\",attrs:{\"title\":_vm.title}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.title)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.subtitle)?_c('p',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.subtitle)+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.share && _vm.share.permissions !== undefined)?_c('QuickShareSelect',{attrs:{\"share\":_vm.share,\"file-info\":_vm.fileInfo,\"toggle\":_vm.showDropdown},on:{\"open-sharing-details\":function($event){return _vm.openShareDetailsForCustomSettings(_vm.share)}}}):_vm._e()],1),_vm._v(\" \"),(_vm.share && !_vm.isEmailShareType && _vm.share.token)?_c('NcActions',{ref:\"copyButton\",staticClass:\"sharing-entry__copy\"},[_c('NcActionLink',{attrs:{\"href\":_vm.shareLink,\"target\":\"_blank\",\"title\":_vm.copyLinkTooltip,\"aria-label\":_vm.copyLinkTooltip,\"icon\":_vm.copied && _vm.copySuccess ? 'icon-checkmark-color' : 'icon-clippy'},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.copyLink.apply(null, arguments)}}})],1):_vm._e()],1),_vm._v(\" \"),(!_vm.pending && (_vm.pendingPassword || _vm.pendingEnforcedPassword || _vm.pendingExpirationDate))?_c('NcActions',{staticClass:\"sharing-entry__actions\",attrs:{\"aria-label\":_vm.actionsTooltip,\"menu-align\":\"right\",\"open\":_vm.open},on:{\"update:open\":function($event){_vm.open=$event},\"close\":_vm.onCancel}},[(_vm.errors.pending)?_c('NcActionText',{class:{ error: _vm.errors.pending },attrs:{\"icon\":\"icon-error\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.errors.pending)+\"\\n\\t\\t\")]):_c('NcActionText',{attrs:{\"icon\":\"icon-info\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Please enter the following required information before creating the share'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.pendingEnforcedPassword)?_c('NcActionText',{attrs:{\"icon\":\"icon-password\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Password protection (enforced)'))+\"\\n\\t\\t\")]):(_vm.pendingPassword)?_c('NcActionCheckbox',{staticClass:\"share-link-password-checkbox\",attrs:{\"checked\":_vm.isPasswordProtected,\"disabled\":_vm.config.enforcePasswordForPublicLink || _vm.saving},on:{\"update:checked\":function($event){_vm.isPasswordProtected=$event},\"uncheck\":_vm.onPasswordDisable}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Password protection'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.pendingEnforcedPassword || _vm.share.password)?_c('NcActionInput',{staticClass:\"share-link-password\",attrs:{\"value\":_vm.share.password,\"disabled\":_vm.saving,\"required\":_vm.config.enableLinkPasswordByDefault || _vm.config.enforcePasswordForPublicLink,\"minlength\":_vm.isPasswordPolicyEnabled && _vm.config.passwordPolicy.minLength,\"icon\":\"\",\"autocomplete\":\"new-password\"},on:{\"update:value\":function($event){return _vm.$set(_vm.share, \"password\", $event)},\"submit\":_vm.onNewLinkShare}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Enter a password'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.pendingExpirationDate)?_c('NcActionText',{attrs:{\"icon\":\"icon-calendar-dark\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Expiration date (enforced)'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.pendingExpirationDate)?_c('NcActionInput',{staticClass:\"share-link-expire-date\",attrs:{\"disabled\":_vm.saving,\"is-native-picker\":true,\"hide-label\":true,\"value\":new Date(_vm.share.expireDate),\"type\":\"date\",\"min\":_vm.dateTomorrow,\"max\":_vm.maxExpirationDateEnforced},on:{\"input\":_vm.onExpirationChange}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Enter a date'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"icon\":\"icon-checkmark\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onNewLinkShare.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Create share'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"icon\":\"icon-close\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onCancel.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Cancel'))+\"\\n\\t\\t\")])],1):(!_vm.loading)?_c('NcActions',{staticClass:\"sharing-entry__actions\",attrs:{\"aria-label\":_vm.actionsTooltip,\"menu-align\":\"right\",\"open\":_vm.open},on:{\"update:open\":function($event){_vm.open=$event},\"close\":_vm.onMenuClose}},[(_vm.share)?[(_vm.share.canEdit && _vm.canReshare)?[_c('NcActionButton',{attrs:{\"disabled\":_vm.saving},on:{\"click\":function($event){$event.preventDefault();return _vm.openSharingDetails.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Tune')]},proxy:true}],null,false,961531849)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Customize link'))+\"\\n\\t\\t\\t\\t\")])]:_vm._e(),_vm._v(\" \"),_c('NcActionSeparator'),_vm._v(\" \"),_vm._l((_vm.externalLinkActions),function(action){return _c('ExternalShareAction',{key:action.id,attrs:{\"id\":action.id,\"action\":action,\"file-info\":_vm.fileInfo,\"share\":_vm.share}})}),_vm._v(\" \"),_vm._l((_vm.externalLegacyLinkActions),function({ icon, url, name },index){return _c('NcActionLink',{key:index,attrs:{\"href\":url(_vm.shareLink),\"icon\":icon,\"target\":\"_blank\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(name)+\"\\n\\t\\t\\t\")])}),_vm._v(\" \"),(!_vm.isEmailShareType && _vm.canReshare)?_c('NcActionButton',{staticClass:\"new-share-link\",attrs:{\"icon\":\"icon-add\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onNewLinkShare.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Add another link'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.share.canDelete)?_c('NcActionButton',{attrs:{\"icon\":\"icon-close\",\"disabled\":_vm.saving},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Unshare'))+\"\\n\\t\\t\\t\")]):_vm._e()]:(_vm.canReshare)?_c('NcActionButton',{staticClass:\"new-share-link\",attrs:{\"title\":_vm.t('files_sharing', 'Create a new share link'),\"aria-label\":_vm.t('files_sharing', 'Create a new share link'),\"icon\":_vm.loading ? 'icon-loading-small' : 'icon-add'},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onNewLinkShare.apply(null, arguments)}}}):_vm._e()],2):_c('div',{staticClass:\"icon-loading-small sharing-entry__loading\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./SharingLinkList.vue?vue&type=template&id=9d43db72\"\nimport script from \"./SharingLinkList.vue?vue&type=script&lang=js\"\nexport * from \"./SharingLinkList.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"sharing-sharee-list\"},_vm._l((_vm.shares),function(share){return _c('SharingEntry',{key:share.id,attrs:{\"file-info\":_vm.fileInfo,\"share\":share,\"is-unique\":_vm.isUnique(share)},on:{\"open-sharing-details\":function($event){return _vm.openSharingDetails(share)}}})}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<li class=\"sharing-entry\">\n\t\t<NcAvatar class=\"sharing-entry__avatar\"\n\t\t\t:is-no-user=\"share.type !== SHARE_TYPES.SHARE_TYPE_USER\"\n\t\t\t:user=\"share.shareWith\"\n\t\t\t:display-name=\"share.shareWithDisplayName\"\n\t\t\t:menu-position=\"'left'\"\n\t\t\t:url=\"share.shareWithAvatar\" />\n\n\t\t<div class=\"sharing-entry__summary\" @click.prevent=\"toggleQuickShareSelect\">\n\t\t\t<component :is=\"share.shareWithLink ? 'a' : 'div'\"\n\t\t\t\t:title=\"tooltip\"\n\t\t\t\t:aria-label=\"tooltip\"\n\t\t\t\t:href=\"share.shareWithLink\"\n\t\t\t\tclass=\"sharing-entry__summary__desc\">\n\t\t\t\t<span>{{ title }}\n\t\t\t\t\t<span v-if=\"!isUnique\" class=\"sharing-entry__summary__desc-unique\"> ({{\n\t\t\t\t\t\tshare.shareWithDisplayNameUnique }})</span>\n\t\t\t\t\t<small v-if=\"hasStatus && share.status.message\">({{ share.status.message }})</small>\n\t\t\t\t</span>\n\t\t\t</component>\n\t\t\t<QuickShareSelect :share=\"share\"\n\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t:toggle=\"showDropdown\"\n\t\t\t\t@open-sharing-details=\"openShareDetailsForCustomSettings(share)\" />\n\t\t</div>\n\t\t<NcButton class=\"sharing-entry__action\"\n\t\t\t:aria-label=\"t('files_sharing', 'Open Sharing Details')\"\n\t\t\ttype=\"tertiary-no-background\"\n\t\t\t@click=\"openSharingDetails(share)\">\n\t\t\t<template #icon>\n\t\t\t\t<DotsHorizontalIcon :size=\"20\" />\n\t\t\t</template>\n\t\t</NcButton>\n\t</li>\n</template>\n\n<script>\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcSelect from '@nextcloud/vue/dist/Components/NcSelect.js'\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal.vue'\n\nimport QuickShareSelect from './SharingEntryQuickShareSelect.vue'\n\nimport SharesMixin from '../mixins/SharesMixin.js'\nimport ShareDetails from '../mixins/ShareDetails.js'\n\nexport default {\n\tname: 'SharingEntry',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tNcAvatar,\n\t\tDotsHorizontalIcon,\n\t\tNcSelect,\n\t\tQuickShareSelect,\n\t},\n\n\tmixins: [SharesMixin, ShareDetails],\n\n\tdata() {\n\t\treturn {\n\t\t\tshowDropdown: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\tlet title = this.share.shareWithDisplayName\n\t\t\tif (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GROUP) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'group')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_ROOM) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'conversation')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'remote')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'remote group')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GUEST) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'guest')})`\n\t\t\t}\n\t\t\treturn title\n\t\t},\n\t\ttooltip() {\n\t\t\tif (this.share.owner !== this.share.uidFileOwner) {\n\t\t\t\tconst data = {\n\t\t\t\t\t// todo: strong or italic?\n\t\t\t\t\t// but the t function escape any html from the data :/\n\t\t\t\t\tuser: this.share.shareWithDisplayName,\n\t\t\t\t\towner: this.share.ownerDisplayName,\n\t\t\t\t}\n\t\t\t\tif (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GROUP) {\n\t\t\t\t\treturn t('files_sharing', 'Shared with the group {user} by {owner}', data)\n\t\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_ROOM) {\n\t\t\t\t\treturn t('files_sharing', 'Shared with the conversation {user} by {owner}', data)\n\t\t\t\t}\n\n\t\t\t\treturn t('files_sharing', 'Shared with {user} by {owner}', data)\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\thasStatus() {\n\t\t\tif (this.share.type !== this.SHARE_TYPES.SHARE_TYPE_USER) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn (typeof this.share.status === 'object' && !Array.isArray(this.share.status))\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Save potential changed data on menu close\n\t\t */\n\t\tonMenuClose() {\n\t\t\tthis.onNoteSubmit()\n\t\t},\n\t\ttoggleQuickShareSelect() {\n\t\t\tthis.showDropdown = !this.showDropdown\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\n\t&__summary {\n\t\tpadding: 8px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\twidth: 80%;\n\t\tmin-width: 80%;\n\n\t\t&__desc {\n\t\t\tdisplay: inline-block;\n\t\t\tpadding-bottom: 0;\n\t\t\tline-height: 1.2em;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\n\t\t\tp,\n\t\t\tsmall {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\t&-unique {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\t\t}\n\t}\n\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=style&index=0&id=7bfd2f06&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingEntry.vue?vue&type=style&index=0&id=7bfd2f06&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingEntry.vue?vue&type=template&id=7bfd2f06&scoped=true\"\nimport script from \"./SharingEntry.vue?vue&type=script&lang=js\"\nexport * from \"./SharingEntry.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingEntry.vue?vue&type=style&index=0&id=7bfd2f06&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bfd2f06\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingList.vue?vue&type=script&lang=js\"","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<ul class=\"sharing-sharee-list\">\n\t\t<SharingEntry v-for=\"share in shares\"\n\t\t\t:key=\"share.id\"\n\t\t\t:file-info=\"fileInfo\"\n\t\t\t:share=\"share\"\n\t\t\t:is-unique=\"isUnique(share)\"\n\t\t\t@open-sharing-details=\"openSharingDetails(share)\" />\n\t</ul>\n</template>\n\n<script>\n// eslint-disable-next-line no-unused-vars\nimport SharingEntry from '../components/SharingEntry.vue'\nimport ShareTypes from '../mixins/ShareTypes.js'\nimport ShareDetails from '../mixins/ShareDetails.js'\n\nexport default {\n\tname: 'SharingList',\n\n\tcomponents: {\n\t\tSharingEntry,\n\t},\n\n\tmixins: [ShareTypes, ShareDetails],\n\n\tprops: {\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => { },\n\t\t\trequired: true,\n\t\t},\n\t\tshares: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\thasShares() {\n\t\t\treturn this.shares.length === 0\n\t\t},\n\t\tisUnique() {\n\t\t\treturn (share) => {\n\t\t\t\treturn [...this.shares].filter((item) => {\n\t\t\t\t\treturn share.type === this.SHARE_TYPES.SHARE_TYPE_USER && share.shareWithDisplayName === item.shareWithDisplayName\n\t\t\t\t}).length <= 1\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"sharing-entry\"},[_c('NcAvatar',{staticClass:\"sharing-entry__avatar\",attrs:{\"is-no-user\":_vm.share.type !== _vm.SHARE_TYPES.SHARE_TYPE_USER,\"user\":_vm.share.shareWith,\"display-name\":_vm.share.shareWithDisplayName,\"menu-position\":'left',\"url\":_vm.share.shareWithAvatar}}),_vm._v(\" \"),_c('div',{staticClass:\"sharing-entry__summary\",on:{\"click\":function($event){$event.preventDefault();return _vm.toggleQuickShareSelect.apply(null, arguments)}}},[_c(_vm.share.shareWithLink ? 'a' : 'div',{tag:\"component\",staticClass:\"sharing-entry__summary__desc\",attrs:{\"title\":_vm.tooltip,\"aria-label\":_vm.tooltip,\"href\":_vm.share.shareWithLink}},[_c('span',[_vm._v(_vm._s(_vm.title)+\"\\n\\t\\t\\t\\t\"),(!_vm.isUnique)?_c('span',{staticClass:\"sharing-entry__summary__desc-unique\"},[_vm._v(\" (\"+_vm._s(_vm.share.shareWithDisplayNameUnique)+\")\")]):_vm._e(),_vm._v(\" \"),(_vm.hasStatus && _vm.share.status.message)?_c('small',[_vm._v(\"(\"+_vm._s(_vm.share.status.message)+\")\")]):_vm._e()])]),_vm._v(\" \"),_c('QuickShareSelect',{attrs:{\"share\":_vm.share,\"file-info\":_vm.fileInfo,\"toggle\":_vm.showDropdown},on:{\"open-sharing-details\":function($event){return _vm.openShareDetailsForCustomSettings(_vm.share)}}})],1),_vm._v(\" \"),_c('NcButton',{staticClass:\"sharing-entry__action\",attrs:{\"aria-label\":_vm.t('files_sharing', 'Open Sharing Details'),\"type\":\"tertiary-no-background\"},on:{\"click\":function($event){return _vm.openSharingDetails(_vm.share)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DotsHorizontalIcon',{attrs:{\"size\":20}})]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./SharingList.vue?vue&type=template&id=445a39ed\"\nimport script from \"./SharingList.vue?vue&type=script&lang=js\"\nexport * from \"./SharingList.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"sharingTabDetailsView\"},[_c('div',{staticClass:\"sharingTabDetailsView__header\"},[_c('span',[(_vm.isUserShare)?_c('NcAvatar',{staticClass:\"sharing-entry__avatar\",attrs:{\"is-no-user\":_vm.share.shareType !== _vm.SHARE_TYPES.SHARE_TYPE_USER,\"user\":_vm.share.shareWith,\"display-name\":_vm.share.shareWithDisplayName,\"menu-position\":'left',\"url\":_vm.share.shareWithAvatar}}):_vm._e(),_vm._v(\" \"),_c(_vm.getShareTypeIcon(_vm.share.type),{tag:\"component\",attrs:{\"size\":32}})],1),_vm._v(\" \"),_c('span',[_c('h1',[_vm._v(_vm._s(_vm.title))])])]),_vm._v(\" \"),_c('div',{staticClass:\"sharingTabDetailsView__wrapper\"},[_c('div',{ref:\"quickPermissions\",staticClass:\"sharingTabDetailsView__quick-permissions\"},[_c('div',[_c('NcCheckboxRadioSwitch',{attrs:{\"button-variant\":true,\"checked\":_vm.sharingPermission,\"value\":_vm.bundledPermissions.READ_ONLY.toString(),\"name\":\"sharing_permission_radio\",\"type\":\"radio\",\"button-variant-grouped\":\"vertical\"},on:{\"update:checked\":[function($event){_vm.sharingPermission=$event},_vm.toggleCustomPermissions]}},[_c('ViewIcon',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('files_sharing', 'View only')))])],1),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"button-variant\":true,\"checked\":_vm.sharingPermission,\"value\":_vm.bundledPermissions.ALL.toString(),\"name\":\"sharing_permission_radio\",\"type\":\"radio\",\"button-variant-grouped\":\"vertical\"},on:{\"update:checked\":[function($event){_vm.sharingPermission=$event},_vm.toggleCustomPermissions]}},[_c('EditIcon',{attrs:{\"size\":20}}),_vm._v(\" \"),(_vm.allowsFileDrop)?[_c('span',[_vm._v(_vm._s(_vm.t('files_sharing', 'Allow upload and editing')))])]:[_c('span',[_vm._v(_vm._s(_vm.t('files_sharing', 'Allow editing')))])]],2),_vm._v(\" \"),(_vm.allowsFileDrop)?_c('NcCheckboxRadioSwitch',{attrs:{\"button-variant\":true,\"checked\":_vm.sharingPermission,\"value\":_vm.bundledPermissions.FILE_DROP.toString(),\"name\":\"sharing_permission_radio\",\"type\":\"radio\",\"button-variant-grouped\":\"vertical\"},on:{\"update:checked\":[function($event){_vm.sharingPermission=$event},_vm.toggleCustomPermissions]}},[_c('UploadIcon',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('files_sharing', 'File drop')))]),_vm._v(\" \"),_c('small',[_vm._v(_vm._s(_vm.t('files_sharing', 'Upload only')))])],1):_vm._e(),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"button-variant\":true,\"checked\":_vm.sharingPermission,\"value\":'custom',\"name\":\"sharing_permission_radio\",\"type\":\"radio\",\"button-variant-grouped\":\"vertical\"},on:{\"update:checked\":[function($event){_vm.sharingPermission=$event},_vm.expandCustomPermissions]}},[_c('DotsHorizontalIcon',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('files_sharing', 'Custom permissions')))]),_vm._v(\" \"),_c('small',[_vm._v(_vm._s(_vm.customPermissionsList))])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"sharingTabDetailsView__advanced-control\"},[_c('NcButton',{attrs:{\"id\":\"advancedSectionAccordionAdvancedControl\",\"type\":\"tertiary\",\"alignment\":\"end-reverse\"},on:{\"click\":function($event){_vm.advancedSectionAccordionExpanded = !_vm.advancedSectionAccordionExpanded}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('MenuDownIcon')]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Advanced settings'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.advancedSectionAccordionExpanded)?_c('div',{staticClass:\"sharingTabDetailsView__advanced\",attrs:{\"id\":\"advancedSectionAccordionAdvanced\",\"aria-labelledby\":\"advancedSectionAccordionAdvancedControl\",\"role\":\"region\"}},[_c('section',[(_vm.isPublicShare)?_c('NcInputField',{attrs:{\"value\":_vm.share.label,\"type\":\"text\",\"label\":_vm.t('files_sharing', 'Share label')},on:{\"update:value\":function($event){return _vm.$set(_vm.share, \"label\", $event)}}}):_vm._e(),_vm._v(\" \"),(_vm.isPublicShare)?[_c('NcCheckboxRadioSwitch',{attrs:{\"checked\":_vm.isPasswordProtected,\"disabled\":_vm.isPasswordEnforced},on:{\"update:checked\":function($event){_vm.isPasswordProtected=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Set password'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.isPasswordProtected)?_c('NcInputField',{attrs:{\"type\":_vm.hasUnsavedPassword ? 'text' : 'password',\"value\":_vm.hasUnsavedPassword ? _vm.share.newPassword : '***************',\"error\":_vm.passwordError,\"required\":_vm.isPasswordEnforced,\"label\":_vm.t('files_sharing', 'Password')},on:{\"update:value\":_vm.onPasswordChange}}):_vm._e(),_vm._v(\" \"),(_vm.isEmailShareType && _vm.passwordExpirationTime)?_c('span',{attrs:{\"icon\":\"icon-info\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Password expires {passwordExpirationTime}', { passwordExpirationTime: _vm.passwordExpirationTime }))+\"\\n\\t\\t\\t\\t\\t\")]):(_vm.isEmailShareType && _vm.passwordExpirationTime !== null)?_c('span',{attrs:{\"icon\":\"icon-error\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Password expired'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]:_vm._e(),_vm._v(\" \"),(_vm.canTogglePasswordProtectedByTalkAvailable)?_c('NcCheckboxRadioSwitch',{attrs:{\"checked\":_vm.isPasswordProtectedByTalk},on:{\"update:checked\":[function($event){_vm.isPasswordProtectedByTalk=$event},_vm.onPasswordProtectedByTalkChange]}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Video verification'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"checked\":_vm.hasExpirationDate,\"disabled\":_vm.isExpiryDateEnforced},on:{\"update:checked\":function($event){_vm.hasExpirationDate=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.isExpiryDateEnforced\n\t\t\t\t\t\t? _vm.t('files_sharing', 'Expiration date (enforced)')\n\t\t\t\t\t\t: _vm.t('files_sharing', 'Set expiration date'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.hasExpirationDate)?_c('NcDateTimePickerNative',{attrs:{\"id\":\"share-date-picker\",\"value\":new Date(_vm.share.expireDate ?? _vm.dateTomorrow),\"min\":_vm.dateTomorrow,\"max\":_vm.maxExpirationDateEnforced,\"hide-label\":true,\"placeholder\":_vm.t('files_sharing', 'Expiration date'),\"type\":\"date\"},on:{\"input\":_vm.onExpirationChange}}):_vm._e(),_vm._v(\" \"),(_vm.isPublicShare)?_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":_vm.canChangeHideDownload,\"checked\":_vm.share.hideDownload},on:{\"update:checked\":[function($event){return _vm.$set(_vm.share, \"hideDownload\", $event)},function($event){return _vm.queueUpdate('hideDownload')}]}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Hide download'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.isPublicShare)?_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":!_vm.canSetDownload,\"checked\":_vm.canDownload},on:{\"update:checked\":function($event){_vm.canDownload=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Allow download'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"checked\":_vm.writeNoteToRecipientIsChecked},on:{\"update:checked\":function($event){_vm.writeNoteToRecipientIsChecked=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Note to recipient'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.writeNoteToRecipientIsChecked)?[_c('label',{attrs:{\"for\":\"share-note-textarea\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Enter a note for the share recipient'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('textarea',{attrs:{\"id\":\"share-note-textarea\"},domProps:{\"value\":_vm.share.note},on:{\"input\":function($event){_vm.share.note = $event.target.value}}})]:_vm._e(),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"checked\":_vm.setCustomPermissions},on:{\"update:checked\":function($event){_vm.setCustomPermissions=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Custom permissions'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.setCustomPermissions)?_c('section',{staticClass:\"custom-permissions-group\"},[_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":!_vm.allowsFileDrop && _vm.share.type === _vm.SHARE_TYPES.SHARE_TYPE_LINK,\"checked\":_vm.hasRead},on:{\"update:checked\":function($event){_vm.hasRead=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Read'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.isFolder)?_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":!_vm.canSetCreate,\"checked\":_vm.canCreate},on:{\"update:checked\":function($event){_vm.canCreate=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Create'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":!_vm.canSetEdit,\"checked\":_vm.canEdit},on:{\"update:checked\":function($event){_vm.canEdit=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Update'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.config.isResharingAllowed && _vm.share.type !== _vm.SHARE_TYPES.SHARE_TYPE_LINK)?_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":!_vm.canSetReshare,\"checked\":_vm.canReshare},on:{\"update:checked\":function($event){_vm.canReshare=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Share'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"disabled\":!_vm.canSetDelete,\"checked\":_vm.canDelete},on:{\"update:checked\":function($event){_vm.canDelete=$event}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Delete'))+\"\\n\\t\\t\\t\\t\\t\")])],1):_vm._e()],2)]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"sharingTabDetailsView__footer\"},[_c('div',{staticClass:\"sharingTabDetailsView__delete\"},[(!_vm.isNewShare)?_c('NcButton',{attrs:{\"aria-label\":_vm.t('files_sharing', 'Delete share'),\"disabled\":false,\"readonly\":false,\"type\":\"tertiary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeShare.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CloseIcon',{attrs:{\"size\":16}})]},proxy:true}],null,false,2746485232)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Delete share'))+\"\\n\\t\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"button-group\"},[_c('NcButton',{on:{\"click\":function($event){return _vm.$emit('close-sharing-details')}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Cancel'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveShare}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.shareButtonText)+\"\\n\\t\\t\\t\")])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"sharingTabDetailsView\">\n\t\t<div class=\"sharingTabDetailsView__header\">\n\t\t\t<span>\n\t\t\t\t<NcAvatar v-if=\"isUserShare\"\n\t\t\t\t\tclass=\"sharing-entry__avatar\"\n\t\t\t\t\t:is-no-user=\"share.shareType !== SHARE_TYPES.SHARE_TYPE_USER\"\n\t\t\t\t\t:user=\"share.shareWith\"\n\t\t\t\t\t:display-name=\"share.shareWithDisplayName\"\n\t\t\t\t\t:menu-position=\"'left'\"\n\t\t\t\t\t:url=\"share.shareWithAvatar\" />\n\t\t\t\t<component :is=\"getShareTypeIcon(share.type)\" :size=\"32\" />\n\t\t\t</span>\n\t\t\t<span>\n\t\t\t\t<h1>{{ title }}</h1>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"sharingTabDetailsView__wrapper\">\n\t\t\t<div ref=\"quickPermissions\" class=\"sharingTabDetailsView__quick-permissions\">\n\t\t\t\t<div>\n\t\t\t\t\t<NcCheckboxRadioSwitch :button-variant=\"true\"\n\t\t\t\t\t\t:checked.sync=\"sharingPermission\"\n\t\t\t\t\t\t:value=\"bundledPermissions.READ_ONLY.toString()\"\n\t\t\t\t\t\tname=\"sharing_permission_radio\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tbutton-variant-grouped=\"vertical\"\n\t\t\t\t\t\t@update:checked=\"toggleCustomPermissions\">\n\t\t\t\t\t\t<ViewIcon :size=\"20\" />\n\t\t\t\t\t\t<span>{{ t('files_sharing', 'View only') }}</span>\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch :button-variant=\"true\"\n\t\t\t\t\t\t:checked.sync=\"sharingPermission\"\n\t\t\t\t\t\t:value=\"bundledPermissions.ALL.toString()\"\n\t\t\t\t\t\tname=\"sharing_permission_radio\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tbutton-variant-grouped=\"vertical\"\n\t\t\t\t\t\t@update:checked=\"toggleCustomPermissions\">\n\t\t\t\t\t\t<EditIcon :size=\"20\" />\n\t\t\t\t\t\t<template v-if=\"allowsFileDrop\">\n\t\t\t\t\t\t\t<span>{{ t('files_sharing', 'Allow upload and editing') }}</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<span>{{ t('files_sharing', 'Allow editing') }}</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch v-if=\"allowsFileDrop\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked.sync=\"sharingPermission\"\n\t\t\t\t\t\t:value=\"bundledPermissions.FILE_DROP.toString()\"\n\t\t\t\t\t\tname=\"sharing_permission_radio\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tbutton-variant-grouped=\"vertical\"\n\t\t\t\t\t\t@update:checked=\"toggleCustomPermissions\">\n\t\t\t\t\t\t<UploadIcon :size=\"20\" />\n\t\t\t\t\t\t<span>{{ t('files_sharing', 'File drop') }}</span>\n\t\t\t\t\t\t<small>{{ t('files_sharing', 'Upload only') }}</small>\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch :button-variant=\"true\"\n\t\t\t\t\t\t:checked.sync=\"sharingPermission\"\n\t\t\t\t\t\t:value=\"'custom'\"\n\t\t\t\t\t\tname=\"sharing_permission_radio\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tbutton-variant-grouped=\"vertical\"\n\t\t\t\t\t\t@update:checked=\"expandCustomPermissions\">\n\t\t\t\t\t\t<DotsHorizontalIcon :size=\"20\" />\n\t\t\t\t\t\t<span>{{ t('files_sharing', 'Custom permissions') }}</span>\n\t\t\t\t\t\t<small>{{ customPermissionsList }}</small>\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"sharingTabDetailsView__advanced-control\">\n\t\t\t\t<NcButton id=\"advancedSectionAccordionAdvancedControl\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\talignment=\"end-reverse\"\n\t\t\t\t\t@click=\"advancedSectionAccordionExpanded = !advancedSectionAccordionExpanded\">\n\t\t\t\t\t{{ t('files_sharing', 'Advanced settings') }}\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<MenuDownIcon />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t\t<div v-if=\"advancedSectionAccordionExpanded\"\n\t\t\t\tid=\"advancedSectionAccordionAdvanced\"\n\t\t\t\tclass=\"sharingTabDetailsView__advanced\"\n\t\t\t\taria-labelledby=\"advancedSectionAccordionAdvancedControl\"\n\t\t\t\trole=\"region\">\n\t\t\t\t<section>\n\t\t\t\t\t<NcInputField v-if=\"isPublicShare\"\n\t\t\t\t\t\t:value.sync=\"share.label\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:label=\"t('files_sharing', 'Share label')\" />\n\t\t\t\t\t<template v-if=\"isPublicShare\">\n\t\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"isPasswordProtected\" :disabled=\"isPasswordEnforced\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Set password') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t\t<NcInputField v-if=\"isPasswordProtected\"\n\t\t\t\t\t\t\t:type=\"hasUnsavedPassword ? 'text' : 'password'\"\n\t\t\t\t\t\t\t:value=\"hasUnsavedPassword ? share.newPassword : '***************'\"\n\t\t\t\t\t\t\t:error=\"passwordError\"\n\t\t\t\t\t\t\t:required=\"isPasswordEnforced\"\n\t\t\t\t\t\t\t:label=\"t('files_sharing', 'Password')\"\n\t\t\t\t\t\t\t@update:value=\"onPasswordChange\" />\n\n\t\t\t\t\t\t<!-- Migrate icons and remote -> icon=\"icon-info\"-->\n\t\t\t\t\t\t<span v-if=\"isEmailShareType && passwordExpirationTime\" icon=\"icon-info\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Password expires {passwordExpirationTime}', { passwordExpirationTime }) }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-else-if=\"isEmailShareType && passwordExpirationTime !== null\" icon=\"icon-error\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Password expired') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</template>\n\t\t\t\t\t<NcCheckboxRadioSwitch v-if=\"canTogglePasswordProtectedByTalkAvailable\"\n\t\t\t\t\t\t:checked.sync=\"isPasswordProtectedByTalk\"\n\t\t\t\t\t\t@update:checked=\"onPasswordProtectedByTalkChange\">\n\t\t\t\t\t\t{{ t('files_sharing', 'Video verification') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"hasExpirationDate\" :disabled=\"isExpiryDateEnforced\">\n\t\t\t\t\t\t{{ isExpiryDateEnforced\n\t\t\t\t\t\t\t? t('files_sharing', 'Expiration date (enforced)')\n\t\t\t\t\t\t\t: t('files_sharing', 'Set expiration date') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcDateTimePickerNative v-if=\"hasExpirationDate\"\n\t\t\t\t\t\tid=\"share-date-picker\"\n\t\t\t\t\t\t:value=\"new Date(share.expireDate ?? dateTomorrow)\"\n\t\t\t\t\t\t:min=\"dateTomorrow\"\n\t\t\t\t\t\t:max=\"maxExpirationDateEnforced\"\n\t\t\t\t\t\t:hide-label=\"true\"\n\t\t\t\t\t\t:placeholder=\"t('files_sharing', 'Expiration date')\"\n\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t@input=\"onExpirationChange\" />\n\t\t\t\t\t<NcCheckboxRadioSwitch v-if=\"isPublicShare\"\n\t\t\t\t\t\t:disabled=\"canChangeHideDownload\"\n\t\t\t\t\t\t:checked.sync=\"share.hideDownload\"\n\t\t\t\t\t\t@update:checked=\"queueUpdate('hideDownload')\">\n\t\t\t\t\t\t{{ t('files_sharing', 'Hide download') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch v-if=\"!isPublicShare\" :disabled=\"!canSetDownload\" :checked.sync=\"canDownload\">\n\t\t\t\t\t\t{{ t('files_sharing', 'Allow download') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"writeNoteToRecipientIsChecked\">\n\t\t\t\t\t\t{{ t('files_sharing', 'Note to recipient') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<template v-if=\"writeNoteToRecipientIsChecked\">\n\t\t\t\t\t\t<label for=\"share-note-textarea\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Enter a note for the share recipient') }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<textarea id=\"share-note-textarea\" :value=\"share.note\" @input=\"share.note = $event.target.value\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"setCustomPermissions\">\n\t\t\t\t\t\t{{ t('files_sharing', 'Custom permissions') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<section v-if=\"setCustomPermissions\" class=\"custom-permissions-group\">\n\t\t\t\t\t\t<NcCheckboxRadioSwitch :disabled=\"!allowsFileDrop && share.type === SHARE_TYPES.SHARE_TYPE_LINK\"\n\t\t\t\t\t\t\t:checked.sync=\"hasRead\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Read') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t\t<NcCheckboxRadioSwitch v-if=\"isFolder\" :disabled=\"!canSetCreate\" :checked.sync=\"canCreate\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Create') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t\t<NcCheckboxRadioSwitch :disabled=\"!canSetEdit\" :checked.sync=\"canEdit\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Update') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t\t<NcCheckboxRadioSwitch v-if=\"config.isResharingAllowed && share.type !== SHARE_TYPES.SHARE_TYPE_LINK\"\n\t\t\t\t\t\t\t:disabled=\"!canSetReshare\"\n\t\t\t\t\t\t\t:checked.sync=\"canReshare\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Share') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t\t<NcCheckboxRadioSwitch :disabled=\"!canSetDelete\" :checked.sync=\"canDelete\">\n\t\t\t\t\t\t\t{{ t('files_sharing', 'Delete') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"sharingTabDetailsView__footer\">\n\t\t\t<div class=\"sharingTabDetailsView__delete\">\n\t\t\t\t<NcButton v-if=\"!isNewShare\"\n\t\t\t\t\t:aria-label=\"t('files_sharing', 'Delete share')\"\n\t\t\t\t\t:disabled=\"false\"\n\t\t\t\t\t:readonly=\"false\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click.prevent=\"removeShare\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CloseIcon :size=\"16\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('files_sharing', 'Delete share') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t\t<div class=\"button-group\">\n\t\t\t\t<NcButton @click=\"$emit('close-sharing-details')\">\n\t\t\t\t\t{{ t('files_sharing', 'Cancel') }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton type=\"primary\" @click=\"saveShare\">\n\t\t\t\t\t{{ shareButtonText }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { getLanguage } from '@nextcloud/l10n'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcInputField from '@nextcloud/vue/dist/Components/NcInputField.js'\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\nimport NcDatetimePicker from '@nextcloud/vue/dist/Components/NcDatetimePicker.js'\nimport NcDateTimePickerNative from '@nextcloud/vue/dist/Components/NcDateTimePickerNative.js'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport CircleIcon from 'vue-material-design-icons/CircleOutline.vue'\nimport CloseIcon from 'vue-material-design-icons/Close.vue'\nimport EditIcon from 'vue-material-design-icons/Pencil.vue'\nimport EmailIcon from 'vue-material-design-icons/Email.vue'\nimport LinkIcon from 'vue-material-design-icons/Link.vue'\nimport GroupIcon from 'vue-material-design-icons/AccountGroup.vue'\nimport ShareIcon from 'vue-material-design-icons/ShareCircle.vue'\nimport UserIcon from 'vue-material-design-icons/AccountCircleOutline.vue'\nimport ViewIcon from 'vue-material-design-icons/Eye.vue'\nimport UploadIcon from 'vue-material-design-icons/Upload.vue'\nimport MenuDownIcon from 'vue-material-design-icons/MenuDown.vue'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal.vue'\n\nimport GeneratePassword from '../utils/GeneratePassword.js'\nimport Share from '../models/Share.js'\nimport ShareRequests from '../mixins/ShareRequests.js'\nimport ShareTypes from '../mixins/ShareTypes.js'\nimport SharesMixin from '../mixins/SharesMixin.js'\n\nimport {\n\tATOMIC_PERMISSIONS,\n\tBUNDLED_PERMISSIONS,\n\thasPermissions,\n} from '../lib/SharePermissionsToolBox.js'\n\nexport default {\n\tname: 'SharingDetailsTab',\n\tcomponents: {\n\t\tNcAvatar,\n\t\tNcButton,\n\t\tNcInputField,\n\t\tNcDatetimePicker,\n\t\tNcDateTimePickerNative,\n\t\tNcCheckboxRadioSwitch,\n\t\tCloseIcon,\n\t\tCircleIcon,\n\t\tEditIcon,\n\t\tLinkIcon,\n\t\tGroupIcon,\n\t\tShareIcon,\n\t\tUserIcon,\n\t\tUploadIcon,\n\t\tViewIcon,\n\t\tMenuDownIcon,\n\t\tDotsHorizontalIcon,\n\t},\n\tmixins: [ShareTypes, ShareRequests, SharesMixin],\n\tprops: {\n\t\tshareRequestValue: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tshare: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\twriteNoteToRecipientIsChecked: false,\n\t\t\tsharingPermission: BUNDLED_PERMISSIONS.ALL.toString(),\n\t\t\trevertSharingPermission: BUNDLED_PERMISSIONS.ALL.toString(),\n\t\t\tsetCustomPermissions: false,\n\t\t\tpasswordError: false,\n\t\t\tadvancedSectionAccordionExpanded: false,\n\t\t\tbundledPermissions: BUNDLED_PERMISSIONS,\n\t\t\tisFirstComponentLoad: true,\n\t\t\ttest: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\ttitle() {\n\t\t\tlet title = t('files_sharing', 'Share with ')\n\t\t\tif (this.share.type === this.SHARE_TYPES.SHARE_TYPE_USER) {\n\t\t\t\ttitle = title + this.share.shareWithDisplayName\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_LINK) {\n\t\t\t\ttitle = t('files_sharing', 'Share link')\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GROUP) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'group')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_ROOM) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'conversation')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'remote')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'remote group')})`\n\t\t\t} else if (this.share.type === this.SHARE_TYPES.SHARE_TYPE_GUEST) {\n\t\t\t\ttitle += ` (${t('files_sharing', 'guest')})`\n\t\t\t}\n\n\t\t\treturn title\n\t\t},\n\t\t/**\n\t\t * Can the sharee edit the shared file ?\n\t\t */\n\t\tcanEdit: {\n\t\t\tget() {\n\t\t\t\treturn this.share.hasUpdatePermission\n\t\t\t},\n\t\t\tset(checked) {\n\t\t\t\tthis.updateAtomicPermissions({ isEditChecked: checked })\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Can the sharee create the shared file ?\n\t\t */\n\t\tcanCreate: {\n\t\t\tget() {\n\t\t\t\treturn this.share.hasCreatePermission\n\t\t\t},\n\t\t\tset(checked) {\n\t\t\t\tthis.updateAtomicPermissions({ isCreateChecked: checked })\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Can the sharee delete the shared file ?\n\t\t */\n\t\tcanDelete: {\n\t\t\tget() {\n\t\t\t\treturn this.share.hasDeletePermission\n\t\t\t},\n\t\t\tset(checked) {\n\t\t\t\tthis.updateAtomicPermissions({ isDeleteChecked: checked })\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Can the sharee reshare the file ?\n\t\t */\n\t\tcanReshare: {\n\t\t\tget() {\n\t\t\t\treturn this.share.hasSharePermission\n\t\t\t},\n\t\t\tset(checked) {\n\t\t\t\tthis.updateAtomicPermissions({ isReshareChecked: checked })\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Can the sharee download files or only view them ?\n\t\t */\n\t\tcanDownload: {\n\t\t\tget() {\n\t\t\t\treturn this.share.attributes.find(attr => attr.key === 'download')?.enabled || false\n\t\t\t},\n\t\t\tset(checked) {\n\t\t\t\t// Find the 'download' attribute and update its value\n\t\t\t\tconst downloadAttr = this.share.attributes.find(attr => attr.key === 'download')\n\t\t\t\tif (downloadAttr) {\n\t\t\t\t\tdownloadAttr.enabled = checked\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Is this share readable\n\t\t * Needed for some federated shares that might have been added from file drop links\n\t\t */\n\t\thasRead: {\n\t\t\tget() {\n\t\t\t\treturn this.share.hasReadPermission\n\t\t\t},\n\t\t\tset(checked) {\n\t\t\t\tthis.updateAtomicPermissions({ isReadChecked: checked })\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Does the current share have an expiration date\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\thasExpirationDate: {\n\t\t\tget() {\n\t\t\t\treturn this.isValidShareAttribute(this.share.expireDate)\n\t\t\t},\n\t\t\tset(enabled) {\n\t\t\t\tthis.share.expireDate = enabled\n\t\t\t\t\t? this.formatDateToString(this.defaultExpiryDate)\n\t\t\t\t\t: ''\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Is the current share password protected ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPasswordProtected: {\n\t\t\tget() {\n\t\t\t\treturn this.config.enforcePasswordForPublicLink\n\t\t\t\t\t|| !!this.share.password\n\t\t\t},\n\t\t\tasync set(enabled) {\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.share.password = await GeneratePassword()\n\t\t\t\t\tthis.$set(this.share, 'newPassword', this.share.password)\n\t\t\t\t} else {\n\t\t\t\t\tthis.share.password = ''\n\t\t\t\t\tthis.$delete(this.share, 'newPassword')\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Is the current share a folder ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisFolder() {\n\t\t\treturn this.fileInfo.type === 'dir'\n\t\t},\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisSetDownloadButtonVisible() {\n\t\t\tconst allowedMimetypes = [\n\t\t\t\t// Office documents\n\t\t\t\t'application/msword',\n\t\t\t\t'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t\t\t\t'application/vnd.ms-powerpoint',\n\t\t\t\t'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t\t\t\t'application/vnd.ms-excel',\n\t\t\t\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t\t\t\t'application/vnd.oasis.opendocument.text',\n\t\t\t\t'application/vnd.oasis.opendocument.spreadsheet',\n\t\t\t\t'application/vnd.oasis.opendocument.presentation',\n\t\t\t]\n\n\t\t\treturn this.isFolder || allowedMimetypes.includes(this.fileInfo.mimetype)\n\t\t},\n\t\tisPasswordEnforced() {\n\t\t\treturn this.isPublicShare && this.config.enforcePasswordForPublicLink\n\t\t},\n\t\tdefaultExpiryDate() {\n\t\t\tif ((this.isGroupShare || this.isUserShare) && this.config.isDefaultInternalExpireDateEnabled) {\n\t\t\t\treturn new Date(this.config.defaultInternalExpirationDate)\n\t\t\t} else if (this.isRemoteShare && this.config.isDefaultRemoteExpireDateEnabled) {\n\t\t\t\treturn new Date(this.config.defaultRemoteExpireDateEnabled)\n\t\t\t} else if (this.isPublicShare && this.config.isDefaultExpireDateEnabled) {\n\t\t\t\treturn new Date(this.config.defaultExpirationDate)\n\t\t\t}\n\t\t\treturn new Date(new Date().setDate(new Date().getDate() + 1))\n\t\t},\n\t\tisUserShare() {\n\t\t\treturn this.share.type === this.SHARE_TYPES.SHARE_TYPE_USER\n\t\t},\n\t\tisGroupShare() {\n\t\t\treturn this.share.type === this.SHARE_TYPES.SHARE_TYPE_GROUP\n\t\t},\n\t\tisNewShare() {\n\t\t\treturn !this.share.id\n\t\t},\n\t\tallowsFileDrop() {\n\t\t\tif (this.isFolder && this.config.isPublicUploadEnabled) {\n\t\t\t\tif (this.share.type === this.SHARE_TYPES.SHARE_TYPE_LINK || this.share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\thasFileDropPermissions() {\n\t\t\treturn this.share.permissions === this.bundledPermissions.FILE_DROP\n\t\t},\n\t\tshareButtonText() {\n\t\t\tif (this.isNewShare) {\n\t\t\t\treturn t('files_sharing', 'Save share')\n\t\t\t}\n\t\t\treturn t('files_sharing', 'Update share')\n\n\t\t},\n\t\t/**\n\t\t * Can the sharer set whether the sharee can edit the file ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanSetEdit() {\n\t\t\t// If the owner revoked the permission after the resharer granted it\n\t\t\t// the share still has the permission, and the resharer is still\n\t\t\t// allowed to revoke it too (but not to grant it again).\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_UPDATE) || this.canEdit\n\t\t},\n\n\t\t/**\n\t\t * Can the sharer set whether the sharee can create the file ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanSetCreate() {\n\t\t\t// If the owner revoked the permission after the resharer granted it\n\t\t\t// the share still has the permission, and the resharer is still\n\t\t\t// allowed to revoke it too (but not to grant it again).\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_CREATE) || this.canCreate\n\t\t},\n\n\t\t/**\n\t\t * Can the sharer set whether the sharee can delete the file ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanSetDelete() {\n\t\t\t// If the owner revoked the permission after the resharer granted it\n\t\t\t// the share still has the permission, and the resharer is still\n\t\t\t// allowed to revoke it too (but not to grant it again).\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_DELETE) || this.canDelete\n\t\t},\n\t\t/**\n\t\t * Can the sharer set whether the sharee can reshare the file ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanSetReshare() {\n\t\t\t// If the owner revoked the permission after the resharer granted it\n\t\t\t// the share still has the permission, and the resharer is still\n\t\t\t// allowed to revoke it too (but not to grant it again).\n\t\t\treturn (this.fileInfo.sharePermissions & OC.PERMISSION_SHARE) || this.canReshare\n\t\t},\n\t\t/**\n\t\t * Can the sharer set whether the sharee can download the file ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanSetDownload() {\n\t\t\t// If the owner revoked the permission after the resharer granted it\n\t\t\t// the share still has the permission, and the resharer is still\n\t\t\t// allowed to revoke it too (but not to grant it again).\n\t\t\treturn (this.fileInfo.canDownload() || this.canDownload)\n\t\t},\n\t\t// if newPassword exists, but is empty, it means\n\t\t// the user deleted the original password\n\t\thasUnsavedPassword() {\n\t\t\treturn this.share.newPassword !== undefined\n\t\t},\n\t\tpasswordExpirationTime() {\n\t\t\tif (!this.isValidShareAttribute(this.share.passwordExpirationTime)) {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t\tconst expirationTime = moment(this.share.passwordExpirationTime)\n\n\t\t\tif (expirationTime.diff(moment()) < 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn expirationTime.fromNow()\n\t\t},\n\n\t\t/**\n\t\t * Is Talk enabled?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisTalkEnabled() {\n\t\t\treturn OC.appswebroots.spreed !== undefined\n\t\t},\n\n\t\t/**\n\t\t * Is it possible to protect the password by Talk?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPasswordProtectedByTalkAvailable() {\n\t\t\treturn this.isPasswordProtected && this.isTalkEnabled\n\t\t},\n\t\t/**\n\t\t * Is the current share password protected by Talk?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPasswordProtectedByTalk: {\n\t\t\tget() {\n\t\t\t\treturn this.share.sendPasswordByTalk\n\t\t\t},\n\t\t\tasync set(enabled) {\n\t\t\t\tthis.share.sendPasswordByTalk = enabled\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Is the current share an email share ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisEmailShareType() {\n\t\t\treturn this.share\n\t\t\t\t? this.share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL\n\t\t\t\t: false\n\t\t},\n\t\tcanTogglePasswordProtectedByTalkAvailable() {\n\t\t\tif (!this.isPublicShare || !this.isPasswordProtected) {\n\t\t\t\t// Makes no sense\n\t\t\t\treturn false\n\t\t\t} else if (this.isEmailShareType && !this.hasUnsavedPassword) {\n\t\t\t\t// For email shares we need a new password in order to enable or\n\t\t\t\t// disable\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\t// Is Talk enabled?\n\t\t\treturn OC.appswebroots.spreed !== undefined\n\t\t},\n\t\tcanChangeHideDownload() {\n\t\t\tconst hasDisabledDownload = (shareAttribute) => shareAttribute.key === 'download' && shareAttribute.scope === 'permissions' && shareAttribute.enabled === false\n\t\t\treturn this.fileInfo.shareAttributes.some(hasDisabledDownload)\n\t\t},\n\t\tcustomPermissionsList() {\n\t\t\t// Key order will be different, because ATOMIC_PERMISSIONS are numbers\n\t\t\tconst translatedPermissions = {\n\t\t\t\t[ATOMIC_PERMISSIONS.READ]: this.t('files_sharing', 'Read'),\n\t\t\t\t[ATOMIC_PERMISSIONS.CREATE]: this.t('files_sharing', 'Create'),\n\t\t\t\t[ATOMIC_PERMISSIONS.UPDATE]: this.t('files_sharing', 'Edit'),\n\t\t\t\t[ATOMIC_PERMISSIONS.SHARE]: this.t('files_sharing', 'Share'),\n\t\t\t\t[ATOMIC_PERMISSIONS.DELETE]: this.t('files_sharing', 'Delete'),\n\t\t\t}\n\n\t\t\treturn [ATOMIC_PERMISSIONS.READ, ATOMIC_PERMISSIONS.CREATE, ATOMIC_PERMISSIONS.UPDATE, ATOMIC_PERMISSIONS.SHARE, ATOMIC_PERMISSIONS.DELETE]\n\t\t\t\t.filter((permission) => hasPermissions(this.share.permissions, permission))\n\t\t\t\t.map((permission, index) => index === 0\n\t\t\t\t\t? translatedPermissions[permission]\n\t\t\t\t\t: translatedPermissions[permission].toLocaleLowerCase(getLanguage()))\n\t\t\t\t.join(', ')\n\t\t},\n\t\tadvancedControlExpandedValue() {\n\t\t\treturn this.advancedSectionAccordionExpanded ? 'true' : 'false'\n\t\t},\n\t},\n\twatch: {\n\t\tsetCustomPermissions(isChecked) {\n\t\t\tif (isChecked) {\n\t\t\t\tthis.sharingPermission = 'custom'\n\t\t\t} else {\n\t\t\t\tthis.sharingPermission = this.revertSharingPermission\n\t\t\t}\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tthis.initializePermissions()\n\t\tthis.initializeAttributes()\n\t\tconsole.debug('shareSentIn', this.share)\n\t\tconsole.debug('config', this.config)\n\t},\n\n\tmounted() {\n\t\tthis.$refs.quickPermissions?.querySelector('input:checked')?.focus()\n\t},\n\n\tmethods: {\n\t\tupdateAtomicPermissions({\n\t\t\tisReadChecked = this.hasRead,\n\t\t\tisEditChecked = this.canEdit,\n\t\t\tisCreateChecked = this.canCreate,\n\t\t\tisDeleteChecked = this.canDelete,\n\t\t\tisReshareChecked = this.canReshare,\n\t\t} = {}) {\n\t\t\t// calc permissions if checked\n\t\t\tconst permissions = 0\n\t\t\t\t| (isReadChecked ? ATOMIC_PERMISSIONS.READ : 0)\n\t\t\t\t| (isCreateChecked ? ATOMIC_PERMISSIONS.CREATE : 0)\n\t\t\t\t| (isDeleteChecked ? ATOMIC_PERMISSIONS.DELETE : 0)\n\t\t\t\t| (isEditChecked ? ATOMIC_PERMISSIONS.UPDATE : 0)\n\t\t\t\t| (isReshareChecked ? ATOMIC_PERMISSIONS.SHARE : 0)\n\t\t\tthis.share.permissions = permissions\n\t\t},\n\t\texpandCustomPermissions() {\n\t\t\tif (!this.advancedSectionAccordionExpanded) {\n\t\t\t\tthis.advancedSectionAccordionExpanded = true\n\t\t\t}\n\t\t\tthis.toggleCustomPermissions()\n\t\t},\n\t\ttoggleCustomPermissions(selectedPermission) {\n\t\t\tconst isCustomPermissions = this.sharingPermission === 'custom'\n\t\t\tthis.revertSharingPermission = !isCustomPermissions ? selectedPermission : 'custom'\n\t\t\tthis.setCustomPermissions = isCustomPermissions\n\t\t},\n\t\tasync initializeAttributes() {\n\n\t\t\tif (this.isNewShare) {\n\t\t\t\tif (this.isPasswordEnforced && this.isPublicShare) {\n\t\t\t\t\tthis.$set(this.share, 'newPassword', await GeneratePassword())\n\t\t\t\t\tthis.advancedSectionAccordionExpanded = true\n\t\t\t\t}\n\t\t\t\t/* Set default expiration dates if configured */\n\t\t\t\tif (this.isPublicShare && this.config.isDefaultExpireDateEnabled) {\n\t\t\t\t\tthis.share.expireDate = this.config.defaultExpirationDate.toDateString()\n\t\t\t\t} else if (this.isRemoteShare && this.config.isDefaultRemoteExpireDateEnabled) {\n\t\t\t\t\tthis.share.expireDate = this.config.defaultRemoteExpirationDateString.toDateString()\n\t\t\t\t} else if (this.config.isDefaultInternalExpireDateEnabled) {\n\t\t\t\t\tthis.share.expireDate = this.config.defaultInternalExpirationDate.toDateString()\n\t\t\t\t}\n\n\t\t\t\tif (this.isValidShareAttribute(this.share.expireDate)) {\n\t\t\t\t\tthis.advancedSectionAccordionExpanded = true\n\t\t\t\t}\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// If there is an enforced expiry date, then existing shares created before enforcement\n\t\t\t// have no expiry date, hence we set it here.\n\t\t\tif (!this.isValidShareAttribute(this.share.expireDate) && this.isExpiryDateEnforced) {\n\t\t\t\tthis.hasExpirationDate = true\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.isValidShareAttribute(this.share.password)\n\t\t\t\t|| this.isValidShareAttribute(this.share.expireDate)\n\t\t\t\t|| this.isValidShareAttribute(this.share.label)\n\t\t\t) {\n\t\t\t\tthis.advancedSectionAccordionExpanded = true\n\t\t\t}\n\n\t\t},\n\t\thandleShareType() {\n\t\t\tif ('shareType' in this.share) {\n\t\t\t\tthis.share.type = this.share.shareType\n\t\t\t} else if (this.share.share_type) {\n\t\t\t\tthis.share.type = this.share.share_type\n\t\t\t}\n\t\t},\n\t\thandleDefaultPermissions() {\n\t\t\tif (this.isNewShare) {\n\t\t\t\tconst defaultPermissions = this.config.defaultPermissions\n\t\t\t\tif (defaultPermissions === BUNDLED_PERMISSIONS.READ_ONLY || defaultPermissions === BUNDLED_PERMISSIONS.ALL) {\n\t\t\t\t\tthis.sharingPermission = defaultPermissions.toString()\n\t\t\t\t} else {\n\t\t\t\t\tthis.sharingPermission = 'custom'\n\t\t\t\t\tthis.share.permissions = defaultPermissions\n\t\t\t\t\tthis.advancedSectionAccordionExpanded = true\n\t\t\t\t\tthis.setCustomPermissions = true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleCustomPermissions() {\n\t\t\tif (!this.isNewShare && (this.hasCustomPermissions || this.share.setCustomPermissions)) {\n\t\t\t\tthis.sharingPermission = 'custom'\n\t\t\t\tthis.advancedSectionAccordionExpanded = true\n\t\t\t\tthis.setCustomPermissions = true\n\t\t\t} else if (this.share.permissions) {\n\t\t\t\tthis.sharingPermission = this.share.permissions.toString()\n\t\t\t}\n\t\t},\n\t\tinitializePermissions() {\n\t\t\tthis.handleShareType()\n\t\t\tthis.handleDefaultPermissions()\n\t\t\tthis.handleCustomPermissions()\n\t\t},\n\t\tasync saveShare() {\n\t\t\tconst permissionsAndAttributes = ['permissions', 'attributes', 'note', 'expireDate']\n\t\t\tconst publicShareAttributes = ['label', 'password', 'hideDownload']\n\t\t\tif (this.isPublicShare) {\n\t\t\t\tpermissionsAndAttributes.push(...publicShareAttributes)\n\t\t\t}\n\t\t\tconst sharePermissionsSet = parseInt(this.sharingPermission)\n\t\t\tif (this.setCustomPermissions) {\n\t\t\t\tthis.updateAtomicPermissions()\n\t\t\t} else {\n\t\t\t\tthis.share.permissions = sharePermissionsSet\n\t\t\t}\n\n\t\t\tif (!this.isFolder && this.share.permissions === BUNDLED_PERMISSIONS.ALL) {\n\t\t\t\t// It's not possible to create an existing file.\n\t\t\t\tthis.share.permissions = BUNDLED_PERMISSIONS.ALL_FILE\n\t\t\t}\n\t\t\tif (!this.writeNoteToRecipientIsChecked) {\n\t\t\t\tthis.share.note = ''\n\t\t\t}\n\t\t\tif (this.isPasswordProtected) {\n\t\t\t\tif (this.hasUnsavedPassword && this.isValidShareAttribute(this.share.newPassword)) {\n\t\t\t\t\tthis.share.password = this.share.newPassword\n\t\t\t\t\tthis.$delete(this.share, 'newPassword')\n\t\t\t\t} else if (this.isPasswordEnforced && !this.isValidShareAttribute(this.share.password)) {\n\t\t\t\t\tthis.passwordError = true\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.share.password = ''\n\t\t\t}\n\n\t\t\tif (!this.hasExpirationDate) {\n\t\t\t\tthis.share.expireDate = ''\n\t\t\t}\n\n\t\t\tif (this.isNewShare) {\n\t\t\t\tconst incomingShare = {\n\t\t\t\t\tpermissions: this.share.permissions,\n\t\t\t\t\tshareType: this.share.type,\n\t\t\t\t\tshareWith: this.share.shareWith,\n\t\t\t\t\tattributes: this.share.attributes,\n\t\t\t\t\tnote: this.share.note,\n\t\t\t\t\tfileInfo: this.fileInfo,\n\t\t\t\t}\n\n\t\t\t\tincomingShare.expireDate = this.hasExpirationDate ? this.share.expireDate : ''\n\n\t\t\t\tif (this.isPasswordProtected) {\n\t\t\t\t\tincomingShare.password = this.share.password\n\t\t\t\t}\n\n\t\t\t\tconst share = await this.addShare(incomingShare, this.fileInfo)\n\t\t\t\tthis.share = share\n\t\t\t\tthis.$emit('add:share', this.share)\n\t\t\t} else {\n\t\t\t\tthis.$emit('update:share', this.share)\n\t\t\t\tthis.queueUpdate(...permissionsAndAttributes)\n\t\t\t}\n\n\t\t\tthis.$emit('close-sharing-details')\n\t\t},\n\t\t/**\n\t\t * Process the new share request\n\t\t *\n\t\t * @param {Share} share incoming share object\n\t\t * @param {object} fileInfo file data\n\t\t */\n\t\tasync addShare(share, fileInfo) {\n\t\t\tconsole.debug('Adding a new share from the input for', share)\n\t\t\ttry {\n\t\t\t\tconst path = (fileInfo.path + '/' + fileInfo.name).replace('//', '/')\n\t\t\t\tconst resultingShare = await this.createShare({\n\t\t\t\t\tpath,\n\t\t\t\t\tshareType: share.shareType,\n\t\t\t\t\tshareWith: share.shareWith,\n\t\t\t\t\tpermissions: share.permissions,\n\t\t\t\t\texpireDate: share.expireDate,\n\t\t\t\t\tattributes: JSON.stringify(share.attributes),\n\t\t\t\t\t...(share.note ? { note: share.note } : {}),\n\t\t\t\t\t...(share.password ? { password: share.password } : {}),\n\t\t\t\t})\n\t\t\t\treturn resultingShare\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error while adding new share', error)\n\t\t\t} finally {\n\t\t\t\t// this.loading = false // No loader here yet\n\t\t\t}\n\t\t},\n\t\tasync removeShare() {\n\t\t\tawait this.onDelete()\n\t\t\tthis.$emit('close-sharing-details')\n\t\t},\n\t\t/**\n\t\t * Update newPassword values\n\t\t * of share. If password is set but not newPassword\n\t\t * then the user did not changed the password\n\t\t * If both co-exists, the password have changed and\n\t\t * we show it in plain text.\n\t\t * Then on submit (or menu close), we sync it.\n\t\t *\n\t\t * @param {string} password the changed password\n\t\t */\n\t\tonPasswordChange(password) {\n\t\t\tthis.passwordError = !this.isValidShareAttribute(password)\n\t\t\tthis.$set(this.share, 'newPassword', password)\n\t\t},\n\t\t/**\n\t\t * Update the password along with \"sendPasswordByTalk\".\n\t\t *\n\t\t * If the password was modified the new password is sent; otherwise\n\t\t * updating a mail share would fail, as in that case it is required that\n\t\t * a new password is set when enabling or disabling\n\t\t * \"sendPasswordByTalk\".\n\t\t */\n\t\tonPasswordProtectedByTalkChange() {\n\t\t\tif (this.hasUnsavedPassword) {\n\t\t\t\tthis.share.password = this.share.newPassword.trim()\n\t\t\t}\n\n\t\t\tthis.queueUpdate('sendPasswordByTalk', 'password')\n\t\t},\n\t\tisValidShareAttribute(value) {\n\t\t\tif ([null, undefined].includes(value)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!(value.trim().length > 0)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true\n\t\t},\n\t\tgetShareTypeIcon(type) {\n\t\t\tswitch (type) {\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_LINK:\n\t\t\t\treturn LinkIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_GUEST:\n\t\t\t\treturn UserIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_GROUP:\n\t\t\t\treturn GroupIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_EMAIL:\n\t\t\t\treturn EmailIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_CIRCLE:\n\t\t\t\treturn CircleIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_ROOM:\n\t\t\t\treturn ShareIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_DECK:\n\t\t\t\treturn ShareIcon\n\t\t\tcase this.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH:\n\t\t\t\treturn ShareIcon\n\t\t\tdefault:\n\t\t\t\treturn null // Or a default icon component if needed\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sharingTabDetailsView {\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\tmargin: 0 auto;\n\tposition: relative;\n\theight: 100%;\n\toverflow: hidden;\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\tmargin: 0.2em;\n\n\t\tspan {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\n\t\t\th1 {\n\t\t\t\tfont-size: 15px;\n\t\t\t\tpadding-left: 0.3em;\n\t\t\t}\n\n\t\t}\n\t}\n\n\t&__wrapper {\n\t\toverflow: scroll;\n\t\tflex-shrink: 1;\n\t\tpadding: 4px;\n\t\tpadding-right: 12px;\n\t}\n\n\t&__quick-permissions {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\tmargin: 0 auto;\n\t\tborder-radius: 0;\n\n\t\tdiv {\n\t\t\twidth: 100%;\n\n\t\t\tspan {\n\t\t\t\twidth: 100%;\n\n\t\t\t\tspan:nth-child(1) {\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tcolor: var(--color-primary-element);\n\t\t\t\t\tpadding: 0.1em;\n\t\t\t\t}\n\n\t\t\t\t::v-deep label {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-wrap: wrap;\n\n\t\t\t\t\tspan {\n\t\t\t\t\t\tdisplay: flex;\n\n\t\t\t\t\t\t&:first-of-type {\n\t\t\t\t\t\t\tflex: 10%;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t&:last-of-type {\n\t\t\t\t\t\t\tflex: 90%\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsmall {\n\t\t\t\t\t\tpadding-left: 10%;\n\t\t\t\t\t\tflex-basis: 100% !important;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t&__advanced-control {\n\t\twidth: 100%;\n\n\t\tbutton {\n\t\t\tmargin-top: 0.5em;\n\t\t}\n\n\t}\n\n\t&__advanced {\n\t\twidth: 100%;\n\t\tmargin-bottom: 0.5em;\n\t\ttext-align: left;\n\t\tpadding-left: 0;\n\n\t\tsection {\n\n\t\t\ttextarea,\n\t\t\tdiv.mx-datepicker {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\ttextarea {\n\t\t\t\theight: 80px;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\n\t\t\t/*\n              The following style is applied out of the component's scope\n              to remove padding from the label.checkbox-radio-switch__label,\n              which is used to group radio checkbox items. The use of ::v-deep\n              ensures that the padding is modified without being affected by\n              the component's scoping.\n              Without this achieving left alignment for the checkboxes would not\n              be possible.\n            */\n\t\t\tspan {\n\t\t\t\t::v-deep label {\n\t\t\t\t\tbackground-color: initial !important;\n\t\t\t\t\tborder: none !important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsection.custom-permissions-group {\n\t\t\t\tpadding-left: 1.5em;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tposition: sticky;\n\t\tbottom: 0;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));\n\n\t\t>button:first-child {\n\t\t\tcolor: rgb(223, 7, 7);\n\t\t\tbackground-color: #f5f5f5;\n\t\t}\n\n\t\t.button-group {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\twidth: 100%;\n\t\t\tmargin-top: 16px;\n\n\t\t\tbutton {\n\t\t\t\tmargin-left: 16px;\n\n\t\t\t\t&:first-child {\n\t\t\t\t\tmargin-left: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingDetailsTab.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingDetailsTab.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingDetailsTab.vue?vue&type=style&index=0&id=2ac5f4da&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingDetailsTab.vue?vue&type=style&index=0&id=2ac5f4da&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingDetailsTab.vue?vue&type=template&id=2ac5f4da&scoped=true\"\nimport script from \"./SharingDetailsTab.vue?vue&type=script&lang=js\"\nexport * from \"./SharingDetailsTab.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingDetailsTab.vue?vue&type=style&index=0&id=2ac5f4da&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ac5f4da\",\n  null\n  \n)\n\nexport default component.exports","<!--\n  - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @author John Molakvoæ <skjnldsv@protonmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"sharingTab\" :class=\"{ 'icon-loading': loading }\">\n\t\t<!-- error message -->\n\t\t<div v-if=\"error\" class=\"emptycontent\" :class=\"{ emptyContentWithSections: sections.length > 0 }\">\n\t\t\t<div class=\"icon icon-error\" />\n\t\t\t<h2>{{ error }}</h2>\n\t\t</div>\n\n\t\t<template v-if=\"!showSharingDetailsView\">\n\t\t\t<!-- shares content -->\n\t\t\t<div class=\"sharingTab__content\">\n\t\t\t\t<!-- shared with me information -->\n\t\t\t\t<SharingEntrySimple v-if=\"isSharedWithMe\" v-bind=\"sharedWithMe\" class=\"sharing-entry__reshare\">\n\t\t\t\t\t<template #avatar>\n\t\t\t\t\t\t<NcAvatar :user=\"sharedWithMe.user\"\n\t\t\t\t\t\t\t:display-name=\"sharedWithMe.displayName\"\n\t\t\t\t\t\t\tclass=\"sharing-entry__avatar\" />\n\t\t\t\t\t</template>\n\t\t\t\t</SharingEntrySimple>\n\n\t\t\t\t<!-- add new share input -->\n\t\t\t\t<!--\n\t\t\t\t<SharingInput v-if=\"!loading\"\n\t\t\t\t\t:can-reshare=\"canReshare\"\n\t\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t\t:link-shares=\"linkShares\"\n\t\t\t\t\t:reshare=\"reshare\"\n\t\t\t\t\t:shares=\"shares\"\n\t\t\t\t\t@open-sharing-details=\"toggleShareDetailsView\" />\n\t\t\t\t-->\n\n\t\t\t\t<span>{{ t('files_sharing', 'Search on :') }}</span>\n\n\t\t\t\t<!-- add seach choice -->\n\t\t\t\t<SharingInputChoice v-if=\"!loading && canReshare\"\n\t\t\t\t\t:type=\"searchType\"\n\t\t\t\t\t@change=\"updateSearchType\" />\n\n\t\t\t\t<!-- add etab choice -->\n\t\t\t\t<SharingInputEtab v-if=\"!loading && canReshare\"\n\t\t\t\t\tv-show=\"searchType==='etab'\"\n\t\t\t\t\t@change=\"updateSelectedEtabs\" />\n\n\t\t\t\t<!-- add new share input -->\n\t\t\t\t<SharingInputRecia v-if=\"!loading\"\n\t\t\t\t\t:can-reshare=\"canReshare\"\n\t\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t\t:link-shares=\"linkShares\"\n\t\t\t\t\t:reshare=\"reshare\"\n\t\t\t\t\t:shares=\"shares\"\n\t\t\t\t\t:search-type=\"searchType\"\n\t\t\t\t\t:search-etabs=\"selectedEtabs\"\n\t\t\t\t\t@add:share=\"addShare\" />\n\n\t\t\t\t<!-- link shares list -->\n\t\t\t\t<SharingLinkList v-if=\"!loading\"\n\t\t\t\t\tref=\"linkShareList\"\n\t\t\t\t\t:can-reshare=\"canReshare\"\n\t\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t\t:shares=\"linkShares\"\n\t\t\t\t\t@open-sharing-details=\"toggleShareDetailsView\" />\n\n\t\t\t\t<!-- other shares list -->\n\t\t\t\t<SharingList v-if=\"!loading\"\n\t\t\t\t\tref=\"shareList\"\n\t\t\t\t\t:shares=\"shares\"\n\t\t\t\t\t:file-info=\"fileInfo\"\n\t\t\t\t\t@open-sharing-details=\"toggleShareDetailsView\" />\n\n\t\t\t\t<!-- inherited shares -->\n\t\t\t\t<SharingInherited v-if=\"canReshare && !loading\" :file-info=\"fileInfo\" />\n\n\t\t\t\t<!-- internal link copy -->\n\t\t\t\t<SharingEntryInternal :file-info=\"fileInfo\" />\n\n\t\t\t\t<!-- projects -->\n\t\t\t\t<CollectionList v-if=\"projectsEnabled && fileInfo\"\n\t\t\t\t\t:id=\"`${fileInfo.id}`\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t:name=\"fileInfo.name\" />\n\t\t\t</div>\n\n\t\t\t<!-- additional entries, use it with cautious -->\n\t\t\t<div v-for=\"(section, index) in sections\"\n\t\t\t\t:ref=\"'section-' + index\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tclass=\"sharingTab__additionalContent\">\n\t\t\t\t<component :is=\"section($refs['section-'+index], fileInfo)\" :file-info=\"fileInfo\" />\n\t\t\t</div>\n\t\t</template>\n\n\t\t<!-- share details -->\n\t\t<SharingDetailsTab v-else\n\t\t\t:file-info=\"shareDetailsData.fileInfo\"\n\t\t\t:share=\"shareDetailsData.share\"\n\t\t\t@close-sharing-details=\"toggleShareDetailsView\"\n\t\t\t@add:share=\"addShare\"\n\t\t\t@remove:share=\"removeShare\" />\n\t</div>\n</template>\n\n<script>\nimport { CollectionList } from 'nextcloud-vue-collections'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\nimport axios from '@nextcloud/axios'\nimport { loadState } from '@nextcloud/initial-state'\n\nimport Config from '../services/ConfigService.js'\nimport { shareWithTitle } from '../utils/SharedWithMe.js'\nimport Share from '../models/Share.js'\nimport ShareTypes from '../mixins/ShareTypes.js'\nimport SharingEntryInternal from '../components/SharingEntryInternal.vue'\nimport SharingEntrySimple from '../components/SharingEntrySimple.vue'\n// import SharingInput from '../components/SharingInput.vue'\nimport SharingInputRecia from '../components/SharingInputRecia.vue'\nimport SharingInputEtab from '../components/SharingInputEtab.vue'\nimport SharingInputChoice from '../components/SharingInputChoice.vue'\n\nimport SharingInherited from './SharingInherited.vue'\nimport SharingLinkList from './SharingLinkList.vue'\nimport SharingList from './SharingList.vue'\nimport SharingDetailsTab from './SharingDetailsTab.vue'\n\nexport default {\n\tname: 'SharingTab',\n\n\tcomponents: {\n\t\tNcAvatar,\n\t\tCollectionList,\n\t\tSharingEntryInternal,\n\t\tSharingEntrySimple,\n\t\tSharingInherited,\n\t\t// SharingInput,\n\t\tSharingInputRecia,\n\t\tSharingInputEtab,\n\t\tSharingInputChoice,\n\t\tSharingLinkList,\n\t\tSharingList,\n\t\tSharingDetailsTab,\n\t},\n\n\tmixins: [ShareTypes],\n\n\tdata() {\n\t\treturn {\n\t\t\tconfig: new Config(),\n\t\t\tdeleteEvent: null,\n\t\t\terror: '',\n\t\t\texpirationInterval: null,\n\t\t\tloading: true,\n\n\t\t\tfileInfo: null,\n\n\t\t\t// reshare Share object\n\t\t\treshare: null,\n\t\t\tsharedWithMe: {},\n\t\t\tshares: [],\n\t\t\tlinkShares: [],\n\n\t\t\tsearchType: 'etab',\n\t\t\tselectedEtabs: [],\n\n\t\t\tsections: OCA.Sharing.ShareTabSections.getSections(),\n\t\t\tprojectsEnabled: loadState('core', 'projects_enabled', false),\n\t\t\tshowSharingDetailsView: false,\n\t\t\tshareDetailsData: {},\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Is this share shared with me?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisSharedWithMe() {\n\t\t\treturn Object.keys(this.sharedWithMe).length > 0\n\t\t},\n\n\t\tcanReshare() {\n\t\t\treturn !!(this.fileInfo.permissions & OC.PERMISSION_SHARE)\n\t\t\t\t|| !!(this.reshare && this.reshare.hasSharePermission && this.config.isResharingAllowed)\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Update current fileInfo and fetch new data\n\t\t *\n\t\t * @param {object} fileInfo the current file FileInfo\n\t\t */\n\t\tasync update(fileInfo) {\n\t\t\tthis.fileInfo = fileInfo\n\t\t\tthis.resetState()\n\t\t\tthis.getShares()\n\t\t},\n\n\t\t/**\n\t\t * Get the existing shares infos\n\t\t */\n\t\tasync getShares() {\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\n\t\t\t\t// init params\n\t\t\t\tconst shareUrl = generateOcsUrl('apps/files_sharing/api/v1/shares')\n\t\t\t\tconst format = 'json'\n\t\t\t\t// TODO: replace with proper getFUllpath implementation of our own FileInfo model\n\t\t\t\tconst path = (this.fileInfo.path + '/' + this.fileInfo.name).replace('//', '/')\n\n\t\t\t\t// fetch shares\n\t\t\t\tconst fetchShares = axios.get(shareUrl, {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\treshares: true,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tconst fetchSharedWithMe = axios.get(shareUrl, {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tshared_with_me: true,\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// wait for data\n\t\t\t\tconst [shares, sharedWithMe] = await Promise.all([fetchShares, fetchSharedWithMe])\n\t\t\t\tthis.loading = false\n\n\t\t\t\t// process results\n\t\t\t\tthis.processSharedWithMe(sharedWithMe)\n\t\t\t\tthis.processShares(shares)\n\t\t\t} catch (error) {\n\t\t\t\tif (error.response.data?.ocs?.meta?.message) {\n\t\t\t\t\tthis.error = error.response.data.ocs.meta.message\n\t\t\t\t} else {\n\t\t\t\t\tthis.error = t('files_sharing', 'Unable to load the shares list')\n\t\t\t\t}\n\t\t\t\tthis.loading = false\n\t\t\t\tconsole.error('Error loading the shares list', error)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset the current view to its default state\n\t\t */\n\t\tresetState() {\n\t\t\tclearInterval(this.expirationInterval)\n\t\t\tthis.loading = true\n\t\t\tthis.error = ''\n\t\t\tthis.sharedWithMe = {}\n\t\t\tthis.shares = []\n\t\t\tthis.linkShares = []\n\t\t\tthis.showSharingDetailsView = false\n\t\t\tthis.shareDetailsData = {}\n\t\t},\n\n\t\t/**\n\t\t * Update sharedWithMe.subtitle with the appropriate\n\t\t * expiration time left\n\t\t *\n\t\t * @param {Share} share the sharedWith Share object\n\t\t */\n\t\tupdateExpirationSubtitle(share) {\n\t\t\tconst expiration = moment(share.expireDate).unix()\n\t\t\tthis.$set(this.sharedWithMe, 'subtitle', t('files_sharing', 'Expires {relativetime}', {\n\t\t\t\trelativetime: OC.Util.relativeModifiedDate(expiration * 1000),\n\t\t\t}))\n\n\t\t\t// share have expired\n\t\t\tif (moment().unix() > expiration) {\n\t\t\t\tclearInterval(this.expirationInterval)\n\t\t\t\t// TODO: clear ui if share is expired\n\t\t\t\tthis.$set(this.sharedWithMe, 'subtitle', t('files_sharing', 'this share just expired.'))\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Process the current shares data\n\t\t * and init shares[]\n\t\t *\n\t\t * @param {object} share the share ocs api request data\n\t\t * @param {object} share.data the request data\n\t\t */\n\t\tprocessShares({ data }) {\n\t\t\tif (data.ocs && data.ocs.data && data.ocs.data.length > 0) {\n\t\t\t\t// create Share objects and sort by newest\n\t\t\t\tconst shares = data.ocs.data\n\t\t\t\t\t.map(share => new Share(share))\n\t\t\t\t\t.sort((a, b) => b.createdTime - a.createdTime)\n\n\t\t\t\tthis.linkShares = shares.filter(share => share.type === this.SHARE_TYPES.SHARE_TYPE_LINK || share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL)\n\t\t\t\tthis.shares = shares.filter(share => share.type !== this.SHARE_TYPES.SHARE_TYPE_LINK && share.type !== this.SHARE_TYPES.SHARE_TYPE_EMAIL)\n\n\t\t\t\tconsole.debug('Processed', this.linkShares.length, 'link share(s)')\n\t\t\t\tconsole.debug('Processed', this.shares.length, 'share(s)')\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Process the sharedWithMe share data\n\t\t * and init sharedWithMe\n\t\t *\n\t\t * @param {object} share the share ocs api request data\n\t\t * @param {object} share.data the request data\n\t\t */\n\t\tprocessSharedWithMe({ data }) {\n\t\t\tif (data.ocs && data.ocs.data && data.ocs.data[0]) {\n\t\t\t\tconst share = new Share(data)\n\t\t\t\tconst title = shareWithTitle(share)\n\t\t\t\tconst displayName = share.ownerDisplayName\n\t\t\t\tconst user = share.owner\n\n\t\t\t\tthis.sharedWithMe = {\n\t\t\t\t\tdisplayName,\n\t\t\t\t\ttitle,\n\t\t\t\t\tuser,\n\t\t\t\t}\n\t\t\t\tthis.reshare = share\n\n\t\t\t\t// If we have an expiration date, use it as subtitle\n\t\t\t\t// Refresh the status every 10s and clear if expired\n\t\t\t\tif (share.expireDate && moment(share.expireDate).unix() > moment().unix()) {\n\t\t\t\t\t// first update\n\t\t\t\t\tthis.updateExpirationSubtitle(share)\n\t\t\t\t\t// interval update\n\t\t\t\t\tthis.expirationInterval = setInterval(this.updateExpirationSubtitle, 10000, share)\n\t\t\t\t}\n\t\t\t} else if (this.fileInfo && this.fileInfo.shareOwnerId !== undefined ? this.fileInfo.shareOwnerId !== OC.currentUser : false) {\n\t\t\t\t// Fallback to compare owner and current user.\n\t\t\t\tthis.sharedWithMe = {\n\t\t\t\t\tdisplayName: this.fileInfo.shareOwner,\n\t\t\t\t\ttitle: t(\n\t\t\t\t\t\t'files_sharing',\n\t\t\t\t\t\t'Shared with you by {owner}',\n\t\t\t\t\t\t{ owner: this.fileInfo.shareOwner },\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t{ escape: false },\n\t\t\t\t\t),\n\t\t\t\t\tuser: this.fileInfo.shareOwnerId,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Add a new share into the shares list\n\t\t * and return the newly created share component\n\t\t *\n\t\t * @param {Share} share the share to add to the array\n\t\t * @param {Function} [resolve] a function to run after the share is added and its component initialized\n\t\t */\n\t\taddShare(share, resolve = () => { }) {\n\t\t\t// only catching share type MAIL as link shares are added differently\n\t\t\t// meaning: not from the ShareInput\n\t\t\tif (share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\n\t\t\t\tthis.linkShares.unshift(share)\n\t\t\t} else {\n\t\t\t\tthis.shares.unshift(share)\n\t\t\t}\n\t\t\tthis.awaitForShare(share, resolve)\n\t\t},\n\t\t/**\n\t\t * Remove a share from the shares list\n\t\t *\n\t\t * @param {Share} share the share to remove\n\t\t */\n\t\tremoveShare(share) {\n\t\t\t// Get reference for this.linkShares or this.shares\n\t\t\tconst shareList\n\t\t\t\t= share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL\n\t\t\t\t\t|| share.type === this.SHARE_TYPES.SHARE_TYPE_LINK\n\t\t\t\t\t? this.linkShares\n\t\t\t\t\t: this.shares\n\t\t\tconst index = shareList.findIndex(item => item.id === share.id)\n\t\t\tif (index !== -1) {\n\t\t\t\tshareList.splice(index, 1)\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Await for next tick and render after the list updated\n\t\t * Then resolve with the matched vue component of the\n\t\t * provided share object\n\t\t *\n\t\t * @param {Share} share newly created share\n\t\t * @param {Function} resolve a function to execute after\n\t\t */\n\t\tawaitForShare(share, resolve) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tlet listComponent = this.$refs.shareList\n\t\t\t\t// Only mail shares comes from the input, link shares\n\t\t\t\t// are managed internally in the SharingLinkList component\n\t\t\t\tif (share.type === this.SHARE_TYPES.SHARE_TYPE_EMAIL) {\n\t\t\t\t\tlistComponent = this.$refs.linkShareList\n\t\t\t\t}\n\t\t\t\tconst newShare = listComponent.$children.find(component => component.share === share)\n\t\t\t\tif (newShare) {\n\t\t\t\t\tresolve(newShare)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\ttoggleShareDetailsView(eventData) {\n\t\t\tif (eventData) {\n\t\t\t\tthis.shareDetailsData = eventData\n\t\t\t}\n\t\t\tthis.showSharingDetailsView = !this.showSharingDetailsView\n\t\t},\n\n\t\tupdateSearchType(type) {\n\t\t\tthis.searchType = type\n\t\t},\n\n\t\tupdateSelectedEtabs(etabs) {\n\t\t\tthis.selectedEtabs = etabs\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.emptyContentWithSections {\n\tmargin: 1rem auto;\n}\n\n.sharingTab {\n\tposition: relative;\n\theight: 100%;\n\n\t&__content {\n\t\tpadding: 0 6px;\n\t}\n\n\t&__additionalContent {\n\t\tmargin: 44px 0;\n\t}\n}\n</style>\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author Joas Schilling <coding@schilljs.com>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Type as ShareTypes } from '@nextcloud/sharing'\n\nconst shareWithTitle = function(share) {\n\tif (share.type === ShareTypes.SHARE_TYPE_GROUP) {\n\t\treturn t(\n\t\t\t'files_sharing',\n\t\t\t'Shared with you and the group {group} by {owner}',\n\t\t\t{\n\t\t\t\tgroup: share.shareWithDisplayName,\n\t\t\t\towner: share.ownerDisplayName,\n\t\t\t},\n\t\t\tundefined,\n\t\t\t{ escape: false },\n\t\t)\n\t} else if (share.type === ShareTypes.SHARE_TYPE_CIRCLE) {\n\t\treturn t(\n\t\t\t'files_sharing',\n\t\t\t'Shared with you and {circle} by {owner}',\n\t\t\t{\n\t\t\t\tcircle: share.shareWithDisplayName,\n\t\t\t\towner: share.ownerDisplayName,\n\t\t\t},\n\t\t\tundefined,\n\t\t\t{ escape: false },\n\t\t)\n\t} else if (share.type === ShareTypes.SHARE_TYPE_ROOM) {\n\t\tif (share.shareWithDisplayName) {\n\t\t\treturn t(\n\t\t\t\t'files_sharing',\n\t\t\t\t'Shared with you and the conversation {conversation} by {owner}',\n\t\t\t\t{\n\t\t\t\t\tconversation: share.shareWithDisplayName,\n\t\t\t\t\towner: share.ownerDisplayName,\n\t\t\t\t},\n\t\t\t\tundefined,\n\t\t\t\t{ escape: false },\n\t\t\t)\n\t\t} else {\n\t\t\treturn t(\n\t\t\t\t'files_sharing',\n\t\t\t\t'Shared with you in a conversation by {owner}',\n\t\t\t\t{\n\t\t\t\t\towner: share.ownerDisplayName,\n\t\t\t\t},\n\t\t\t\tundefined,\n\t\t\t\t{ escape: false },\n\t\t\t)\n\t\t}\n\t} else {\n\t\treturn t(\n\t\t\t'files_sharing',\n\t\t\t'Shared with you by {owner}',\n\t\t\t{ owner: share.ownerDisplayName },\n\t\t\tundefined,\n\t\t\t{ escape: false },\n\t\t)\n\t}\n}\n\nexport { shareWithTitle }\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=style&index=0&id=e66c1fca&prod&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SharingTab.vue?vue&type=style&index=0&id=e66c1fca&prod&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SharingTab.vue?vue&type=template&id=e66c1fca&scoped=true\"\nimport script from \"./SharingTab.vue?vue&type=script&lang=js\"\nexport * from \"./SharingTab.vue?vue&type=script&lang=js\"\nimport style0 from \"./SharingTab.vue?vue&type=style&index=0&id=e66c1fca&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e66c1fca\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"sharingTab\",class:{ 'icon-loading': _vm.loading }},[(_vm.error)?_c('div',{staticClass:\"emptycontent\",class:{ emptyContentWithSections: _vm.sections.length > 0 }},[_c('div',{staticClass:\"icon icon-error\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.error))])]):_vm._e(),_vm._v(\" \"),(!_vm.showSharingDetailsView)?[_c('div',{staticClass:\"sharingTab__content\"},[(_vm.isSharedWithMe)?_c('SharingEntrySimple',_vm._b({staticClass:\"sharing-entry__reshare\",scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('NcAvatar',{staticClass:\"sharing-entry__avatar\",attrs:{\"user\":_vm.sharedWithMe.user,\"display-name\":_vm.sharedWithMe.displayName}})]},proxy:true}],null,false,3197855346)},'SharingEntrySimple',_vm.sharedWithMe,false)):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('files_sharing', 'Search on :')))]),_vm._v(\" \"),(!_vm.loading && _vm.canReshare)?_c('SharingInputChoice',{attrs:{\"type\":_vm.searchType},on:{\"change\":_vm.updateSearchType}}):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.canReshare)?_c('SharingInputEtab',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchType==='etab'),expression:\"searchType==='etab'\"}],on:{\"change\":_vm.updateSelectedEtabs}}):_vm._e(),_vm._v(\" \"),(!_vm.loading)?_c('SharingInputRecia',{attrs:{\"can-reshare\":_vm.canReshare,\"file-info\":_vm.fileInfo,\"link-shares\":_vm.linkShares,\"reshare\":_vm.reshare,\"shares\":_vm.shares,\"search-type\":_vm.searchType,\"search-etabs\":_vm.selectedEtabs},on:{\"add:share\":_vm.addShare}}):_vm._e(),_vm._v(\" \"),(!_vm.loading)?_c('SharingLinkList',{ref:\"linkShareList\",attrs:{\"can-reshare\":_vm.canReshare,\"file-info\":_vm.fileInfo,\"shares\":_vm.linkShares},on:{\"open-sharing-details\":_vm.toggleShareDetailsView}}):_vm._e(),_vm._v(\" \"),(!_vm.loading)?_c('SharingList',{ref:\"shareList\",attrs:{\"shares\":_vm.shares,\"file-info\":_vm.fileInfo},on:{\"open-sharing-details\":_vm.toggleShareDetailsView}}):_vm._e(),_vm._v(\" \"),(_vm.canReshare && !_vm.loading)?_c('SharingInherited',{attrs:{\"file-info\":_vm.fileInfo}}):_vm._e(),_vm._v(\" \"),_c('SharingEntryInternal',{attrs:{\"file-info\":_vm.fileInfo}}),_vm._v(\" \"),(_vm.projectsEnabled && _vm.fileInfo)?_c('CollectionList',{attrs:{\"id\":`${_vm.fileInfo.id}`,\"type\":\"file\",\"name\":_vm.fileInfo.name}}):_vm._e()],1),_vm._v(\" \"),_vm._l((_vm.sections),function(section,index){return _c('div',{key:index,ref:'section-' + index,refInFor:true,staticClass:\"sharingTab__additionalContent\"},[_c(section(_vm.$refs['section-'+index], _vm.fileInfo),{tag:\"component\",attrs:{\"file-info\":_vm.fileInfo}})],1)})]:_c('SharingDetailsTab',{attrs:{\"file-info\":_vm.shareDetailsData.fileInfo,\"share\":_vm.shareDetailsData.share},on:{\"close-sharing-details\":_vm.toggleShareDetailsView,\"add:share\":_vm.addShare,\"remove:share\":_vm.removeShare}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport Vue from 'vue'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\n\nimport SharingTab from './views/SharingTab.vue'\nimport ShareSearch from './services/ShareSearch.js'\nimport ExternalLinkActions from './services/ExternalLinkActions.js'\nimport ExternalShareActions from './services/ExternalShareActions.js'\nimport TabSections from './services/TabSections.js'\n\n// eslint-disable-next-line n/no-missing-import, import/no-unresolved\nimport ShareVariant from '@mdi/svg/svg/share-variant.svg?raw'\n\n// Init Sharing Tab Service\nif (!window.OCA.Sharing) {\n\twindow.OCA.Sharing = {}\n}\nObject.assign(window.OCA.Sharing, { ShareSearch: new ShareSearch() })\nObject.assign(window.OCA.Sharing, { ExternalLinkActions: new ExternalLinkActions() })\nObject.assign(window.OCA.Sharing, { ExternalShareActions: new ExternalShareActions() })\nObject.assign(window.OCA.Sharing, { ShareTabSections: new TabSections() })\n\nVue.prototype.t = t\nVue.prototype.n = n\n\n// Init Sharing tab component\nconst View = Vue.extend(SharingTab)\nlet TabInstance = null\n\nwindow.addEventListener('DOMContentLoaded', function() {\n\tif (OCA.Files && OCA.Files.Sidebar) {\n\t\tOCA.Files.Sidebar.registerTab(new OCA.Files.Sidebar.Tab({\n\t\t\tid: 'sharing',\n\t\t\tname: t('files_sharing', 'Sharing'),\n\t\t\ticonSvg: ShareVariant,\n\n\t\t\tasync mount(el, fileInfo, context) {\n\t\t\t\tif (TabInstance) {\n\t\t\t\t\tTabInstance.$destroy()\n\t\t\t\t}\n\t\t\t\tTabInstance = new View({\n\t\t\t\t\t// Better integration with vue parent component\n\t\t\t\t\tparent: context,\n\t\t\t\t})\n\t\t\t\t// Only mount after we have all the info we need\n\t\t\t\tawait TabInstance.update(fileInfo)\n\t\t\t\tTabInstance.$mount(el)\n\t\t\t},\n\t\t\tupdate(fileInfo) {\n\t\t\t\tTabInstance.update(fileInfo)\n\t\t\t},\n\t\t\tdestroy() {\n\t\t\t\tTabInstance.$destroy()\n\t\t\t\tTabInstance = null\n\t\t\t},\n\t\t}))\n\t}\n})\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default class ShareSearch {\n\n\t_state\n\n\tconstructor() {\n\t\t// init empty state\n\t\tthis._state = {}\n\n\t\t// init default values\n\t\tthis._state.results = []\n\t\tconsole.debug('OCA.Sharing.ShareSearch initialized')\n\t}\n\n\t/**\n\t * Get the state\n\t *\n\t * @readonly\n\t * @memberof ShareSearch\n\t * @return {object} the data state\n\t */\n\tget state() {\n\t\treturn this._state\n\t}\n\n\t/**\n\t * Register a new result\n\t * Mostly used by the guests app.\n\t * We should consider deprecation and add results via php ?\n\t *\n\t * @param {object} result entry to append\n\t * @param {string} [result.user] entry user\n\t * @param {string} result.displayName entry first line\n\t * @param {string} [result.desc] entry second line\n\t * @param {string} [result.icon] entry icon\n\t * @param {Function} result.handler function to run on entry selection\n\t * @param {Function} [result.condition] condition to add entry or not\n\t * @return {boolean}\n\t */\n\taddNewResult(result) {\n\t\tif (result.displayName.trim() !== ''\n\t\t\t&& typeof result.handler === 'function') {\n\t\t\tthis._state.results.push(result)\n\t\t\treturn true\n\t\t}\n\t\tconsole.error('Invalid search result provided', result)\n\t\treturn false\n\t}\n\n}\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default class ExternalLinkActions {\n\n\t_state\n\n\tconstructor() {\n\t\t// init empty state\n\t\tthis._state = {}\n\n\t\t// init default values\n\t\tthis._state.actions = []\n\t\tconsole.debug('OCA.Sharing.ExternalLinkActions initialized')\n\t}\n\n\t/**\n\t * Get the state\n\t *\n\t * @readonly\n\t * @memberof ExternalLinkActions\n\t * @return {object} the data state\n\t */\n\tget state() {\n\t\treturn this._state\n\t}\n\n\t/**\n\t * Register a new action for the link share\n\t * Mostly used by the social sharing app.\n\t *\n\t * @param {object} action new action component to register\n\t * @return {boolean}\n\t */\n\tregisterAction(action) {\n\t\tOC.debug && console.warn('OCA.Sharing.ExternalLinkActions is deprecated, use OCA.Sharing.ExternalShareAction instead')\n\n\t\tif (typeof action === 'object' && action.icon && action.name && action.url) {\n\t\t\tthis._state.actions.push(action)\n\t\t\treturn true\n\t\t}\n\t\tconsole.error('Invalid action provided', action)\n\t\treturn false\n\t}\n\n}\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default class ExternalShareActions {\n\n\t_state\n\n\tconstructor() {\n\t\t// init empty state\n\t\tthis._state = {}\n\n\t\t// init default values\n\t\tthis._state.actions = []\n\t\tconsole.debug('OCA.Sharing.ExternalShareActions initialized')\n\t}\n\n\t/**\n\t * Get the state\n\t *\n\t * @readonly\n\t * @memberof ExternalLinkActions\n\t * @return {object} the data state\n\t */\n\tget state() {\n\t\treturn this._state\n\t}\n\n\t/**\n\t * Register a new option/entry for the a given share type\n\t *\n\t * @param {object} action new action component to register\n\t * @param {string} action.id unique action id\n\t * @param {Function} action.data data to bind the component to\n\t * @param {Array} action.shareType list of \\@nextcloud/sharing.Types.SHARE_XXX to be mounted on\n\t * @param {object} action.handlers list of listeners\n\t * @return {boolean}\n\t */\n\tregisterAction(action) {\n\t\t// Validate action\n\t\tif (typeof action !== 'object'\n\t\t\t|| typeof action.id !== 'string'\n\t\t\t|| typeof action.data !== 'function' // () => {disabled: true}\n\t\t\t|| !Array.isArray(action.shareType) // [\\@nextcloud/sharing.Types.SHARE_TYPE_LINK, ...]\n\t\t\t|| typeof action.handlers !== 'object' // {click: () => {}, ...}\n\t\t\t|| !Object.values(action.handlers).every(handler => typeof handler === 'function')) {\n\t\t\tconsole.error('Invalid action provided', action)\n\t\t\treturn false\n\t\t}\n\n\t\t// Check duplicates\n\t\tconst hasDuplicate = this._state.actions.findIndex(check => check.id === action.id) > -1\n\t\tif (hasDuplicate) {\n\t\t\tconsole.error(`An action with the same id ${action.id} already exists`, action)\n\t\t\treturn false\n\t\t}\n\n\t\tthis._state.actions.push(action)\n\t\treturn true\n\t}\n\n}\n","/**\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default class TabSections {\n\n\t_sections\n\n\tconstructor() {\n\t\tthis._sections = []\n\t}\n\n\t/**\n\t * @param {registerSectionCallback} section To be called to mount the section to the sharing sidebar\n\t */\n\tregisterSection(section) {\n\t\tthis._sections.push(section)\n\t}\n\n\tgetSections() {\n\t\treturn this._sections\n\t}\n\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-7bfd2f06]{display:flex;align-items:center;height:44px}.sharing-entry__summary[data-v-7bfd2f06]{padding:8px;display:flex;flex-direction:column;justify-content:center;width:80%;min-width:80%}.sharing-entry__summary__desc[data-v-7bfd2f06]{display:inline-block;padding-bottom:0;line-height:1.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sharing-entry__summary__desc p[data-v-7bfd2f06],.sharing-entry__summary__desc small[data-v-7bfd2f06]{color:var(--color-text-maxcontrast)}.sharing-entry__summary__desc-unique[data-v-7bfd2f06]{color:var(--color-text-maxcontrast)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntry.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CAEA,yCACC,WAAA,CACA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,SAAA,CACA,aAAA,CAEA,+CACC,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,sGAEC,mCAAA,CAGD,sDACC,mCAAA\",\"sourcesContent\":[\"\\n.sharing-entry {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\theight: 44px;\\n\\n\\t&__summary {\\n\\t\\tpadding: 8px;\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\tjustify-content: center;\\n\\t\\twidth: 80%;\\n\\t\\tmin-width: 80%;\\n\\n\\t\\t&__desc {\\n\\t\\t\\tdisplay: inline-block;\\n\\t\\t\\tpadding-bottom: 0;\\n\\t\\t\\tline-height: 1.2em;\\n\\t\\t\\twhite-space: nowrap;\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\ttext-overflow: ellipsis;\\n\\n\\t\\t\\tp,\\n\\t\\t\\tsmall {\\n\\t\\t\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\t\\t}\\n\\n\\t\\t\\t&-unique {\\n\\t\\t\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-283ca89e]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-283ca89e]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;padding-left:10px;line-height:1.2em}.sharing-entry__desc p[data-v-283ca89e]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-283ca89e]{margin-left:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryInherited.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAGF,yCACC,gBAAA\",\"sourcesContent\":[\"\\n.sharing-entry {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\theight: 44px;\\n\\t&__desc {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\tjustify-content: space-between;\\n\\t\\tpadding: 8px;\\n\\t\\tpadding-left: 10px;\\n\\t\\tline-height: 1.2em;\\n\\t\\tp {\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\t}\\n\\t}\\n\\t&__actions {\\n\\t\\tmargin-left: auto;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry__internal .avatar-external[data-v-71a426be]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}.sharing-entry__internal .icon-checkmark-color[data-v-71a426be]{opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryInternal.vue\"],\"names\":[],\"mappings\":\"AAEC,2DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA,CAED,gEACC,SAAA\",\"sourcesContent\":[\"\\n.sharing-entry__internal {\\n\\t.avatar-external {\\n\\t\\twidth: 32px;\\n\\t\\theight: 32px;\\n\\t\\tline-height: 32px;\\n\\t\\tfont-size: 18px;\\n\\t\\tbackground-color: var(--color-text-maxcontrast);\\n\\t\\tborder-radius: 50%;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n\\t.icon-checkmark-color {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-cc82d906]{display:flex;align-items:center;min-height:44px}.sharing-entry__summary[data-v-cc82d906]{padding:8px;padding-left:10px;display:flex;justify-content:space-between;width:80%;min-width:80%}.sharing-entry__summary__desc[data-v-cc82d906]{display:flex;flex-direction:column;line-height:1.2em}.sharing-entry__summary__desc p[data-v-cc82d906]{color:var(--color-text-maxcontrast)}.sharing-entry__summary__desc__title[data-v-cc82d906]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.sharing-entry:not(.sharing-entry--share) .sharing-entry__actions .new-share-link[data-v-cc82d906]{border-top:1px solid var(--color-border)}.sharing-entry[data-v-cc82d906] .avatar-link-share{background-color:var(--color-primary-element)}.sharing-entry .sharing-entry__action--public-upload[data-v-cc82d906]{border-bottom:1px solid var(--color-border)}.sharing-entry__loading[data-v-cc82d906]{width:44px;height:44px;margin:0;padding:14px;margin-left:auto}.sharing-entry .action-item~.action-item[data-v-cc82d906],.sharing-entry .action-item~.sharing-entry__loading[data-v-cc82d906]{margin-left:0}.sharing-entry .icon-checkmark-color[data-v-cc82d906]{opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryLink.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CAEA,yCACC,WAAA,CACA,iBAAA,CACA,YAAA,CACA,6BAAA,CACA,SAAA,CACA,aAAA,CAEA,+CACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,iDACC,mCAAA,CAGD,sDACC,sBAAA,CACA,eAAA,CACA,kBAAA,CAOF,mGACC,wCAAA,CAIF,mDACC,6CAAA,CAGD,sEACC,2CAAA,CAGD,yCACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,gBAAA,CAOA,+HAEC,aAAA,CAIF,sDACC,SAAA\",\"sourcesContent\":[\"\\n.sharing-entry {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tmin-height: 44px;\\n\\n\\t&__summary {\\n\\t\\tpadding: 8px;\\n\\t\\tpadding-left: 10px;\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n\\t\\twidth: 80%;\\n\\t\\tmin-width: 80%;\\n\\n\\t\\t&__desc {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\tflex-direction: column;\\n\\t\\t\\tline-height: 1.2em;\\n\\n\\t\\t\\tp {\\n\\t\\t\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\t\\t}\\n\\n\\t\\t\\t&__title {\\n\\t\\t\\t\\ttext-overflow: ellipsis;\\n\\t\\t\\t\\toverflow: hidden;\\n\\t\\t\\t\\twhite-space: nowrap;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t}\\n\\n\\t&:not(.sharing-entry--share) &__actions {\\n\\t\\t.new-share-link {\\n\\t\\t\\tborder-top: 1px solid var(--color-border);\\n\\t\\t}\\n\\t}\\n\\n\\t::v-deep .avatar-link-share {\\n\\t\\tbackground-color: var(--color-primary-element);\\n\\t}\\n\\n\\t.sharing-entry__action--public-upload {\\n\\t\\tborder-bottom: 1px solid var(--color-border);\\n\\t}\\n\\n\\t&__loading {\\n\\t\\twidth: 44px;\\n\\t\\theight: 44px;\\n\\t\\tmargin: 0;\\n\\t\\tpadding: 14px;\\n\\t\\tmargin-left: auto;\\n\\t}\\n\\n\\t// put menus to the left\\n\\t// but only the first one\\n\\t.action-item {\\n\\n\\t\\t~.action-item,\\n\\t\\t~.sharing-entry__loading {\\n\\t\\t\\tmargin-left: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.icon-checkmark-color {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".share-select[data-v-d960cabe]{position:relative;cursor:pointer}.share-select .trigger-text[data-v-d960cabe]{display:flex;flex-direction:row;align-items:center;font-size:12.5px;gap:2px;color:var(--color-primary-element)}.share-select .share-select-dropdown[data-v-d960cabe]{position:absolute;display:flex;flex-direction:column;top:100%;left:0;background-color:var(--color-main-background);border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.2);border:1px solid var(--color-border);padding:4px 0;z-index:1}.share-select .share-select-dropdown .dropdown-item[data-v-d960cabe]{padding:8px;font-size:12px;background:none;border:none;border-radius:0;font:inherit;cursor:pointer;color:inherit;outline:none;width:100%;white-space:nowrap;text-align:left}.share-select .share-select-dropdown .dropdown-item[data-v-d960cabe]:hover{background-color:var(--color-background-dark)}.share-select .share-select-dropdown .dropdown-item.selected[data-v-d960cabe]{background-color:var(--color-background-dark)}.share-select .share-select-dropdown[data-v-d960cabe]{max-height:0;overflow:hidden;transition:max-height .3s ease}.share-select.active .share-select-dropdown[data-v-d960cabe]{max-height:200px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue\"],\"names\":[],\"mappings\":\"AACA,+BACC,iBAAA,CACA,cAAA,CAEA,6CACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,gBAAA,CACA,OAAA,CACA,kCAAA,CAGD,sDACC,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,QAAA,CACA,MAAA,CACA,6CAAA,CACA,iBAAA,CACA,mCAAA,CACA,oCAAA,CACA,aAAA,CACA,SAAA,CAEA,qEACC,WAAA,CACA,cAAA,CACA,eAAA,CACA,WAAA,CACA,eAAA,CACA,YAAA,CACA,cAAA,CACA,aAAA,CACA,YAAA,CACA,UAAA,CACA,kBAAA,CACA,eAAA,CAEA,2EACC,6CAAA,CAGD,8EACC,6CAAA,CAMH,sDACC,YAAA,CACA,eAAA,CACA,8BAAA,CAGD,6DACC,gBAAA\",\"sourcesContent\":[\"\\n.share-select {\\n\\tposition: relative;\\n\\tcursor: pointer;\\n\\n\\t.trigger-text {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: row;\\n\\t\\talign-items: center;\\n\\t\\tfont-size: 12.5px;\\n\\t\\tgap: 2px;\\n\\t\\tcolor: var(--color-primary-element);\\n\\t}\\n\\n\\t.share-select-dropdown {\\n\\t\\tposition: absolute;\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\ttop: 100%;\\n\\t\\tleft: 0;\\n\\t\\tbackground-color: var(--color-main-background);\\n\\t\\tborder-radius: 8px;\\n\\t\\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n\\t\\tborder: 1px solid var(--color-border);\\n\\t\\tpadding: 4px 0;\\n\\t\\tz-index: 1;\\n\\n\\t\\t.dropdown-item {\\n\\t\\t\\tpadding: 8px;\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tbackground: none;\\n\\t\\t\\tborder: none;\\n\\t\\t\\tborder-radius: 0;\\n\\t\\t\\tfont: inherit;\\n\\t\\t\\tcursor: pointer;\\n\\t\\t\\tcolor: inherit;\\n\\t\\t\\toutline: none;\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\twhite-space: nowrap;\\n\\t\\t\\ttext-align: left;\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tbackground-color: var(--color-background-dark);\\n\\t\\t\\t}\\n\\n\\t\\t\\t&.selected {\\n\\t\\t\\t\\tbackground-color: var(--color-background-dark);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t/* Optional: Add a transition effect for smoother dropdown animation */\\n\\t.share-select-dropdown {\\n\\t\\tmax-height: 0;\\n\\t\\toverflow: hidden;\\n\\t\\ttransition: max-height 0.3s ease;\\n\\t}\\n\\n\\t&.active .share-select-dropdown {\\n\\t\\tmax-height: 200px;\\n\\t\\t/* Adjust the value to your desired height */\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry[data-v-1852ea78]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-1852ea78]{padding:8px;padding-left:10px;line-height:1.2em;position:relative;flex:1 1;min-width:0}.sharing-entry__desc p[data-v-1852ea78]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-1852ea78]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:inherit}.sharing-entry__actions[data-v-1852ea78]{margin-left:auto !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingEntrySimple.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CACA,wCACC,mCAAA,CAGF,uCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAED,yCACC,2BAAA\",\"sourcesContent\":[\"\\n.sharing-entry {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tmin-height: 44px;\\n\\t&__desc {\\n\\t\\tpadding: 8px;\\n\\t\\tpadding-left: 10px;\\n\\t\\tline-height: 1.2em;\\n\\t\\tposition: relative;\\n\\t\\tflex: 1 1;\\n\\t\\tmin-width: 0;\\n\\t\\tp {\\n\\t\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\t}\\n\\t}\\n\\t&__title {\\n\\t\\twhite-space: nowrap;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\toverflow: hidden;\\n\\t\\tmax-width: inherit;\\n\\t}\\n\\t&__actions {\\n\\t\\tmargin-left: auto !important;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-input-etab{width:100%;margin:10px 0}.sharing-input-etab .multiselect__content-wrapper{min-height:150px}.sharing-input-etab .option__desc{display:flex;flex-direction:column;justify-content:center;min-width:0}.sharing-input-etab .option__desc .option__name,.sharing-input-etab .option__desc .option__uai{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sharing-input-etab .option__desc .option__name{color:var(--color-text-light)}.sharing-input-etab .option__desc .option__uai{font-size:smaller}.sharing-input-etab .multiselect__option--highlight:not(.multiselect__option--selected):before{visibility:hidden !important}.sharing-input-etab .multiselect__option--highlight:after{position:absolute;bottom:5px;right:5px;content:\\\"Selectionner\\\";opacity:.5}.sharing-input-etab .multiselect__option--highlight.multiselect__option--selected:after{content:\\\"Déselectionner\\\"}.sharing-input-etab .option__close,.sharing-input-etab .option__selectall{display:flex;flex-wrap:wrap;width:100%;font-weight:700;text-align:center;padding:8px;overflow:hidden;text-overflow:ellipsis;height:auto;min-height:1em;background-color:rgba(0,0,0,0)}.sharing-input-etab .option__close span,.sharing-input-etab .option__selectall span{flex:1;color:var(--color-text-lighter)}.sharing-input-etab .option__close span:hover,.sharing-input-etab .option__selectall span:hover{color:var(--color-text)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./SharingInputEtab.vue\",\"webpack://./apps/files_sharing/src/components/SharingInputEtab.vue\"],\"names\":[],\"mappings\":\"AAAA,oBCCA,UACC,CAAA,aACA,CAAA,kDACA,gBACC,CAAA,kCAED,YACC,CAAA,qBACA,CAAA,sBACA,CAAA,WACA,CAAA,+FACA,eACC,CAAA,kBACA,CAAA,sBACA,CAAA,gDAED,6BACC,CAAA,+CAED,iBACC,CAAA,+FAMA,4BACC,CAAA,0DAGF,iBACC,CAAA,UACA,CAAA,SACA,CAAA,sBACA,CAAA,UACA,CAAA,wFAGA,wBACC,CAAA,0EAIH,YACC,CAAA,cACA,CAAA,UACA,CAAA,eACA,CAAA,iBACA,CAAA,WACA,CAAA,eACA,CAAA,sBACA,CAAA,WACA,CAAA,cACA,CAAA,8BACA,CAAA,oFACA,MACC,CAAA,+BACA,CAAA,gGACA,uBACC\",\"sourcesContent\":[\".sharing-input-etab{width:100%;margin:10px 0}.sharing-input-etab .multiselect__content-wrapper{min-height:150px}.sharing-input-etab .option__desc{display:flex;flex-direction:column;justify-content:center;min-width:0}.sharing-input-etab .option__desc .option__name,.sharing-input-etab .option__desc .option__uai{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sharing-input-etab .option__desc .option__name{color:var(--color-text-light)}.sharing-input-etab .option__desc .option__uai{font-size:smaller}.sharing-input-etab .multiselect__option--highlight:not(.multiselect__option--selected):before{visibility:hidden !important}.sharing-input-etab .multiselect__option--highlight:after{position:absolute;bottom:5px;right:5px;content:\\\"Selectionner\\\";opacity:.5}.sharing-input-etab .multiselect__option--highlight.multiselect__option--selected:after{content:\\\"Déselectionner\\\"}.sharing-input-etab .option__close,.sharing-input-etab .option__selectall{display:flex;flex-wrap:wrap;width:100%;font-weight:700;text-align:center;padding:8px;overflow:hidden;text-overflow:ellipsis;height:auto;min-height:1em;background-color:rgba(0,0,0,0)}.sharing-input-etab .option__close span,.sharing-input-etab .option__selectall span{flex:1;color:var(--color-text-lighter)}.sharing-input-etab .option__close span:hover,.sharing-input-etab .option__selectall span:hover{color:var(--color-text)}\",\"\\n.sharing-input-etab {\\n\\twidth: 100%;\\n\\tmargin: 10px 0;\\n\\t.multiselect__content-wrapper{\\n\\t\\tmin-height:150px;\\n\\t}\\n\\t.option__desc{\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\tjustify-content: center;\\n\\t\\tmin-width: 0;\\n\\t\\t.option__name, .option__uai{\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\twhite-space: nowrap;\\n\\t\\t\\ttext-overflow: ellipsis;\\n\\t\\t}\\n\\t\\t.option__name{\\n\\t\\t\\tcolor: var(--color-text-light);\\n\\t\\t}\\n\\t\\t.option__uai{\\n\\t\\t\\tfont-size:smaller;\\n\\t\\t}\\n\\n\\t}\\n\\t.multiselect__option--highlight{\\n\\t\\t&:not(.multiselect__option--selected){\\n\\t\\t\\t&:before{\\n\\t\\t\\t\\tvisibility:hidden !important;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t&:after{\\n\\t\\t\\tposition: absolute;\\n\\t\\t\\tbottom: 5px;\\n\\t\\t\\tright:5px;\\n\\t\\t\\tcontent: 'Selectionner';\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t\\t&.multiselect__option--selected{\\n\\t\\t\\t&:after{\\n\\t\\t\\t\\tcontent: 'Déselectionner';\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t.option__close, .option__selectall{\\n\\t\\tdisplay: flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\twidth: 100%;\\n\\t\\tfont-weight: 700;\\n\\t\\ttext-align: center;\\n\\t\\tpadding: 8px;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\theight: auto;\\n\\t\\tmin-height: 1em;\\n\\t\\tbackground-color: transparent;\\n\\t\\tspan{\\n\\t\\t\\tflex:1;\\n\\t\\t\\tcolor: var(--color-text-lighter);\\n\\t\\t\\t&:hover{\\n\\t\\t\\t\\tcolor: var(--color-text);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-input{width:100%;margin:10px 0}.sharing-input .multiselect__option span[lookup] .avatardiv{background-image:var(--icon-search-fff);background-repeat:no-repeat;background-position:center;background-color:var(--color-text-maxcontrast) !important}.sharing-input .multiselect__option span[lookup] .avatardiv div{display:none}.sharing-input .list_header{padding:5px;color:var(--color-text-lighter)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/components/SharingInputRecia.vue\"],\"names\":[],\"mappings\":\"AACA,eACC,UAAA,CACA,aAAA,CAKE,4DACC,uCAAA,CACA,2BAAA,CACA,0BAAA,CACA,yDAAA,CACA,gEACC,YAAA,CAMJ,4BACC,WAAA,CACA,+BAAA\",\"sourcesContent\":[\"\\n.sharing-input {\\n\\twidth: 100%;\\n\\tmargin: 10px 0;\\n\\n\\t// properly style the lookup entry\\n\\t.multiselect__option {\\n\\t\\tspan[lookup] {\\n\\t\\t\\t.avatardiv {\\n\\t\\t\\t\\tbackground-image: var(--icon-search-fff);\\n\\t\\t\\t\\tbackground-repeat: no-repeat;\\n\\t\\t\\t\\tbackground-position: center;\\n\\t\\t\\t\\tbackground-color: var(--color-text-maxcontrast) !important;\\n\\t\\t\\t\\tdiv {\\n\\t\\t\\t\\t\\tdisplay: none;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.list_header{\\n\\t\\tpadding: 5px;\\n\\t\\tcolor: var(--color-text-lighter);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharingTabDetailsView[data-v-2ac5f4da]{display:flex;flex-direction:column;width:100%;margin:0 auto;position:relative;height:100%;overflow:hidden}.sharingTabDetailsView__header[data-v-2ac5f4da]{display:flex;align-items:center;box-sizing:border-box;margin:.2em}.sharingTabDetailsView__header span[data-v-2ac5f4da]{display:flex;align-items:center}.sharingTabDetailsView__header span h1[data-v-2ac5f4da]{font-size:15px;padding-left:.3em}.sharingTabDetailsView__wrapper[data-v-2ac5f4da]{overflow:scroll;flex-shrink:1;padding:4px;padding-right:12px}.sharingTabDetailsView__quick-permissions[data-v-2ac5f4da]{display:flex;justify-content:center;width:100%;margin:0 auto;border-radius:0}.sharingTabDetailsView__quick-permissions div[data-v-2ac5f4da]{width:100%}.sharingTabDetailsView__quick-permissions div span[data-v-2ac5f4da]{width:100%}.sharingTabDetailsView__quick-permissions div span span[data-v-2ac5f4da]:nth-child(1){align-items:center;justify-content:center;color:var(--color-primary-element);padding:.1em}.sharingTabDetailsView__quick-permissions div span[data-v-2ac5f4da] label{display:flex;flex-wrap:wrap}.sharingTabDetailsView__quick-permissions div span[data-v-2ac5f4da] label span{display:flex}.sharingTabDetailsView__quick-permissions div span[data-v-2ac5f4da] label span:first-of-type{flex:10%}.sharingTabDetailsView__quick-permissions div span[data-v-2ac5f4da] label span:last-of-type{flex:90%}.sharingTabDetailsView__quick-permissions div span[data-v-2ac5f4da] label small{padding-left:10%;flex-basis:100% !important}.sharingTabDetailsView__advanced-control[data-v-2ac5f4da]{width:100%}.sharingTabDetailsView__advanced-control button[data-v-2ac5f4da]{margin-top:.5em}.sharingTabDetailsView__advanced[data-v-2ac5f4da]{width:100%;margin-bottom:.5em;text-align:left;padding-left:0}.sharingTabDetailsView__advanced section textarea[data-v-2ac5f4da],.sharingTabDetailsView__advanced section div.mx-datepicker[data-v-2ac5f4da]{width:100%}.sharingTabDetailsView__advanced section textarea[data-v-2ac5f4da]{height:80px;margin:0}.sharingTabDetailsView__advanced section span[data-v-2ac5f4da] label{background-color:initial !important;border:none !important}.sharingTabDetailsView__advanced section section.custom-permissions-group[data-v-2ac5f4da]{padding-left:1.5em}.sharingTabDetailsView__footer[data-v-2ac5f4da]{width:100%;display:flex;position:sticky;bottom:0;flex-direction:column;justify-content:space-between;align-items:flex-start;background:linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background))}.sharingTabDetailsView__footer>button[data-v-2ac5f4da]:first-child{color:#df0707;background-color:#f5f5f5}.sharingTabDetailsView__footer .button-group[data-v-2ac5f4da]{display:flex;justify-content:space-between;width:100%;margin-top:16px}.sharingTabDetailsView__footer .button-group button[data-v-2ac5f4da]{margin-left:16px}.sharingTabDetailsView__footer .button-group button[data-v-2ac5f4da]:first-child{margin-left:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/views/SharingDetailsTab.vue\"],\"names\":[],\"mappings\":\"AACA,wCACC,YAAA,CACA,qBAAA,CACA,UAAA,CACA,aAAA,CACA,iBAAA,CACA,WAAA,CACA,eAAA,CAEA,gDACC,YAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CAEA,qDACC,YAAA,CACA,kBAAA,CAEA,wDACC,cAAA,CACA,iBAAA,CAMH,iDACC,eAAA,CACA,aAAA,CACA,WAAA,CACA,kBAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,UAAA,CACA,aAAA,CACA,eAAA,CAEA,+DACC,UAAA,CAEA,oEACC,UAAA,CAEA,sFACC,kBAAA,CACA,sBAAA,CACA,kCAAA,CACA,YAAA,CAGD,0EACC,YAAA,CACA,cAAA,CAEA,+EACC,YAAA,CAEA,6FACC,QAAA,CAGD,4FACC,QAAA,CAIF,gFACC,gBAAA,CACA,0BAAA,CASL,0DACC,UAAA,CAEA,iEACC,eAAA,CAKF,kDACC,UAAA,CACA,kBAAA,CACA,eAAA,CACA,cAAA,CAIC,+IAEC,UAAA,CAGD,mEACC,WAAA,CACA,QAAA,CAaA,qEACC,mCAAA,CACA,sBAAA,CAIF,2FACC,kBAAA,CAKH,gDACC,UAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CACA,qBAAA,CACA,6BAAA,CACA,sBAAA,CACA,2FAAA,CAEA,mEACC,aAAA,CACA,wBAAA,CAGD,8DACC,YAAA,CACA,6BAAA,CACA,UAAA,CACA,eAAA,CAEA,qEACC,gBAAA,CAEA,iFACC,aAAA\",\"sourcesContent\":[\"\\n.sharingTabDetailsView {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\twidth: 100%;\\n\\tmargin: 0 auto;\\n\\tposition: relative;\\n\\theight: 100%;\\n\\toverflow: hidden;\\n\\n\\t&__header {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tbox-sizing: border-box;\\n\\t\\tmargin: 0.2em;\\n\\n\\t\\tspan {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\talign-items: center;\\n\\n\\t\\t\\th1 {\\n\\t\\t\\t\\tfont-size: 15px;\\n\\t\\t\\t\\tpadding-left: 0.3em;\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\t}\\n\\n\\t&__wrapper {\\n\\t\\toverflow: scroll;\\n\\t\\tflex-shrink: 1;\\n\\t\\tpadding: 4px;\\n\\t\\tpadding-right: 12px;\\n\\t}\\n\\n\\t&__quick-permissions {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\twidth: 100%;\\n\\t\\tmargin: 0 auto;\\n\\t\\tborder-radius: 0;\\n\\n\\t\\tdiv {\\n\\t\\t\\twidth: 100%;\\n\\n\\t\\t\\tspan {\\n\\t\\t\\t\\twidth: 100%;\\n\\n\\t\\t\\t\\tspan:nth-child(1) {\\n\\t\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\t\\tcolor: var(--color-primary-element);\\n\\t\\t\\t\\t\\tpadding: 0.1em;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t::v-deep label {\\n\\t\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\t\\tflex-wrap: wrap;\\n\\n\\t\\t\\t\\t\\tspan {\\n\\t\\t\\t\\t\\t\\tdisplay: flex;\\n\\n\\t\\t\\t\\t\\t\\t&:first-of-type {\\n\\t\\t\\t\\t\\t\\t\\tflex: 10%;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t&:last-of-type {\\n\\t\\t\\t\\t\\t\\t\\tflex: 90%\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tsmall {\\n\\t\\t\\t\\t\\t\\tpadding-left: 10%;\\n\\t\\t\\t\\t\\t\\tflex-basis: 100% !important;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\t}\\n\\n\\t&__advanced-control {\\n\\t\\twidth: 100%;\\n\\n\\t\\tbutton {\\n\\t\\t\\tmargin-top: 0.5em;\\n\\t\\t}\\n\\n\\t}\\n\\n\\t&__advanced {\\n\\t\\twidth: 100%;\\n\\t\\tmargin-bottom: 0.5em;\\n\\t\\ttext-align: left;\\n\\t\\tpadding-left: 0;\\n\\n\\t\\tsection {\\n\\n\\t\\t\\ttextarea,\\n\\t\\t\\tdiv.mx-datepicker {\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t}\\n\\n\\t\\t\\ttextarea {\\n\\t\\t\\t\\theight: 80px;\\n\\t\\t\\t\\tmargin: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t/*\\n              The following style is applied out of the component's scope\\n              to remove padding from the label.checkbox-radio-switch__label,\\n              which is used to group radio checkbox items. The use of ::v-deep\\n              ensures that the padding is modified without being affected by\\n              the component's scoping.\\n              Without this achieving left alignment for the checkboxes would not\\n              be possible.\\n            */\\n\\t\\t\\tspan {\\n\\t\\t\\t\\t::v-deep label {\\n\\t\\t\\t\\t\\tbackground-color: initial !important;\\n\\t\\t\\t\\t\\tborder: none !important;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\tsection.custom-permissions-group {\\n\\t\\t\\t\\tpadding-left: 1.5em;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&__footer {\\n\\t\\twidth: 100%;\\n\\t\\tdisplay: flex;\\n\\t\\tposition: sticky;\\n\\t\\tbottom: 0;\\n\\t\\tflex-direction: column;\\n\\t\\tjustify-content: space-between;\\n\\t\\talign-items: flex-start;\\n\\t\\tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));\\n\\n\\t\\t>button:first-child {\\n\\t\\t\\tcolor: rgb(223, 7, 7);\\n\\t\\t\\tbackground-color: #f5f5f5;\\n\\t\\t}\\n\\n\\t\\t.button-group {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\tjustify-content: space-between;\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\tmargin-top: 16px;\\n\\n\\t\\t\\tbutton {\\n\\t\\t\\t\\tmargin-left: 16px;\\n\\n\\t\\t\\t\\t&:first-child {\\n\\t\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sharing-entry__inherited .avatar-shared[data-v-05b67dc8]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/views/SharingInherited.vue\"],\"names\":[],\"mappings\":\"AAEC,0DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA\",\"sourcesContent\":[\"\\n.sharing-entry__inherited {\\n\\t.avatar-shared {\\n\\t\\twidth: 32px;\\n\\t\\theight: 32px;\\n\\t\\tline-height: 32px;\\n\\t\\tfont-size: 18px;\\n\\t\\tbackground-color: var(--color-text-maxcontrast);\\n\\t\\tborder-radius: 50%;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".emptyContentWithSections[data-v-e66c1fca]{margin:1rem auto}.sharingTab[data-v-e66c1fca]{position:relative;height:100%}.sharingTab__content[data-v-e66c1fca]{padding:0 6px}.sharingTab__additionalContent[data-v-e66c1fca]{margin:44px 0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/views/SharingTab.vue\"],\"names\":[],\"mappings\":\"AACA,2CACC,gBAAA,CAGD,6BACC,iBAAA,CACA,WAAA,CAEA,sCACC,aAAA,CAGD,gDACC,aAAA\",\"sourcesContent\":[\"\\n.emptyContentWithSections {\\n\\tmargin: 1rem auto;\\n}\\n\\n.sharingTab {\\n\\tposition: relative;\\n\\theight: 100%;\\n\\n\\t&__content {\\n\\t\\tpadding: 0 6px;\\n\\t}\\n\\n\\t&__additionalContent {\\n\\t\\tmargin: 44px 0;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + \"00434e4baa0d8e7b79f1\" + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 7870;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t7870: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7874], () => (__webpack_require__(62843)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","Config","constructor","this","_capabilities","getCapabilities","defaultPermissions","_this$_capabilities$f","files_sharing","default_permissions","isPublicUploadEnabled","_this$_capabilities$f2","public","upload","isShareWithLinkAllowed","document","getElementById","value","federatedShareDocLink","OC","appConfig","core","federatedCloudShareDoc","defaultExpirationDate","isDefaultExpireDateEnabled","Date","setDate","getDate","defaultExpireDate","defaultInternalExpirationDate","isDefaultInternalExpireDateEnabled","defaultInternalExpireDate","defaultRemoteExpirationDateString","isDefaultRemoteExpireDateEnabled","defaultRemoteExpireDate","enforcePasswordForPublicLink","enableLinkPasswordByDefault","isDefaultExpireDateEnforced","defaultExpireDateEnforced","defaultExpireDateEnabled","isDefaultInternalExpireDateEnforced","defaultInternalExpireDateEnforced","isDefaultRemoteExpireDateEnforced","defaultRemoteExpireDateEnforced","defaultInternalExpireDateEnabled","defaultRemoteExpireDateEnabled","isRemoteShareAllowed","remoteShareAllowed","isMailShareAllowed","_this$_capabilities","_this$_capabilities$f3","_this$_capabilities2","_this$_capabilities2$","_this$_capabilities2$2","undefined","sharebymail","enabled","isResharingAllowed","resharingAllowed","isPasswordForMailSharesRequired","password","enforced","shouldAlwaysShowUnique","_this$_capabilities$f4","_this$_capabilities$f5","sharee","always_show_unique","allowGroupSharing","maxAutocompleteResults","parseInt","config","minSearchStringLength","passwordPolicy","password_policy","Share","ocsData","_ocsData$attributes","ocs","data","hide_download","mail_send","attributes","JSON","parse","e","console","warn","_share","state","id","type","share_type","permissions","owner","uid_owner","ownerDisplayName","displayname_owner","shareWith","share_with","shareWithDisplayName","share_with_displayname","shareWithDisplayNameUnique","share_with_displayname_unique","shareWithLink","share_with_link","shareWithAvatar","share_with_avatar","uidFileOwner","uid_file_owner","displaynameFileOwner","displayname_file_owner","createdTime","stime","expireDate","expiration","date","token","note","label","_this$_share$label","mailSend","hideDownload","passwordExpirationTime","password_expiration_time","sendPasswordByTalk","send_password_by_talk","path","itemType","item_type","mimetype","fileSource","file_source","fileTarget","file_target","fileParent","file_parent","hasReadPermission","PERMISSION_READ","hasCreatePermission","PERMISSION_CREATE","hasDeletePermission","PERMISSION_DELETE","hasUpdatePermission","PERMISSION_UPDATE","hasSharePermission","PERMISSION_SHARE","hasDownloadPermission","i","attr","scope","key","setAttribute","attrUpdate","splice","push","canEdit","can_edit","canDelete","can_delete","viaFileid","via_fileid","viaPath","via_path","parent","storageId","storage_id","storage","itemSource","item_source","status","SHARE_TYPES","ShareTypes","name","components","NcActions","props","title","String","default","required","subtitle","isUnique","Boolean","ariaExpanded","computed","ariaExpandedValue","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","_vm","_c","_self","staticClass","_t","_v","_s","_e","$slots","ref","attrs","NcActionLink","SharingEntrySimple","fileInfo","Object","copied","copySuccess","internalLink","window","location","protocol","host","generateUrl","copyLinkTooltip","t","internalLinkSubtitle","methods","navigator","clipboard","writeText","showSuccess","$refs","shareEntrySimple","actionsComponent","$el","focus","error","setTimeout","scopedSlots","_u","fn","proxy","on","$event","preventDefault","copyLink","apply","arguments","isOpen","multiselect","VueMultiselect","toggle","resetScroll","querySelector","scrollTop","getSearch","search","resetSearch","select","option","async","api","generate","request","axios","info","showError","array","Uint8Array","self","crypto","getRandomValues","length","charAt","passwordSet","shareUrl","generateOcsUrl","_ref","shareType","publicUpload","_request$data","share","emit","_error$response","_error$response$data","_error$response$data$","_error$response$data$2","errorMessage","response","meta","message","Notification","showTemporary","_request$data2","concat","_error$response2","_error$response2$data","_error$response2$data2","_error$response2$data3","properties","_request$data3","_error$response3","_error$response3$data","_error$response3$data2","_error$response3$data3","Error","CancelToken","searchCancelSource","NcMultiselect","mixins","ShareRequests","MultiselectMixin","shares","Array","linkShares","reshare","canReshare","searchType","validator","includes","searchEtabs","loading","query","recommendations","ShareSearch","OCA","Sharing","suggestions","externalResults","results","inputPlaceholder","allowRemoteSharing","isValidQuery","trim","noResultText","watch","val","oldval","reset","asyncFind","mounted","getRecommendations","filter","debounceGetReciaSuggestions","debounceGetSuggestions","lookup","query_lookup_default","SHARE_TYPE_USER","SHARE_TYPE_GROUP","SHARE_TYPE_REMOTE","SHARE_TYPE_REMOTE_GROUP","SHARE_TYPE_CIRCLE","SHARE_TYPE_ROOM","SHARE_TYPE_GUEST","SHARE_TYPE_DECK","SHARE_TYPE_SCIENCEMESH","SHARE_TYPE_EMAIL","cancel","source","cancelToken","params","format","perPage","debug","exact","rawExactSuggestions","values","reduce","arr","elem","rawSuggestions","exactSuggestions","filterOutExistingShares","map","formatForMultiselect","sort","a","b","result","condition","allSuggestions","nameCounts","displayName","item","desc","debounce","getSuggestions","etabs","getReciaSuggestions","rawRecommendations","getCurrentUser","uid","indexOf","sharesObj","obj","shareTypeToIcon","icon","iconTitle","_result$shareWithDisp","server","_result$shareWithDesc","shareWithDescription","user","uuid","isNoUser","$nextTick","handler","$emit","_this$$refs$multisele","_this$$refs$multisele2","_this$$refs$multisele3","GeneratePassword","replace","createShare","sharePermissions","stringify","shareAttributes","newPassword","Promise","resolve","open","input","addShare","slot","selected","closeBtnTitle","selectallBtnTitle","getEtabs","etab","change","isChanging","saveQuery","searchQuery","highlight","text","RegExp","match","searchLabel","_etab$uai","uai","showLabel","selectAll","deselectAll","sirenList","siren","etab1","etab2","localeCompare","domProps","model","callback","$$v","expression","directives","rawName","_q","ATOMIC_PERMISSIONS","NONE","READ","UPDATE","CREATE","DELETE","SHARE","BUNDLED_PERMISSIONS","READ_ONLY","UPLOAD_AND_UPDATE","FILE_DROP","ALL","ALL_FILE","SharesRequests","_this$share","errors","saving","updateQueue","PQueue","concurrency","reactiveState","hasNote","get","set","dateTomorrow","lang","weekdaysShort","dayNamesShort","monthsShort","monthNamesShort","formatLocale","firstDayOfWeek","firstDay","weekdaysMin","monthFormat","isFolder","isPublicShare","_this$share$shareType","SHARE_TYPE_LINK","isRemoteShare","isShareOwner","isExpiryDateEnforced","hasCustomPermissions","maxExpirationDateEnforced","checkShare","expirationDate","isValid","parseDateString","_date$match","pop","formatDateToString","UTC","getFullYear","getMonth","toISOString","split","onExpirationChange","onExpirationDisable","onNoteChange","$set","onNoteSubmit","newNote","$delete","queueUpdate","deleteShare","_len","propertyNames","_key","forEach","toString","add","updatedShare","updateShare","propertyName","onSyncError","property","propertyEl","focusable","debounceQueueUpdate","NcActionButton","NcActionText","NcAvatar","SharesMixin","viaFileTargetUrl","fileid","viaFolderName","basename","initiator","folder","onDelete","SharingEntryInherited","loaded","showInheritedShares","showInheritedSharesIcon","mainTitle","subTitle","toggleTooltip","fullPath","resetState","toggleInheritedShares","fetchInheritedShares","url","removeShare","index","findIndex","stopPropagation","_l","shareRequestObject","mapShareRequestToShareObject","shareDetails","openShareDetailsForCustomSettings","setCustomPermissions","openSharingDetails","_shareRequestObject$p","is_no_user","DropdownIcon","ShareDetails","selectedOption","showDropdown","focusTrap","canViewText","canEditText","fileDropText","customPermissionsText","preSelectedOption","supportsFileDrop","_this$share$type","dropDownPermissionValue","dropdownId","Math","random","substr","toggleValue","initializeComponent","addEventListener","handleClickOutside","beforeDestroy","removeEventListener","toggleDropdown","useFocusTrap","clearFocusTrap","closeDropdown","selectOption","event","dropdownContainer","quickShareDropdownContainer","contains","target","assign","_nc_focus_trap","dropdownElement","quickShareDropdown","createFocusTrap","allowOutsideClick","trapStack","activate","_this$focusTrap","deactivate","shiftFocusForward","nextElement","activeElement","nextElementSibling","firstElementChild","shiftFocusBackward","previousElement","previousElementSibling","lastElementChild","handleArrowUp","handleArrowDown","class","_k","keyCode","action","is","_g","_b","tag","handlers","ExternalShareAction","NcActionInput","NcActionSeparator","Tune","QuickShareSelect","Number","shareCreationComplete","pending","ExternalLegacyLinkActions","ExternalLinkActions","ExternalShareActions","logger","getLoggerBuilder","setApp","detectUser","build","isEmailShareType","isPasswordProtected","Vue","expirationTime","moment","diff","fromNow","isTalkEnabled","appswebroots","spreed","isPasswordProtectedByTalkAvailable","isPasswordProtectedByTalk","canTogglePasswordProtectedByTalkAvailable","hasUnsavedPassword","pendingPassword","pendingEnforcedPassword","pendingExpirationDate","sharePolicyHasRequiredProperties","requiredPropertiesMissing","isPasswordMissing","isExpireDateMissing","shareLink","actionsTooltip","externalLegacyLinkActions","actions","externalLinkActions","isPasswordPolicyEnabled","canChangeHideDownload","some","shareAttribute","shareDefaults","component","pushNewLinkShare","update","newShare","_data$response","_data$response$data","_data$response$data$o","_data$response$data$o2","copyButton","onPasswordChange","onPasswordDisable","onPasswordSubmit","onPasswordProtectedByTalkChange","onMenuClose","onCancel","toggleQuickShareSelect","SharingEntryLink","minLength","onNewLinkShare","canLinkShare","hasLinkShares","hasShares","unshift","awaitForShare","$children","find","NcButton","DotsHorizontalIcon","NcSelect","tooltip","hasStatus","isArray","SharingEntry","NcInputField","NcDatetimePicker","NcDateTimePickerNative","NcCheckboxRadioSwitch","CloseIcon","CircleIcon","EditIcon","LinkIcon","GroupIcon","ShareIcon","UserIcon","UploadIcon","ViewIcon","MenuDownIcon","shareRequestValue","writeNoteToRecipientIsChecked","sharingPermission","revertSharingPermission","passwordError","advancedSectionAccordionExpanded","bundledPermissions","isFirstComponentLoad","test","checked","updateAtomicPermissions","isEditChecked","canCreate","isCreateChecked","isDeleteChecked","isReshareChecked","canDownload","_this$share$attribute","downloadAttr","hasRead","isReadChecked","hasExpirationDate","isValidShareAttribute","defaultExpiryDate","isSetDownloadButtonVisible","isPasswordEnforced","isGroupShare","isUserShare","isNewShare","allowsFileDrop","hasFileDropPermissions","shareButtonText","canSetEdit","canSetCreate","canSetDelete","canSetReshare","canSetDownload","customPermissionsList","translatedPermissions","permission","hasPermissions","initialPermissionSet","permissionsToCheck","toLocaleLowerCase","getLanguage","join","advancedControlExpandedValue","isChecked","beforeMount","initializePermissions","initializeAttributes","_this$$refs$quickPerm","_this$$refs$quickPerm2","quickPermissions","expandCustomPermissions","toggleCustomPermissions","selectedPermission","isCustomPermissions","toDateString","handleShareType","handleDefaultPermissions","handleCustomPermissions","permissionsAndAttributes","sharePermissionsSet","incomingShare","getShareTypeIcon","EmailIcon","_vm$share$expireDate","saveShare","CollectionList","SharingEntryInternal","SharingInherited","SharingInputRecia","SharingInputEtab","SharingInputChoice","SharingLinkList","SharingList","SharingDetailsTab","deleteEvent","expirationInterval","sharedWithMe","selectedEtabs","sections","ShareTabSections","getSections","projectsEnabled","loadState","showSharingDetailsView","shareDetailsData","isSharedWithMe","keys","getShares","fetchShares","reshares","fetchSharedWithMe","shared_with_me","all","processSharedWithMe","processShares","clearInterval","updateExpirationSubtitle","unix","relativetime","Util","relativeModifiedDate","_ref2","group","escape","circle","conversation","shareWithTitle","setInterval","shareOwnerId","currentUser","shareOwner","shareList","listComponent","linkShareList","toggleShareDetailsView","eventData","updateSearchType","updateSelectedEtabs","emptyContentWithSections","section","refInFor","_state","addNewResult","registerAction","every","check","_sections","registerSection","n","View","SharingTab","TabInstance","Files","Sidebar","registerTab","Tab","iconSvg","ShareVariant","el","context","$destroy","$mount","destroy","___CSS_LOADER_EXPORT___","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","call","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","r","getter","__esModule","d","definition","o","defineProperty","enumerable","f","chunkId","promises","u","g","globalThis","Function","prop","prototype","hasOwnProperty","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","src","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","nmd","paths","children","scriptUrl","importScripts","currentScript","p","baseURI","href","installedChunks","installedChunkData","promise","reject","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}