{"version":3,"file":"calendar-src_models_rfcProps_js-src_services_timezoneDataProviderService_js-src_services_timezoneDetec-33af66.js?v=02c5393d39f3a890b5b7","mappings":"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","sources":["webpack:///calendar/src/defaults/defaultCategories.js","webpack:///calendar/src/models/rfcProps.js","webpack:///calendar/src/services/timezoneDataProviderService.js","webpack:///calendar/src/services/timezoneDetectionService.js","webpack:///calendar/src/utils/calendarObject.js","webpack:///calendar/src/utils/closestColor.js","webpack:///calendar/src/utils/color.js","webpack:///calendar/src/utils/logger.js","webpack:///calendar/src/utils/uidToColor.js"],"sourcesContent":["/**\n * Calendar App\n *\n * @copyright 2019 Georg Ehrke <oc.list@georgehrke.com>\n *\n * @author Georg Ehrke\n *\n * @author Richard Steinmetz <richard@steinmetz.cloud>\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU AFFERO GENERAL PUBLIC LICENSE for more details.\n *\n * You should have received a copy of the GNU Affero General Public\n * License along with this library.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { translate as t } from '@nextcloud/l10n'\n\n/**\n *\n */\nexport function getDefaultCategories() {\n\t// This list was taken from https://tools.ietf.org/html/rfc5545#section-5\n\tconst values = [\n\t\tt('calendar', 'Anniversary'),\n\t\tt('calendar', 'Appointment'),\n\t\tt('calendar', 'Business'),\n\t\tt('calendar', 'Education'),\n\t\tt('calendar', 'Holiday'),\n\t\tt('calendar', 'Meeting'),\n\t\tt('calendar', 'Miscellaneous'),\n\t\tt('calendar', 'Non-working hours'),\n\t\tt('calendar', 'Not in office'),\n\t\tt('calendar', 'Personal'),\n\t\tt('calendar', 'Phone call'),\n\t\tt('calendar', 'Sick day'),\n\t\tt('calendar', 'Special occasion'),\n\t\tt('calendar', 'Travel'),\n\t\tt('calendar', 'Vacation'),\n\t]\n\treturn values.map(value => ({ value, label: value }))\n}\n\nexport default getDefaultCategories\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { translate as t } from '@nextcloud/l10n'\nimport { getDefaultCategories } from '../defaults/defaultCategories.js'\n\n/**\n * Gets all supported RFC properties\n *\n * @return {{color: {readableName: *, icon: string, multiple: boolean, info: *}, timeTransparency: {readableName: *, defaultValue: string, icon: string, multiple: boolean, options: *[], info: *}, description: {readableName: *, icon: string, placeholder: *, defaultNumberOfRows: number}, location: {readableName: *, icon: string, placeholder: *}, categories: {readableName: *, icon: string, multiple: boolean, options: *, tagPlaceholder: *, placeholder: *, info: *}, accessClass: {readableName: *, defaultValue: string, icon: string, options: *[], multiple: boolean, info: *}, status: {readableName: *, defaultValue: string, icon: string, options: *[], multiple: boolean, info: *}}}\n */\nconst getRFCProperties = () => {\n\treturn {\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.3\n\t\t */\n\t\taccessClass: {\n\t\t\treadableName: t('calendar', 'When shared show'),\n\t\t\ticon: 'Eye',\n\t\t\toptions: [\n\t\t\t\t{ value: 'PUBLIC', label: t('calendar', 'When shared show full event') },\n\t\t\t\t{ value: 'CONFIDENTIAL', label: t('calendar', 'When shared show only busy') },\n\t\t\t\t{ value: 'PRIVATE', label: t('calendar', 'When shared hide this event') },\n\t\t\t],\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'The visibility of this event in shared calendars.'),\n\t\t\tdefaultValue: 'PUBLIC',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.7\n\t\t */\n\t\tlocation: {\n\t\t\treadableName: t('calendar', 'Location'),\n\t\t\tplaceholder: t('calendar', 'Add a location'),\n\t\t\ticon: 'MapMarker',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.5\n\t\t */\n\t\tdescription: {\n\t\t\treadableName: t('calendar', 'Description'),\n\t\t\tplaceholder: t('calendar', 'Add a description'),\n\t\t\ticon: 'TextBoxOutline',\n\t\t\tdefaultNumberOfRows: 2,\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.11\n\t\t */\n\t\tstatus: {\n\t\t\treadableName: t('calendar', 'Status'),\n\t\t\ticon: 'Check',\n\t\t\toptions: [\n\t\t\t\t{ value: 'CONFIRMED', label: t('calendar', 'Confirmed') },\n\t\t\t\t{ value: 'TENTATIVE', label: t('calendar', 'Tentative') },\n\t\t\t\t{ value: 'CANCELLED', label: t('calendar', 'Canceled') },\n\t\t\t],\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'Confirmation about the overall status of the event.'),\n\t\t\tdefaultValue: 'CONFIRMED',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.2.7\n\t\t */\n\t\ttimeTransparency: {\n\t\t\treadableName: t('calendar', 'Show as'),\n\t\t\ticon: 'Briefcase',\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'Take this event into account when calculating free-busy information.'),\n\t\t\toptions: [\n\t\t\t\t{ value: 'TRANSPARENT', label: t('calendar', 'Free') },\n\t\t\t\t{ value: 'OPAQUE', label: t('calendar', 'Busy') },\n\t\t\t],\n\t\t\tdefaultValue: 'TRANSPARENT',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.2\n\t\t */\n\t\tcategories: {\n\t\t\treadableName: t('calendar', 'Categories'),\n\t\t\ticon: 'Tag',\n\t\t\tmultiple: true,\n\t\t\tinfo: t('calendar', 'Categories help you to structure and organize your events.'),\n\t\t\tplaceholder: t('calendar', 'Search or add categories'),\n\t\t\ttagPlaceholder: t('calendar', 'Add this as a new category'),\n\t\t\toptions: getDefaultCategories(),\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc7986#section-5.9\n\t\t */\n\t\tcolor: {\n\t\t\treadableName: t('calendar', 'Custom color'),\n\t\t\ticon: 'EyedropperVariant',\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'Special color of this event. Overrides the calendar-color.'),\n\t\t},\n\t}\n}\n\nexport {\n\tgetRFCProperties,\n}\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { getTimezoneManager } from '@nextcloud/calendar-js'\n\nconst timezoneManager = getTimezoneManager()\nlet initialized = false\n\n/**\n * Gets the timezone-manager\n * initializes it if necessary\n *\n * @return {TimezoneManager}\n */\nexport default function() {\n\tif (!initialized) {\n\t\ttimezoneManager.registerDefaultTimezones()\n\n\t\tinitialized = true\n\t}\n\n\treturn timezoneManager\n}\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport jstz from 'jstz'\n\n/**\n * Returns the current timezone of the user\n *\n * @return {string} Current timezone of user\n */\nconst detectTimezone = () => {\n\tconst determinedTimezone = jstz.determine()\n\tif (!determinedTimezone) {\n\t\treturn 'UTC'\n\t}\n\n\tconst timezoneName = determinedTimezone.name()\n\tif (!timezoneName) {\n\t\treturn 'UTC'\n\t}\n\n\treturn timezoneName\n}\n\nexport default detectTimezone\nexport {\n\tdetectTimezone,\n}\n","/**\n * @copyright Copyright (c) 2020 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { DateTimeValue } from '@nextcloud/calendar-js'\n\n/**\n * Get all recurrence-items in given range\n *\n * @param {object} calendarObject Calendar-object model\n * @param {Date} start Begin of time-range\n * @param {Date} end End of time-range\n * @return {Array}\n */\nconst getAllObjectsInTimeRange = (calendarObject, start, end) => {\n\tconst iterator = calendarObject.calendarComponent.getVObjectIterator()\n\tconst firstVObject = iterator.next().value\n\tif (!firstVObject) {\n\t\treturn []\n\t}\n\n\tconst s = DateTimeValue.fromJSDate(start, true)\n\tconst e = DateTimeValue.fromJSDate(end, true)\n\treturn firstVObject.recurrenceManager.getAllOccurrencesBetween(s, e)\n}\n\n/**\n * Get recurrence-item at exactly a given recurrence-Id\n *\n * @param {object} calendarObject Calendar-object model\n * @param {Date} recurrenceId RecurrenceId to retrieve\n * @return {AbstractRecurringComponent|null}\n */\nconst getObjectAtRecurrenceId = (calendarObject, recurrenceId) => {\n\tconst iterator = calendarObject.calendarComponent.getVObjectIterator()\n\tconst firstVObject = iterator.next().value\n\tif (!firstVObject) {\n\t\treturn null\n\t}\n\n\tconst d = DateTimeValue.fromJSDate(recurrenceId, true)\n\treturn firstVObject.recurrenceManager.getOccurrenceAtExactly(d)\n}\n\nexport {\n\tgetAllObjectsInTimeRange,\n\tgetObjectAtRecurrenceId,\n}\n","/**\n * @copyright Copyright (c) 2023 Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @author Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n// Code was taken from:\n//   - https://github.com/juliuste/closest-css-color\n//   - https://github.com/gausie/colour-proximity\n//   - https://github.com/gausie/colour-proximity/pull/3\n\nimport cssColors from 'css-color-names'\nimport sortBy from 'lodash/sortBy.js'\nimport pick from 'lodash/pick.js'\nimport uniqBy from 'lodash/uniqBy.js'\nimport { get } from 'color-string'\n\nconst uniqColorKeys = uniqBy(Object.keys(cssColors), c => cssColors[c])\nconst filteredColors = pick(cssColors, uniqColorKeys)\n\nconst colors = sortBy(\n\tObject.keys(filteredColors).map(name => ({\n\t\tname,\n\t\thex: filteredColors[name],\n\t})),\n\tc => c.hex,\n)\n\nconst defaults = {\n\tdetailed: false,\n}\n\n/**\n * Find the closest CSS color to a given hex color.\n *\n * Adapted from https://github.com/juliuste/closest-css-color\n *\n * Copyright (c) 2021, Julius Tens\n *\n * Permission to use, copy, modify, and/or distribute this software for any purpose with or without\n * fee is hereby granted, provided that the above copyright notice and this permission notice\n * appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS\n * SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE\n * AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,\n * NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE\n * OF THIS SOFTWARE.\n *\n * @param {string} hex Hex color string\n * @param {object} opt Options\n * @param {boolean=} opt.detailed Return color object instead of just the name\n * @return {string|{name: string, hex: string}} Closest color name or object\n */\nexport default function closestColor(hex, opt = {}) {\n\tconst options = { ...defaults, ...opt }\n\tconst sortedColors = sortBy(colors, c => proximity(hex, c.hex))\n\tif (options.detailed) {\n\t\treturn sortedColors[0]\n\t}\n\treturn sortedColors[0].name\n}\n\n/**\n * Calculate the proximity between two colors.\n *\n * Adapted from https://github.com/gausie/colour-proximity\n *\n * Copyright (c) 2013, Samuel Gaus\n *\n * @param {string} s1 Hex color string 1\n * @param {string} s2 Hex color string 2\n * @return {number}\n */\nfunction proximity(s1, s2) {\n\tconst c1 = rgb2lab(get.rgb(s1))\n\tconst c2 = rgb2lab(get.rgb(s2))\n\treturn Math.sqrt(\n\t\tMath.pow(c1[0] - c2[0], 2)\n\t\t+ Math.pow(c1[1] - c2[1], 2)\n\t\t+ Math.pow(c1[2] - c2[2], 2),\n\t)\n}\n\n/**\n * Adapted from https://github.com/gausie/colour-proximity\n *\n * Copyright (c) 2013, Samuel Gaus\n *\n * @param {number[]} input RGB array\n */\nfunction rgb2lab(input) {\n\t// This code is adapted from various functions at http://www.easyrgb.com/index.php?X=MATH\n\n\tconst rgb = [0, 0, 0]\n\tconst xyz = [0, 0, 0]\n\tconst Lab = [0, 0, 0]\n\n\tfor (let i = 0; i < input.length; i++) {\n\t\tlet value = input[i] / 255\n\n\t\tif (value > 0.04045) {\n\t\t\tvalue = Math.pow(((value + 0.055) / 1.055), 2.4)\n\t\t} else {\n\t\t\tvalue = value / 12.92\n\t\t}\n\n\t\trgb[i] = value * 100\n\t}\n\n\txyz[0] = (rgb[0] * 0.4124 + rgb[1] * 0.3576 + rgb[2] * 0.1805) / 95.047 // ref_X =  95.047   Observer= 2°, Illuminant= D65\n\txyz[1] = (rgb[0] * 0.2126 + rgb[1] * 0.7152 + rgb[2] * 0.0722) / 100.0 // ref_Y = 100.000\n\txyz[2] = (rgb[0] * 0.0193 + rgb[1] * 0.1192 + rgb[2] * 0.9505) / 108.883 // ref_Z = 108.883\n\n\tfor (let i = 0; i < 3; i++) {\n\t\tlet value = xyz[i]\n\t\tif (value > 0.008856) {\n\t\t\tvalue = Math.pow(value, 1 / 3)\n\t\t} else {\n\t\t\tvalue = (7.787 * value) + (16 / 116)\n\t\t}\n\t\txyz[i] = value\n\t}\n\n\tLab[0] = parseFloat(((116 * xyz[1]) - 16).toFixed(3))\n\tLab[1] = parseFloat((500 * (xyz[0] - xyz[1])).toFixed(3))\n\tLab[2] = parseFloat((200 * (xyz[1] - xyz[2])).toFixed(3))\n\n\treturn Lab\n}\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport convert from 'color-convert'\nimport { uidToColor } from './uidToColor.js'\nimport css3Colors from 'css-color-names'\nimport closestColor from './closestColor.js'\n\n/**\n * Detect if a color is light or dark\n *\n * @param {object} data The destructuring object\n * @param {number} data.red Red part of the RGB\n * @param {number} data.green Green part of the RGB\n * @param {number} data.blue Blue part of the RGB\n * @return {boolean} true if color is light, false if color is dark\n */\nexport function isLight({ red, green, blue }) {\n\tconst brightness = (((red * 299) + (green * 587) + (blue * 114)) / 1000)\n\treturn (brightness > 130)\n}\n\n/**\n * Get a text-color that's readable on a given background color\n *\n * @param {string} hexColor The hex color to get a text color for\n * @return {string} the matching text color\n */\nexport function generateTextColorForHex(hexColor) {\n\treturn generateTextColorForRGB(hexToRGB(hexColor))\n}\n\n/**\n * Get a text-color that's readable on a given background color\n *\n * @param {object} data The destructuring object\n * @param {number} data.red Red part of the RGB\n * @param {number} data.green Green part of the RGB\n * @param {number} data.blue Blue part of the RGB\n * @return {string}\n */\nexport function generateTextColorForRGB({ red, green, blue }) {\n\treturn isLight({ red, green, blue }) ? '#000000' : '#FAFAFA'\n}\n\n/**\n * Convert hex string to RGB\n *\n * @param {string} hexColor The hex color to convert\n * @return {string} the RGB result\n */\nexport function hexToRGB(hexColor) {\n\tif (hexColor == null) {\n\t\treturn { red: 0, green: 0, blue: 0 }\n\t}\n\tconst [red, green, blue] = convert.hex.rgb(hexColor.slice(1))\n\treturn { red, green, blue }\n}\n\n/**\n * Generates a hex color based on RGB string\n *\n * @param {string} uid The string to generate a color from\n * @return {string} The hex color\n */\nexport function uidToHexColor(uid) {\n\tconst color = uidToColor(uid)\n\treturn '#' + convert.rgb.hex(color.r, color.g, color.b)\n}\n\n/**\n * Detects a color from a given string\n *\n * @param {string} color The color to get the real RGB hex string from\n * @return {string|boolean|*} String if color detected, boolean if not\n */\nexport function detectColor(color) {\n\tif (/^(#)((?:[A-Fa-f0-9]{3}){1,2})$/.test(color)) { // #ff00ff and #f0f\n\t\treturn color\n\t} else if (/^((?:[A-Fa-f0-9]{3}){1,2})$/.test(color)) { // ff00ff and f0f\n\t\treturn '#' + color\n\t} else if (/^(#)((?:[A-Fa-f0-9]{8}))$/.test(color)) { // #ff00ffff and #f0ff\n\t\treturn color.slice(0, 7)\n\t} else if (/^((?:[A-Fa-f0-9]{8}))$/.test(color)) { // ff00ffff and f0ff\n\t\treturn '#' + color.slice(0, 6)\n\t}\n\n\treturn false\n\n}\n\n/**\n * Gets the HEX code for a css3 color name\n *\n * @param {string} colorName The name of the css3 color\n * @return {string | null} string of HEX if valid color, null if not\n */\nexport function getHexForColorName(colorName) {\n\treturn css3Colors[colorName] || null\n}\n\n/**\n * Gets the closest css3 color name for a given HEX code\n *\n * @param {string} hex The HEX code to get a css3 color name for\n * @return {string}\n */\nexport function getClosestCSS3ColorNameForHex(hex) {\n\treturn closestColor(hex)\n}\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nconst logger = getLoggerBuilder()\n\t.setApp('calendar')\n\t.detectUser()\n\t.build()\n\n/**\n * Logs a debug message\n *\n * @param {string} message The message to log\n * @param {object=} context Additional context if needed\n */\nconst logDebug = (message, context = {}) => {\n\tlogger.debug(message, context)\n}\n\n/**\n * Logs an error message\n *\n * @param {string} message The message to log\n * @param {object=} context Additional context if needed\n */\nconst logError = (message, context = {}) => {\n\tlogger.error(message, context)\n}\n\n/**\n * Logs a fatal message\n *\n * @param {string} message The message to log\n * @param {object=} context Additional context if needed\n */\nconst logFatal = (message, context = {}) => {\n\tlogger.fatal(message, context)\n}\n\n/**\n * Logs an info message\n *\n * @param {string} message The message to log\n * @param {object=} context Additional context if needed\n */\nconst logInfo = (message, context = {}) => {\n\tlogger.info(message, context)\n}\n\n/**\n * Logs a warn message\n *\n * @param {string} message The message to log\n * @param {object=} context Additional context if needed\n */\nconst logWarn = (message, context = {}) => {\n\tlogger.warn(message, context)\n}\n\nexport default logger\nexport {\n\tlogDebug,\n\tlogError,\n\tlogFatal,\n\tlogInfo,\n\tlogWarn,\n}\n","/**\n * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport md5 from 'md5'\n\n/**\n * This is copied from nextcloud-vue for now, until it is exposed upstream.\n */\n\nexport const uidToColor = (uid) => {\n\t// Normalize hash\n\tlet hash = uid.toLowerCase()\n\n\t// Already a md5 hash?\n\tif (hash.match(/^([0-9a-f]{4}-?){8}$/) === null) {\n\t\thash = md5(hash)\n\t}\n\n\thash = hash.replace(/[^0-9a-f]/g, '')\n\n\tconst steps = 6\n\tconst finalPalette = GenColors(steps)\n\n\t/**\n\t * Convert a string to an integer evenly\n\t *\n\t * @param {string} hash The string to convert\n\t * @param {number} maximum The maximum value\n\t * @return {number} The integer calculated\n\t */\n\tfunction hashToInt(hash, maximum) {\n\t\tlet finalInt = 0\n\t\tconst result = []\n\n\t\t// Splitting evenly the string\n\t\tfor (let i = 0; i < hash.length; i++) {\n\t\t\t// chars in md5 goes up to f, hex:16\n\t\t\tresult.push(parseInt(hash.charAt(i), 16) % 16)\n\t\t}\n\n\t\t// Adds up all results\n\t\tfor (const j in result) {\n\t\t\tfinalInt += result[j]\n\t\t}\n\n\t\t// chars in md5 goes up to f, hex:16\n\t\t// make sure we're always using int in our operation\n\t\treturn parseInt(parseInt(finalInt, 10) % maximum, 10)\n\t}\n\treturn finalPalette[hashToInt(hash, steps * 3)]\n}\n\n/**\n * Color object\n *\n * @param {number} r The red value\n * @param {number} g The green value\n * @param {number} b The blue value\n */\nfunction Color(r, g, b) {\n\tthis.r = r\n\tthis.g = g\n\tthis.b = b\n}\n\n/**\n * Calculate the number of steps\n *\n * @param {number} steps The number of steps\n * @param {Array} ends The ends\n * @return {Array} Array containing the number of steps per color\n */\nfunction stepCalc(steps, ends) {\n\tconst step = new Array(3)\n\tstep[0] = (ends[1].r - ends[0].r) / steps\n\tstep[1] = (ends[1].g - ends[0].g) / steps\n\tstep[2] = (ends[1].b - ends[0].b) / steps\n\treturn step\n}\n\n/**\n * Create a color palette from two colors\n *\n * @param {number} steps The number of steps the palette has\n * @param {string} color1 The first color\n * @param {string} color2 The second color\n * @return {Array} The created palette array\n */\nfunction mixPalette(steps, color1, color2) {\n\tconst palette = []\n\tpalette.push(color1)\n\tconst step = stepCalc(steps, [color1, color2])\n\tfor (let i = 1; i < steps; i++) {\n\t\tconst r = parseInt(color1.r + step[0] * i, 10)\n\t\tconst g = parseInt(color1.g + step[1] * i, 10)\n\t\tconst b = parseInt(color1.b + step[2] * i, 10)\n\t\tpalette.push(new Color(r, g, b))\n\t}\n\treturn palette\n}\n\n/**\n * Generate colors from the official nextcloud color\n * You can provide how many colors you want (multiplied by 3)\n * if step = 6\n * 3 colors * 6 will result in 18 generated colors\n *\n * @param {number} [steps] Number of steps to go from a color to another\n * @return {object[]}\n */\nfunction GenColors(steps) {\n\tif (!steps) {\n\t\tsteps = 6\n\t}\n\n\tconst red = new Color(182, 70, 157)\n\tconst yellow = new Color(221, 203, 85)\n\tconst blue = new Color(0, 130, 201) // Nextcloud blue\n\n\tconst palette1 = mixPalette(steps, red, yellow)\n\tconst palette2 = mixPalette(steps, yellow, blue)\n\tconst palette3 = mixPalette(steps, blue, red)\n\n\treturn palette1.concat(palette2).concat(palette3)\n}\n\nexport default uidToColor\n"],"names":["getDefaultCategories","t","map","value","label","getRFCProperties","accessClass","readableName","icon","options","multiple","info","defaultValue","location","placeholder","description","defaultNumberOfRows","status","timeTransparency","categories","tagPlaceholder","color","timezoneManager","getTimezoneManager","initialized","registerDefaultTimezones","detectTimezone","determinedTimezone","jstz","timezoneName","name","getAllObjectsInTimeRange","calendarObject","start","end","firstVObject","calendarComponent","getVObjectIterator","next","s","DateTimeValue","fromJSDate","e","recurrenceManager","getAllOccurrencesBetween","getObjectAtRecurrenceId","recurrenceId","d","getOccurrenceAtExactly","uniqColorKeys","uniqBy","Object","keys","cssColors","c","filteredColors","pick","colors","sortBy","hex","defaults","detailed","closestColor","arguments","length","undefined","sortedColors","s1","s2","c1","rgb2lab","get","rgb","c2","Math","sqrt","pow","proximity","input","xyz","Lab","i","parseFloat","toFixed","isLight","_ref","red","green","blue","generateTextColorForHex","hexColor","_ref2","generateTextColorForRGB","hexToRGB","convert","slice","uidToHexColor","uid","uidToColor","r","g","b","detectColor","test","getHexForColorName","colorName","css3Colors","getClosestCSS3ColorNameForHex","logger","getLoggerBuilder","setApp","detectUser","build","logInfo","message","context","hash","toLowerCase","match","md5","replace","finalPalette","steps","Color","yellow","palette1","mixPalette","palette2","palette3","concat","GenColors","maximum","finalInt","result","push","parseInt","charAt","j","hashToInt","this","color1","color2","palette","step","ends","Array","stepCalc"],"sourceRoot":""}