/*! For license information please see calendar-dashboard-lazy.js.LICENSE.txt */
(self.webpackChunkcalendar=self.webpackChunkcalendar||[]).push([["dashboard-lazy","src_services_caldavService_js-src_services_talkService_js-src_utils_date_js"],{41788:(e,o,_)=>{"use strict";_.d(o,{Cy:()=>a,Ix:()=>i,Ky:()=>c,O6:()=>s,aC:()=>n,cj:()=>j,eE:()=>m,ik:()=>u,qJ:()=>l,s3:()=>d,uU:()=>r,yS:()=>t});const s="VEVENT",n="VJOURNAL",m="VTODO",l="principal:principals/users/",d="principal:principals/groups/",a="principal:principals/circles/",c="principal:principals/calendar-resources/",t="principal:principals/calendar-rooms/",r="contact_birthdays",u="default",i="importing",j="processing"},62531:(e,o,_)=>{"use strict";_.d(o,{AX:()=>i,Gm:()=>f,Iz:()=>u,M7:()=>t,Un:()=>z,Xx:()=>y,aq:()=>j,au:()=>v,ee:()=>g});var s=_(35781),n=_.n(s),m=_(78296),l=_(38580),d=_(41788);const a={},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=(e=>JSON.stringify(e))(e);return a[o]||(a[o]=new(n())({rootUrl:(0,m.o0)("dav")},(()=>{const o={"X-Requested-With":"XMLHttpRequest",requesttoken:(0,l.SI)(),"X-NC-CalDAV-Webcal-Caching":"On",...e},_=new XMLHttpRequest,s=_.open;return _.open=function(){const e=s.apply(this,arguments);for(const e in o)_.setRequestHeader(e,o[e]);return e},OC.registerXHRForErrorProcessing(_),_}))),a[o]},t=async()=>{await c().connect({enableCalDAV:!0})},r=e=>c(e).calendarHomes[0],u=()=>r().findAllCalDAVCollectionsGrouped(),i=()=>r().findAllDeletedCalendars(),j=async e=>{const o=[];for(const _ of e){const e=c().publicCalendarHome.find(_).catch((()=>null));o.push(e)}return(await Promise.all(o)).filter((e=>null!==e))},v=async(e,o,_,s,n)=>r().createCalendarCollection(e,o,_,s,n),f=async(e,o,_,s)=>r().createSubscribedCollection(e,o,_,s),y=async()=>(await r().enableBirthdayCalendar(),p()),p=async()=>r().find(d.uU),z=()=>c().currentUserPrincipal,g=async e=>c().findPrincipal(e)},51736:(e,o,_)=>{"use strict";_.d(o,{uK:()=>c});var s=_(52448),n=(_(59620),_(78296)),m=_(1828),l=_(38580),d=_(70536),a=_(88936);async function c(e){var o,_;const c=(0,m.i)("calendar","talk_api_version"),t=null!==(o=null===(_=e.getConferenceList()[0])||void 0===_?void 0:_.uri)&&void 0!==o?o:e.location;if(!t||!t.startsWith(window.location.protocol+"//"+window.location.host))return void d.cp.debug("Event's conference/location is from another host",t);const r=null!==(u=null===(i=t.match(/\/call\/([a-z0-9]*)(\/|#.*)?$/))||void 0===i?void 0:i[1])&&void 0!==u?u:void 0;var u,i;if(r)try{const{data:{ocs:{data:o}}}=await s.c.get((0,n.QP)("apps/spreed/api/"+c+"/",2)+"room/"+r),_=await s.c.get((0,n.QP)("apps/spreed/api/"+c+"/",2)+"room/"+r+"/participants");if(!_.data.ocs.data.some((e=>e.actorId===(0,l.eo)().uid&&e.participantType<=2)))return void d.cp.debug("Current user is not a moderator or owner",{currentUser:(0,l.eo)().uid,conversation:_.data.ocs.data});console.info("room",o);for(const _ of e.getAttendeeIterator()){if(d.cp.debug("Processing attendee",{attendee:_}),["GROUP","RESOURCE","ROOM"].includes(_.userType))continue;const e=(0,a.yS)(_.email);try{var j;const _=await s.c.get((0,n.QP)("core/autocomplete/",2)+"get?search="+encodeURIComponent(e)+"&itemType=&itemId=%20&shareTypes[]=0&limit=2");1===_.data.ocs.data.length&&_.data.ocs.data[0].id!==(0,l.eo)().uid?await s.c.post((0,n.QP)("apps/spreed/api/"+c+"/",2)+"room/"+r+"/participants",{newParticipant:_.data.ocs.data[0].id,source:"users"}):(null===(j=_.data.ocs.data[0])||void 0===j?void 0:j.id)===(0,l.eo)().uid?d.cp.debug("Skipping organizer "+_.data.ocs.data[0].id):3===o.type?await s.c.post((0,n.QP)("apps/spreed/api/"+c+"/",2)+"room/"+r+"/participants",{newParticipant:e,source:"emails"}):d.cp.debug("Attendee "+e+" ignored as Talk participant")}catch(o){d.cp.info("Could not add attendee "+e+" as Talk participant",{error:o})}}}catch(e){d.cp.warn("Could not update Talk room attendees",{error:e})}else d.cp.debug("URL "+t+" contains no call token")}},88936:(e,o,_)=>{"use strict";function s(e){return"string"!=typeof e?"":e.startsWith("mailto:")?e.slice(7):e}_.d(o,{yS:()=>s})},96752:(e,o,_)=>{"use strict";_.d(o,{OU:()=>s,_m:()=>m,hj:()=>n});_(70536);function s(){return new Date}function n(e){return Math.floor(e.getTime()/1e3)}function m(e){return new Date(e.year,e.month-1,e.day,e.hour,e.minute,0,0)}},11984:(e,o,_)=>{"use strict";_.r(o),_.d(o,{default:()=>d});var s=_(25648),n=_.n(s),m=_(2312),l=_.n(m)()(n());l.push([e.id,"#calendar_panel .calendar-dot{flex-shrink:0;height:1rem;width:1rem;margin-top:.2rem;border-radius:50%}#calendar_panel #calendar-widget-empty-content{text-align:center;margin-top:5vh}#calendar_panel #calendar-widget-empty-content.half-screen{margin-top:0;height:120px;margin-bottom:2vh}#calendar_panel .empty-label{display:flex;justify-content:center;margin-top:5vh}","",{version:3,sources:["webpack://./src/views/Dashboard.vue"],names:[],mappings:"AAEC,8BACC,aAAA,CACA,WAAA,CACA,UAAA,CACA,gBAAA,CACA,iBAAA,CAGD,+CACC,iBAAA,CACA,cAAA,CAEA,2DACC,YAAA,CACA,YAAA,CACA,iBAAA,CAKF,6BACC,YAAA,CACA,sBAAA,CACA,cAAA",sourcesContent:["\n#calendar_panel {\n\t.calendar-dot {\n\t\tflex-shrink: 0;\n\t\theight: 1rem;\n\t\twidth: 1rem;\n\t\tmargin-top: 0.2rem;\n\t\tborder-radius: 50%;\n\t}\n\n\t#calendar-widget-empty-content {\n\t\ttext-align: center;\n\t\tmargin-top: 5vh;\n\n\t\t&.half-screen {\n\t\t\tmargin-top: 0;\n\t\t\theight: 120px;\n\t\t\tmargin-bottom: 2vh;\n\t\t}\n\n\t}\n\n\t.empty-label {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tmargin-top: 5vh;\n\t}\n}\n"],sourceRoot:""}]);const d=l},10540:(e,o,_)=>{var s={"./af.js":[36024,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-dz.js":[11736,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-kw.js":[47888,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ly.js":[512,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ma.js":[89688,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ps.js":[65280,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-sa.js":[44948,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-tn.js":[61992,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar.js":[27544,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./az.js":[95777,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./be.js":[69940,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bg.js":[86107,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bm.js":[63544,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bn-bd.js":[92876,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bn.js":[94952,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bo.js":[56576,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./br.js":[85011,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bs.js":[43584,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ca.js":[39776,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cs.js":[36560,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cv.js":[67716,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cy.js":[70956,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./da.js":[15188,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de-at.js":[52131,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de-ch.js":[46128,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de.js":[78960,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./dv.js":[43284,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./el.js":[32972,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-au.js":[64356,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-ca.js":[28440,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-gb.js":[2448,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-ie.js":[16320,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-il.js":[74360,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-in.js":[80632,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-nz.js":[81140,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-sg.js":[85384,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./eo.js":[65620,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-do.js":[76528,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-mx.js":[98544,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-us.js":[71208,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es.js":[32348,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./et.js":[20373,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./eu.js":[69912,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fa.js":[74984,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fi.js":[52819,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fil.js":[72512,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fo.js":[18571,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr-ca.js":[93220,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr-ch.js":[45720,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr.js":[8405,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fy.js":[58116,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ga.js":[9916,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gd.js":[86908,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gl.js":[54088,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gom-deva.js":[15064,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gom-latn.js":[96300,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gu.js":[51208,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./he.js":[672,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hi.js":[648,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hr.js":[38864,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hu.js":[28164,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hy-am.js":[62528,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./id.js":[63400,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./is.js":[23912,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./it-ch.js":[77988,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./it.js":[77088,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ja.js":[52501,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./jv.js":[40376,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ka.js":[67048,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./kk.js":[56416,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./km.js":[58288,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./kn.js":[84833,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ko.js":[33352,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ku-kmr.js":[5192,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ku.js":[76376,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ky.js":[92832,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lb.js":[61448,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lo.js":[34116,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lt.js":[20296,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lv.js":[76136,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./me.js":[28019,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mi.js":[41320,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mk.js":[47720,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ml.js":[81228,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mn.js":[49564,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mr.js":[56116,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ms-my.js":[69676,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ms.js":[88512,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mt.js":[29824,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./my.js":[82792,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nb.js":[23444,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ne.js":[77860,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nl-be.js":[63760,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nl.js":[39940,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nn.js":[28888,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./oc-lnc.js":[18096,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pa-in.js":[78837,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pl.js":[13524,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pt-br.js":[11048,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pt.js":[96840,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ro.js":[33060,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ru.js":[3156,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sd.js":[96595,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./se.js":[94560,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./si.js":[38668,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sk.js":[69500,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sl.js":[67643,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sq.js":[84192,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sr-cyrl.js":[58728,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sr.js":[56832,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ss.js":[28692,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sv.js":[63252,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sw.js":[98904,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ta.js":[71120,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./te.js":[46688,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tet.js":[37176,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tg.js":[69248,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./th.js":[27172,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tk.js":[30208,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tl-ph.js":[69363,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tlh.js":[331,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tr.js":[43920,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzl.js":[84360,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzm-latn.js":[4112,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzm.js":[97524,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ug-cn.js":[71124,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uk.js":[69328,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ur.js":[88968,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uz-latn.js":[19388,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uz.js":[51516,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./vi.js":[59664,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./x-pseudo.js":[68616,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./yo.js":[85436,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-cn.js":[3820,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-hk.js":[60112,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-mo.js":[99504,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-tw.js":[15660,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"]};function n(e){if(!_.o(s,e))return Promise.resolve().then((()=>{var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}));var o=s[e],n=o[0];return Promise.all(o.slice(1).map(_.e)).then((()=>_.t(n,23)))}n.keys=()=>Object.keys(s),n.id=10540,e.exports=n},65860:(e,o,_)=>{"use strict";_.d(o,{default:()=>C});var s=_(31032),n=_(37640),m=_(39300),l=_(94002),d=_(82220),a=_(1828),c=_(32824),r=_(78296),u=_(62531),i=_(96752),j=_(21080),v=_(59620),f=_(8216),y=_(70536),p=_(50080);function z(e,o,_,s,n){const m=[];for(const l of e){let e;try{e=(0,p.E)(l,_,s)}catch(e){y.cp.error(e.message);continue}for(const _ of e){const e=[];if("CANCELLED"===_.status?e.push("fc-event-nc-cancelled"):"TENTATIVE"===_.status&&e.push("fc-event-nc-tentative"),_.hasComponent("VALARM")&&e.push("fc-event-nc-alarms"),"VTODO"===_.name&&null===_.endDate)continue;let s,d,a;if("VEVENT"===_.name)s=_.startDate.getInTimezone(n).jsDate,d=_.endDate.getInTimezone(n).jsDate;else{if("VTODO"!==_.name)continue;s=_.endDate.getInTimezone(n).jsDate,d=_.endDate.getInTimezone(n).jsDate}s.getTime()===d.getTime()&&d.setSeconds(d.getSeconds()+1),"VTODO"===_.name&&(e.push("fc-event-nc-task"),100!==_.percent&&"COMPLETED"!==_.status||e.push("fc-event-nc-task-completed")),"VEVENT"===_.name?a=_.title?_.title.replace(/\n/g," "):(0,v.translate)("calendar","Untitled event"):(a=_.title?_.title.replace(/\n/g," "):(0,v.translate)("calendar","Untitled task"),null!==_.percent&&(a+=" (".concat(_.percent,"%)")));const c={id:[l.id,_.id].join("###"),title:a,allDay:_.isAllDay(),start:s,end:d,classNames:e,extendedProps:{objectId:l.id,recurrenceId:_.getReferenceRecurrenceId()?_.getReferenceRecurrenceId().unixTime:null,canModifyAllDay:_.canModifyAllDay(),calendarOrder:o.order,calendarName:o.displayName,calendarId:o.id,darkText:(0,f.YT)((0,f.KA)(o.color)),objectType:_.name,percent:_.percent||null,davUrl:l.dav.url,location:_.location,description:_.description}};if(_.color){const e=(0,f.eU)(_.color);e&&(c.backgroundColor=e,c.borderColor=e,c.textColor=(0,f.u0)(e))}m.push(c)}}return m}async function g(e){try{return await _(10540)("./".concat(e,".js")),e}catch(o){const s=e.split("-");try{return e=s[0],await _(10540)("./".concat(e,".js")),e}catch(e){console.debug("Fallback to locale","en")}}return"en"}var h=_(16112),A=_(48416);const w={name:"Dashboard",components:{DashboardWidget:s.g,DashboardWidgetItem:s.W,NcButton:n.Ut,EmptyContent:n.sJ,EmptyCalendar:m.c,IconCheck:l.default,IconCheckbox:d.default},data:()=>({events:null,locale:"en",imagePath:(0,r.o1)("calendar","illustrations/calendar"),loading:!0,now:(0,i.OU)()}),computed:{...(0,A.gV)({timezoneObject:"getResolvedTimezoneObject"}),items(){if(!Array.isArray(this.events)||0===this.events.length)return[];const e=this.events[0];return(0,c.c)(this.now).endOf("day").isBefore(e.startDate)?[{isEmptyItem:!0}].concat(this.events.slice(0,4)):this.events},clickStartNew:()=>(0,r.AF)("apps/calendar")+"/new"},mounted(){this.initialize()},methods:{async initialize(){const e=(0,i.OU)(),o=(0,i.OU)();o.setDate(o.getDate()+14);const _=(0,c.c)(e).startOf("day").toDate();await this.initializeEnvironment();const s=await this.fetchExpandedEvents(e,o);this.events=await this.formatEvents(s,_),this.loading=!1},async initializeEnvironment(){await(0,u.M7)(),await this.$store.dispatch("fetchCurrentUserPrincipal"),await this.$store.dispatch("loadCollections");const{show_tasks:e,timezone:o}=(0,a.i)("calendar","dashboard_data"),_=await async function(){const e=(0,v.a8)().replace("_","-").toLowerCase(),o=(0,v.mo)().replace("_","-").toLowerCase();if(e===o)return g(e);const[_,s]=await Promise.all([g(e),g(o)]);if(_===s)return _;const n="nextcloud-calendar-fake-locale-".concat(_,"-").concat(s);return c.c.defineLocale(n,{parentLocale:s,longDateFormat:{LT:c.c.localeData(_).longDateFormat("LT"),LTS:c.c.localeData(_).longDateFormat("LTS"),L:c.c.localeData(_).longDateFormat("L"),LL:c.c.localeData(_).longDateFormat("LL"),LLL:c.c.localeData(_).longDateFormat("LLL"),LLLL:c.c.localeData(_).longDateFormat("LLLL"),l:c.c.localeData(_).longDateFormat("l"),ll:c.c.localeData(_).longDateFormat("ll"),lll:c.c.localeData(_).longDateFormat("lll"),llll:c.c.localeData(_).longDateFormat("llll")},week:{dow:(0,v.wD)(),doy:c.c.localeData(_).firstDayOfYear()}}),n}();this.$store.commit("loadSettingsFromServer",{timezone:o,showTasks:e}),this.$store.commit("setMomentLocale",{locale:_})},async fetchExpandedEvents(e,o){const _=(0,j.c)(10),s=[];for(const n of this.$store.getters.enabledCalendars)s.push(_((async()=>{let _;try{_=await this.$store.dispatch("getEventsFromCalendarInTimeRange",{calendar:n,from:e,to:o})}catch(e){return[]}return z(this.$store.getters.getCalendarObjectsByTimeRangeId(_),n,e,o,this.timezoneObject)})));return(await Promise.all(s)).flat()},formatEvents(e,o){return e.sort(((e,o)=>e.start.getTime()-o.start.getTime())).filter((e=>!e.classNames.includes("fc-event-nc-task-completed"))).filter((e=>!e.classNames.includes("fc-event-nc-cancelled"))).filter((e=>o.getTime()<=e.start.getTime())).slice(0,7).map((e=>({isEmptyItem:!1,componentName:e.extendedProps.objectType,targetUrl:"VEVENT"===e.extendedProps.objectType?this.getCalendarAppUrl(e):this.getTasksAppUrl(e),subText:this.formatSubtext(e),mainText:e.title,startDate:e.start,calendarColor:this.$store.state.calendars.calendarsById[e.extendedProps.calendarId].color,calendarDisplayName:this.$store.state.calendars.calendarsById[e.extendedProps.calendarId].displayname})))},formatSubtext(e){const o=this.$store.state.settings.momentLocale;if(e.allDay)return(0,c.c)(e.start).locale(o).calendar(null,{sameDay:t("calendar","[Today]"),nextDay:t("calendar","[Tomorrow]"),nextWeek:"dddd",lastDay:t("calendar","[Yesterday]"),lastWeek:t("calendar","[Last] dddd"),sameElse:()=>"[replace-from-now]"}).replace("replace-from-now",(0,c.c)(e.start).locale(o).fromNow());{const _=h.EZ.fromJSDate(e.start).getInTimezone(this.timezoneObject).utcOffset()/60;return(0,c.c)(e.start).utcOffset(_).locale(o).calendar(null,{sameElse:()=>"[replace-from-now]"}).replace("replace-from-now",(0,c.c)(e.start).utcOffset(_).locale(o).fromNow())}},getCalendarAppUrl(e){let{extendedProps:o}=e;return(0,r.AF)("apps/calendar")+"/edit/"+o.objectId+"/"+o.recurrenceId},getTasksAppUrl(e){let{extendedProps:o}=e;const _=o.davUrl.split("/"),s=_.pop(),n=_.pop();return(0,r.AF)("apps/tasks")+"/#/calendars/".concat(n,"/tasks/").concat(s)}}};_(63068);const C=(0,_(1456).c)(w,(function(){var e=this,o=e._self._c;return o("DashboardWidget",{attrs:{id:"calendar_panel",items:e.items,loading:e.loading},scopedSlots:e._u([{key:"default",fn:function(_){let{item:s}=_;return[s.isEmptyItem?o("EmptyContent",{staticClass:"half-screen",attrs:{id:"calendar-widget-empty-content",name:e.t("calendar","No more events today")},scopedSlots:e._u([{key:"icon",fn:function(){return[o("IconCheck",{attrs:{size:67}})]},proxy:!0}],null,!0)}):o("DashboardWidgetItem",{attrs:{"main-text":s.mainText,"sub-text":s.subText,"target-url":s.targetUrl},scopedSlots:e._u([{key:"avatar",fn:function(){return["VEVENT"===s.componentName?o("div",{staticClass:"calendar-dot",style:{"background-color":s.calendarColor},attrs:{name:s.calendarDisplayName}}):o("IconCheckbox",{attrs:{"fill-color":s.calendarColor}})]},proxy:!0}],null,!0)})]}},{key:"empty-content",fn:function(){return[o("EmptyContent",{attrs:{id:"calendar-widget-empty-content",name:e.t("calendar","No upcoming events")},scopedSlots:e._u([{key:"icon",fn:function(){return[o("EmptyCalendar")]},proxy:!0}])}),e._v(" "),o("div",{staticClass:"empty-label"},[o("NcButton",{attrs:{type:"secondary",href:e.clickStartNew}},[e._v("\n\t\t\t\t"+e._s(e.t("calendar","Create a new event"))+"\n\t\t\t")])],1)]},proxy:!0}])})}),[],!1,null,null,null).exports},63068:(e,o,_)=>{var s=_(11984);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,_(19324).c)("d84a2ee6",s,!0,{})},45500:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},47464:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},25888:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},66612:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"}}]);
//# sourceMappingURL=calendar-dashboard-lazy.js.map?v=ed5c8610d19e982764e9