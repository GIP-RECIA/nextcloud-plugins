(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{193:function(t,e,o){t.exports=o.p+"app.svg?acc601d7eb0da0d52a9655926468f275"},194:function(t,e,o){var a=o(205);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,o(5).default)("7ef71685",a,!1,{})},195:function(t,e,o){var a=o(208);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,o(5).default)("6c3c2a47",a,!1,{})},204:function(t,e,o){"use strict";var a=o(194);o.n(a).a},205:function(t,e,o){(t.exports=o(4)(!1)).push([t.i,".table-row{width:100%;padding-left:15px;padding-right:15px;line-height:2em;transition:background-color 0.3s ease;background-color:var(--color-main-background);min-height:4em;border-bottom:1px solid var(--color-border)}.table-row.table-header .name,.table-row.table-header .description{padding-left:52px}.table-row.table-header .owner{padding-left:6px}.table-row.table-body:hover,.table-row.table-body:focus,.table-row.table-body:active,.table-row.table-body.mouseOver{transition:background-color 0.3s ease;background-color:var(--color-background-dark)}.table-row.table-body .icon-more{right:14px;opacity:0.3;cursor:pointer;height:44px;width:44px}.table-row.table-body .symbol{padding:2px}.table-row.table-header{opacity:0.5}.wrapper{display:flex;align-items:center;position:relative;flex-grow:0}.name{width:150px}.description{width:150px;opacity:0.5}.name,.description{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.actions{width:44px;position:relative;overflow:initial}.access{width:44px}.owner{width:140px}.created{width:120px}.expiry{width:120px}.expiry.expired{color:red}.group-1,.group-1-1{flex-grow:1}.group-1-1{flex-direction:column;width:150px}.group-1-1>div{width:100%}@media all and (max-width: 787px){.group-1{width:238px}.group-2-1,.group-2-2{flex-direction:column}.created{width:120px}.expiry,.participants{width:120px}}@media all and (max-width: 648px){.table-row{padding:0}.group-2-1{display:none}}@media all and (max-width: 528px){.group-2{display:none}}.thumbnail{width:44px;height:44px;padding-right:4px;font-size:0;background-color:var(--color-text-light)}.thumbnail.dateform{mask-image:var(--icon-calendar-000) no-repeat 50% 50%;-webkit-mask:var(--icon-calendar-000) no-repeat 50% 50%;mask-size:16px}.thumbnail.textform{mask-image:var(--icon-organization-000) no-repeat 50% 50%;-webkit-mask:var(--icon-organization-000) no-repeat 50% 50%;mask-size:16px}.thumbnail.expired{background-color:var(--color-background-darker)}.thumbnail.access{display:inherit}.thumbnail.access.hidden{mask-image:var(--icon-password-000) no-repeat 50% 50%;-webkit-mask:var(--icon-password-000) no-repeat 50% 50%;mask-size:16px}.thumbnail.access.public{mask-image:var(--icon-link-000) no-repeat 50% 50%;-webkit-mask:var(--icon-link-000) no-repeat 50% 50%;mask-size:16px}.thumbnail.access.select{mask-image:var(--icon-share-000) no-repeat 50% 50%;-webkit-mask:var(--icon-share-000) no-repeat 50% 50%;mask-size:16px}.thumbnail.access.registered{mask-image:var(--icon-group-000) no-repeat 50% 50%;-webkit-mask:var(--icon-group-000) no-repeat 50% 50%;mask-size:16px}.icon-voted{background-image:var(--icon-checkmark-fff)}.app-navigation-entry-utils-counter{padding-right:0 !important;overflow:hidden;text-align:right;font-size:9pt;line-height:44px;padding:0 12px}.app-navigation-entry-utils-counter.highlighted{padding:0;text-align:center}.app-navigation-entry-utils-counter.highlighted span{padding:2px 5px;border-radius:10px;background-color:var(--color-primary);color:var(--color-primary-text)}.symbol.icon-voted{position:absolute;left:11px;top:16px;background-size:0;min-width:8px;min-height:8px;background-color:var(--color-success);border-radius:50%}\n",""])},207:function(t,e,o){"use strict";var a=o(195);o.n(a).a},208:function(t,e,o){e=t.exports=o(4)(!1);var a=o(192)(o(193));e.push([t.i,".table{width:100%;margin-top:45px;display:flex;flex-direction:column;flex-grow:1;flex-wrap:nowrap}#emptycontent .icon-forms{background-color:black;-webkit-mask:url("+a+") no-repeat 50% 50%;mask:url("+a+") no-repeat 50% 50%}\n",""])},211:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("button",{staticClass:"button btn primary",on:{click:t.download}},[o("span",[t._v(t._s("Export to CSV"))])])]),t._v(" "),o("h1",[t._v("\n\t\t"+t._s("Statistics")+"\n\t")]),t._v(" "),t._l(t.stats,function(e){return o("div",{key:e},[t._v("\n\t\t"+t._s(e)+"\n\t")])}),t._v(" "),o("div",{attrs:{id:"app-content"}},[o("transition-group",{staticClass:"table",attrs:{name:"list",tag:"div"}},[o("resultItem",{key:"0",attrs:{header:!0}}),t._v(" "),t._l(t.votes,function(e,a){return o("resultItem",{key:e.id,tag:"li",attrs:{vote:e},on:{viewResults:function(e){return t.viewFormResults(a,t.form.event,"results")}}})})],2),t._v(" "),t.loading?o("loading-overlay"):t._e(),t._v(" "),o("modal-dialog")],1)],2)};a._withStripped=!0;var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.header?o("div",{staticClass:"wrapper group-master table-row table-header"},[o("div",{staticClass:"wrapper group-1"},[o("div",{staticClass:"wrapper group-1-1"},[o("div",{staticClass:"name"},[t._v("\n\t\t\t\t"+t._s("Name")+"\n\t\t\t")])]),t._v(" "),o("div",{staticClass:"wrapper group-1-1"},[o("div",{staticClass:"question"},[t._v("\n\t\t\t\t"+t._s("Question #")+"\n\t\t\t")])]),t._v(" "),o("div",{staticClass:"wrapper group-1-1"},[o("div",{staticClass:"questionText"},[t._v("\n\t\t\t\t"+t._s("Question")+"\n\t\t\t")])])]),t._v(" "),o("div",{staticClass:"wrapper group-2"},[o("div",{staticClass:"ans"},[t._v("\n\t\t\t"+t._s("Response")+"\n\t\t")])])]):o("div",{staticClass:"wrapper table-row table-body group-master"},[o("div",{staticClass:"wrapper group-1"},[o("div",{staticClass:"wrapper group-1-1"},[o("div",{staticClass:"name"},[t._v("\n\t\t\t\t"+t._s(t.participants)+"\n\t\t\t")])]),t._v(" "),o("div",{staticClass:"wrapper group-1-1"},[o("div",{staticClass:"question"},[t._v("\n\t\t\t\t"+t._s(t.questionNum)+"\n\t\t\t")])]),t._v(" "),o("div",{staticClass:"wrapper group-1-1"},[o("div",{staticClass:"questionText"},[t._v("\n\t\t\t\t"+t._s(t.questionText)+"\n\t\t\t")])])]),t._v(" "),o("div",{staticClass:"wrapper group-2"},[o("div",{staticClass:"ans"},[t._v("\n\t\t\t"+t._s(t.answers)+"\n\t\t")])])])};i._withStripped=!0;var r={props:{header:{type:Boolean,default:!1},form:{type:Object,default:void 0},vote:{type:Object,default:void 0}},data:function(){return{openedMenu:!1,hostName:this.$route.query.page}},computed:{participants:function(){return this.vote.userId},questionText:function(){return this.vote.voteOptionText},answers:function(){return this.vote.voteAnswer},questionNum:function(){return this.vote.voteOptionId}}},n=(o(204),o(1)),s=Object(n.a)(r,i,[],!1,null,null,null);s.options.__file="src/components/resultItem.vue";var p=s.exports,l=o(206),d=o.n(l),c={name:"Results",components:{resultItem:p},data:function(){return{loading:!0,votes:[]}},created:function(){this.indexPage=OC.generateUrl("apps/forms/"),this.loadForms()},methods:{loadForms:function(){var t=this;this.loading=!0,this.$http.get(OC.generateUrl("apps/forms/get/votes/"+this.$route.params.hash)).then(function(e){null==e.data?(t.votes=null,OC.Notification.showTemporary("Access Denied")):t.votes=e.data,t.loading=!1},function(e){console.log(e.response),t.loading=!1})},viewFormResults:function(t,e,o){this.$router.push({name:o,params:{hash:e.id}})},download:function(){var t=this;this.loading=!0,this.$http.get(OC.generateUrl("apps/forms/get/event/"+this.$route.params.hash)).then(function(e){t.json2csvParser=["userId","voteOptionId","voteOptionText","voteAnswer"];var o=document.createElement("a");o.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(d.a.parse(t.votes))),o.setAttribute("download",e.data.title+".csv"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),t.loading=!1},function(e){console.log(e.response),t.loading=!1})}},computed:{stats:function(){if(null!=this.votes){for(var t=[],e=[],o=new Map,a=0;a<this.votes.length;a++)"radiogroup"!==this.votes[a].voteOptionType&&"dropdown"!==this.votes[a].voteOptionType||(!1===t.includes(this.votes[a].voteAnswer)&&(t.push(this.votes[a].voteAnswer),o.set(this.votes[a].voteAnswer,this.votes[a].voteOptionId)),!1===e.includes(this.votes[a].voteOptionId)&&e.push(this.votes[a].voteOptionId));for(var i=[],r=0;r<t.length;r++)i[r]=0;for(var n=0;n<this.votes.length;n++)i[t.indexOf(this.votes[n].voteAnswer)]++;for(var s=0;s<i.length;s++)i[s]="Question "+o.get(t[s])+":  "+(i[s]/(this.votes.length/e.length)*100).toFixed(2)+"% of respondents voted for answer choice: "+t[s]}return i.sort()}}},u=(o(207),Object(n.a)(c,a,[],!1,null,null,null));u.options.__file="src/views/Results.vue";e.default=u.exports}}]);